Ext.define("Jarvus.ext.override.data.ConnectionUploadProgress",{override:"Ext.data.Connection",newRequest:function(a){var b=this.callParent([a]);if(a.uploadProgress){b.upload.onprogress=a.uploadProgress}return b}});Ext.define("Ext.Widget",{extend:Ext.Evented,xtype:"widget",mixins:[Ext.mixin.Inheritable,Ext.mixin.Bindable],isWidget:true,element:{reference:"element"},listenerOptionsRegex:/^(?:scope|order|delegate|single|delay|buffer|args|prepend|destroyable|element)$/,observableType:"component",eventedConfig:{width:null,height:null},template:[],constructor:function(a){var b=this;b.initId(a);b.initElement();b.mixins.observable.constructor.call(b,a);Ext.ComponentManager.register(b)},addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else{Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:true})}},addElementReference:function(c,e){var f=this,b=f[c]=Ext.get(e),d=f._elementListeners[c],a,g;b.skipGarbageCollection=true;b.component=f;if(d){d=Ext.clone(d);d.scope=f;for(a in d){g=d[a];if(typeof g==="object"){g.scope=f}}b.on(d)}return b},afterCachedConfig:function(){var h=this,j=h.self.prototype,k=h.referenceList,c=h.renderElement.dom,f,d,e,g,b,a;j.renderTemplate=f=document.createDocumentFragment();f.appendChild(c.cloneNode(true));a=f.querySelectorAll("[id]");for(e=0,g=a.length;e<g;e++){d=a[e];d.removeAttribute("id")}for(e=0,g=k.length;e<g;e++){b=k[e];h[b].dom.removeAttribute("reference")}},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},destroy:function(){var e=this,b=e.referenceList,c,d,a;for(c=0,d=b.length;c<d;c++){a=b[c];if(e.hasOwnProperty(a)){e[a].destroy();e[a]=null}}e.callParent();Ext.ComponentManager.unregister(e)},doAddListener:function(c,e,d,b,a){if(b&&"element" in b){if(this.referenceList.indexOf(b.element)===-1){Ext.Logger.error("Adding event listener with an invalid element reference of '"+b.element+"' for this component. Available values are: '"+this.referenceList.join("', '")+"'",this)}return this[b.element].doAddListener(c,e,d||this,b,a)}return this.callParent([c,e,d,b,a])},doRemoveListener:function(c,e,d,b,a){if(b&&"element" in b){if(this.referenceList.indexOf(b.element)===-1){Ext.Logger.error("Removing event listener with an invalid element reference of '"+b.element+"' for this component. Available values are: '"+this.referenceList.join('", "')+"'",this)}this[b.element].doRemoveListener(c,e,d||this,b,a)}return this.callParent([c,e,d,b,a])},doSetWidth:function(a){this.element.setWidth(a)},doSetHeight:function(a){this.element.setHeight(a)},filterLengthValue:function(a){if(a==="auto"||(!a&&a!==0)){return null}return a},getElementConfig:function(){var b=this,a=b.element;if(!("children" in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var l=this,m=l.self.prototype,a=l.getId(),o=l.referenceList=[],c=true,h,e,g,b,f,k,j,d,n;if(m.hasOwnProperty("renderTemplate")){h=l.renderTemplate.cloneNode(true);e=h.firstChild}else{c=false;h=document.createDocumentFragment();n=l.getElementConfig();l.initElementListeners(n);e=Ext.Element.create(n,true);h.appendChild(e)}b=h.querySelectorAll("[reference]");for(f=0,k=b.length;f<k;f++){j=b[f];d=j.getAttribute("reference");if(c){j.removeAttribute("reference")}if(d==="element"){if(g){Ext.Error.raise("Duplicate 'element' reference detected in '"+l.$className+"' template.")}j.id=a;g=l.el=l.addElementReference(d,j)}else{l.addElementReferenceOnDemand(d,j)}o.push(d)}if(!g){Ext.Error.raise("No 'element' reference found in '"+l.$className+"' template.")}if(e===g.dom){l.renderElement=g}else{l.addElementReferenceOnDemand("renderElement",e)}},initElementListeners:function(h){var g=this,f=g._elementListeners||(g.self.prototype._elementListeners={}),a=h.reference,c=h.children,d,e,b;if(a){d=h.listeners;if(d){f[a]=d;h.listeners=null}}if(c){for(b=0,e=c.length;b<e;b++){g.initElementListeners(c[b])}}},initId:function(b){var c=this,a=c.config,d=(b&&b.id)||(a&&a.id);if(d){c.setId(d);c.id=d}else{c.getId()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},resolveListenerScope:function(a){return this.mixins.inheritable.resolveListenerScope.call(this,a)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}}});Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=true;a.addStateEvents(["changeregion","changeweight"]);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,"region");b=a.addPropertyToState(b,"weight");return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return(a&&a.isBorderLayout)?a:null},setRegion:function(j){var i=this,c,d=i.region;if(typeof j!=="string"){Ext.Error.raise("Use setBox to set the size or position of a component.")}if(j!==d){c=i.getOwningBorderLayout();if(c){var f=c.regionFlags[j],k=i.placeholder,a=i.splitter,b=c.owner,m=c.regionMeta,e=i.collapsed||i.floated,l,h,g;if(i.fireEventArgs("beforechangeregion",[i,j])===false){return d}Ext.suspendLayouts();i.region=j;Ext.apply(i,f);if(i.updateCollapseTool){i.updateCollapseTool()}if(a){Ext.apply(a,f);a.updateOrientation();h=b.items;g=h.indexOf(i);if(g>=0){l=m[j].splitterDelta;if(h.getAt(g+l)!==a){h.remove(a);g=h.indexOf(i);if(l>0){++g}h.insert(g,a)}}}if(k){if(e){i.expand(false)}b.remove(k);i.placeholder=null;if(e){i.collapse(null,false)}}b.updateLayout();Ext.resumeLayouts(true);i.fireEventArgs("changeregion",[i,d])}else{i.region=j}}return d},setWeight:function(d){var c=this,b=c.getOwningBorderContainer(),e=c.placeholder,a=c.weight;if(d!==a){if(c.fireEventArgs("beforechangeweight",[c,d])!==false){c.weight=d;if(e){e.weight=d}if(b){b.updateLayout()}c.fireEventArgs("changeweight",[c,a])}}return a}},function(a){var b=a.prototype;b.setBorderRegion=b.setRegion;b.setRegionWeight=b.setWeight});Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,cachedConfig:{baseCls:Ext.baseCSSPrefix+"widget"},constructor:function(a){this.callParent([a]);this.getComponentLayout()},addCls:function(a){this.el.addCls(a)},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,finishRender:function(){this.rendering=false;this.initBindable()},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,e,a){var d=this,c=d.inheritedState;d.ownerCt=b;if(c&&a){d.invalidateInheritedState()}if(d.reference){d.fixReference()}},onRemoved:function(b){var a=this,c;if(a.reference){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(!b){a.removeBindings()}if(a.inheritedState&&!b){a.invalidateInheritedState()}a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},render:function(b,a){var c=this.element,d;if(a){nextSibiling=b.childNodes[a];if(d){b.insertBefore(c,d);return}}b.appendChild(c)},setPosition:function(a,b){this.el.setLocalXY(a,b)}},function(){var a;if(Ext.isIE8){a=Ext.Widget.prototype;a.addElementReferenceOnDemand=a.addElementReference}this.borrow(Ext.Component,["up"])});Ext.define("Ext.app.bind.Template",{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var c=this,b=c._initters,a;c.text=d;for(a in b){c[a]=b[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(h,j){var e=this,d=e.slots,b=e.buffer,a=d.length,c,g,f;for(c=0;c<a;++c){g=d[c];if(g){if((f=h[g.pos])==null){f=""}if(g.not){f=!f}if(g.format){f=g.format(f,j)}b[c]=f}}return b.join("")},getTokens:function(){return this.tokens},parse:function(){var k=this,p=k.text,e=[],h=[],j=[],o={},n=0,d=k.tokenRe,l=0,b,f,a,g,q,m,c;for(f in k._initters){delete k[f]}k.buffer=e;k.slots=h;k.tokens=j;while((g=d.exec(p))){a=g.index-n;if(a){e[l++]=p.substring(n,n+a);n+=a}n+=(q=g[0]).length;m={fmt:(b=g[3]||null),index:g[1]?parseInt(g[1],10):null,not:q.charAt(1)==="!",token:g[2]||null};c=m.token||String(m.index);if(c in o){m.pos=o[c]}else{o[c]=m.pos=j.length;j.push(c)}if(b){if(b.substring(0,5)==="this."){m.fmt=b.substring(5)}else{if(!(b in Ext.util.Format)){Ext.Error.raise('Invalid format specified: "'+b+'"')}m.scope=Ext.util.Format}k.parseArgs(g[4],m)}h[l++]=m}if(n<p.length){e[l++]=p.substring(n)}return k},parseArgs:function(f,g){var e=this,b=e.numberRe,h=e.stringRe,j,d,c,a;if(!f){d=[]}else{if(f.indexOf(",")<0){d=[f]}else{d=f.split(",")}}g=g||{};a=d.length;g.args=d;for(c=0;c<a;++c){j=d[c];if(j==="true"){d[c]=true}else{if(j==="false"){d[c]=false}else{if(j==="null"){d[c]=null}else{if(b.test(j)){d[c]=parseFloat(j)}else{if(h.test(j)){d[c]=j.substring(1,j.length-1)}else{g.fn=Ext.functionFactory("return ["+f+"];");g.format=e._formatEval;break}}}}}}if(!g.format){d.unshift(0);g.format=e._formatArgs}return g},parseFormat:function(a){var d=this,c=d.formatRe.exec(a),e={fmt:a,scope:Ext.util.Format},b;if(!c){Ext.Error.raise('Invalid format syntax: "'+e+'"')}b=c[2];if(b){e.fmt=c[1];d.parseArgs(b,e)}else{e.args=[0];e.format=d._formatArgs}return e},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,b){var a=this.fn();a.unshift(c);b=this.scope||b;return b[this.fmt].apply(b,a)}});Ext.define("Ext.data.identifier.Negative",{extend:Ext.data.identifier.Sequential,alias:"data.identifier.negative",config:{increment:-1,seed:-1}});Ext.define("Ext.data.validator.Presence",{extend:Ext.data.validator.Validator,alias:"data.validator.presence",type:"presence",config:{message:"Must be present",allowEmpty:false},validate:function(b){var a=!(b===undefined||b===null);if(a&&!this.getAllowEmpty()){a=!(b==="")}return a?true:this.getMessage()}});Ext.define("Ext.util.TaskManager",{extend:Ext.util.TaskRunner,alternateClassName:["Ext.TaskManager"],singleton:true});Ext.define("Ext.layout.container.Editor",{alias:"layout.editor",extend:Ext.layout.container.Container,autoSizeDefault:{width:"field",height:"field"},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(d){var c=this,a=c.owner.autoSize,b=a&&a.width,e=c.sizePolicies;e=e[b]||e.$;b=a&&a.height;e=e[b]||e.$;return e},calculate:function(f){var e=this,b=e.owner,a=b.autoSize,d,c;if(a===true){a=e.autoSizeDefault}if(a){d=e.getDimension(b,a.width,"getWidth",b.width);c=e.getDimension(b,a.height,"getHeight",b.height)}f.childItems[0].setSize(d,c);f.setWidth(d);f.setHeight(c);f.setContentSize(d||b.field.getWidth(),c||b.field.getHeight())},getDimension:function(a,b,d,c){switch(b){case"boundEl":return a.boundEl[d]();case"field":return undefined;default:return c}}});Ext.define("Ext.Editor",{extend:Ext.container.Container,xtype:"editor",layout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,focusOnToFront:false,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field,"textfield");b.inEditor=true;b.msgTarget=b.msgTarget||"qtip";a.mon(b,{scope:a,blur:a.onFieldBlur,specialkey:a.onSpecialKey});if(b.grow){a.mon(b,"autosize",a.onFieldAutosize,a,{delay:1})}a.floating={constrain:a.constrain};a.items=b;a.callParent(arguments)},onFieldAutosize:function(){this.updateLayout()},afterRender:function(b,a){var c=this,e=c.field,d=e.inputEl;c.callParent(arguments);if(d){d.dom.name="";if(c.swallowKeys){d.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(f,e){var d=this,b=e.getKey(),a=d.completeOnEnter&&b==e.ENTER,c=d.cancelOnEsc&&b==e.ESC;if(a||c){e.stopEvent();Ext.defer(function(){if(a){d.completeEdit()}else{d.cancelEdit()}},1)}d.fireEvent("specialkey",d,f,e)},startEdit:function(a,c){var b=this,d=b.field,e;b.completeEdit();b.boundEl=Ext.get(a);e=b.boundEl.dom;c=Ext.isDefined(c)?c:Ext.String.trim(e.textContent||e.innerText||e.innerHTML);if(!b.rendered&&!b.renderTo&&b.ownerCt){(b.renderTo=b.ownerCt.el).position()}if(b.fireEvent("beforestartedit",b,b.boundEl,c)!==false){b.startValue=c;b.show();d.suspendEvents();d.reset();d.setValue(c);d.resumeEvents();b.realign(true);d.focus([d.getRawValue().length]);if(d.autoSize){d.autoSize()}b.editing=true}},realign:function(a){var b=this;if(a===true){b.updateLayout()}b.alignTo(b.boundEl,b.alignment,b.offsets)},completeEdit:function(a){var b=this,d=b.field,c;if(!b.editing){return}if(d.assertValue){d.assertValue()}c=b.getValue();if(!d.isValid()){if(b.revertInvalid!==false){b.cancelEdit(a)}return}if(String(c)===String(b.startValue)&&b.ignoreNoChange){b.onEditComplete(a);return}if(b.fireEvent("beforecomplete",b,c,b.startValue)!==false){c=b.getValue();if(b.updateEl&&b.boundEl){b.boundEl.setHtml(c)}b.onEditComplete(a);b.fireEvent("complete",b,c,b.startValue)}},onShow:function(){var a=this;a.callParent(arguments);if(a.hideEl!==false){a.boundEl.hide()}a.fireEvent("startedit",a,a.boundEl,a.startValue)},cancelEdit:function(a){var c=this,b=c.startValue,e=c.field,d;if(c.editing){if(e){d=c.editedValue=c.getValue();e.suspendEvents();c.setValue(b);e.resumeEvents()}c.onEditComplete(a);c.fireEvent("canceledit",c,d,b);delete c.editedValue}},onEditComplete:function(a){this.editing=false;if(a!==true){this.hide()}},onFieldBlur:function(d,c){var a=this,b=Ext.Element.getActiveElement();if(a.allowBlur===true&&a.editing&&a.selectSameEditor!==true){a.completeEdit()}if(Ext.fly(b).isFocusable()||b.getAttribute("tabindex")){b.focus()}},onHide:function(){var a=this,b=a.field;if(a.editing){a.completeEdit();return}if(b.collapse){b.collapse()}if(a.hideEl!==false){a.boundEl.show()}a.callParent(arguments)},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var a=this;Ext.destroy(a.field);delete a.field;delete a.boundEl;a.callParent(arguments)}});Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:Ext.layout.component.Auto,type:"progressbar",beginLayout:function(d){var b=this,a,c;b.callParent(arguments);if(!d.textEls){c=b.owner.textEl;if(c.isComposite){d.textEls=[];c=c.elements;for(a=c.length;a--;){d.textEls[a]=d.getEl(Ext.get(c[a]))}}else{d.textEls=[d.getEl("textEl")]}}},calculate:function(e){var c=this,a,d,b;c.callParent(arguments);if(Ext.isNumber(b=e.getProp("width"))){b-=e.getBorderInfo().width;d=e.textEls;for(a=d.length;a--;){d[a].setWidth(b)}}else{c.done=false}}});Ext.define("Ext.ProgressBar",{extend:Ext.Component,alias:"widget.progressbar",config:{value:0,textTpl:null},baseCls:Ext.baseCSSPrefix+"progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this;return Ext.apply(a.callParent(),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:a.value?a.value*100:0})},onRender:function(){var a=this;a.callParent(arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else{a.textEl=a.el.select("."+a.baseCls+"-text")}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+"%")},updateProgress:function(e,f,a){var d=this,b=d.value,c=d.getTextTpl();d.value=e||(e=0);if(f!=null){d.updateText(f)}else{if(c){d.updateText(c.apply({value:e,percent:e*100}))}}if(d.rendered&&!d.isDestroyed){if(a===true||(a!==false&&d.animate)){d.bar.stopAnimation();d.bar.animate(Ext.apply({from:{width:(b*100)+"%"},to:{width:(e*100)+"%"}},d.animate))}else{d.bar.setStyle("width",(e*100)+"%")}}d.fireEvent("update",d,e,f);return d},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(c){var b=this,a;if(!b.waitTimer){a=b;c=c||{};b.updateText(c.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var e=c.increment||10;d-=1;b.updateProgress(((((d+e)%e)+1)*(100/e))*0.01,null,c.animate)},interval:c.interval||1000,duration:c.duration,onStop:function(){if(c.fn){c.fn.apply(c.scope||b)}b.reset()},scope:a})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var b=this,a=b.bar;b.clearTimer();if(b.rendered){if(b.textEl.isComposite){b.textEl.clear()}Ext.destroyMembers(b,"textEl","progressBar");if(a&&b.animate){a.stopAnimation()}}b.callParent()}});Ext.define("Ext.app.EventDomain",{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(h,m,k){var l=this,j=l.bus,n=j[m],e,c,b,d,o,g,f,a;if(!n){return true}for(e in n){if(n.hasOwnProperty(e)&&l.match(h,e,l.controller)){c=n[e];for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d.controller.isActive()){o=d.list;g=o.length;for(f=0;f<g;f++){a=o[f];if(a.fire.apply(a,k)===false){return false}}}}}}}return true},listen:function(d,m){var u=this,l=u.bus,g=u.idProperty,h=u.monitoredClasses,e=h.length,k=m.getId(),t=Ext.$eventNameMap,q,j,r,o,b,c,a,p,n,s,f;for(o in d){n=d[o];if(n){if(g){if(!/^[*#]/.test(o)){Ext.Error.raise("Selectors containing id should begin with #")}o=o==="*"?o:o.substring(1)}for(s in n){b=null;c=n[s];a=m;s=t[s]||(t[s]=s.toLowerCase());p=new Ext.util.Event(m,s);if(Ext.isObject(c)){b=c;c=b.fn;a=b.scope||m;delete b.fn;delete b.scope}if((!b||!b.scope)&&typeof c==="string"){a=null}else{if(typeof c==="string"){c=a[c]}}p.addListener(c,a,b);for(q=0;q<e;++q){f=h[q].hasListeners;if(f){f._incr_(s)}}j=l[s]||(l[s]={});j=j[o]||(j[o]={});r=j[k]||(j[k]={controller:m,list:[]});r.list.push(p)}}}},match:function(c,a){var b=this.idProperty;if(b){return a==="*"||c[b]===a}return false},monitor:function(c){var b=this,a=c.isInstance?c:c.prototype,d=a.doFireEvent;b.monitoredClasses.push(c);a.doFireEvent=function(g,f){var e=d.apply(this,arguments);if(e!==false&&!this.isSuspended(g)){e=b.dispatch(this,g,f)}return e}},unlisten:function(e){var n=this.bus,a=e,s=this.monitoredClasses,l=s.length,d=Ext.$eventNameMap,b,o,r,m,q,f,p,k,h,c,g;if(e.isController){a=e.getId()}for(o in n){o=d[o]||(d[o]=o.toLowerCase());if(n.hasOwnProperty(o)&&(p=n[o])){for(f in p){b=p[f];c=b[a];if(c){r=c.list;if(r){for(k=0,m=r.length;k<m;++k){q=r[k];q.clearListeners();for(h=0;h<l;++h){g=s[h].hasListeners;if(g){g._decr_(q.name)}}}delete b[a]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null}});Ext.define("Ext.app.domain.Component",{extend:Ext.app.EventDomain,singleton:true,type:"component",constructor:function(){var b=this,a=Ext.Component;b.callParent();b.monitor(Ext.Widget);if(!a.prototype.isWidget){b.monitor(a)}},dispatch:function(f,d,c){var b=f.lookupController(false),e,a;while(b){e=b.compDomain;if(e){if(e.dispatch(f,d,c)===false){return false}}a=b.getView();b=a?a.lookupController(true):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}});Ext.define("Ext.app.EventBus",{singleton:true,constructor:function(){var b=this,a=Ext.app.EventDomain.instances;b.callParent();b.domains=a;b.bus=a.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(d,b){var a=this.domains,c;for(c in d){if(d.hasOwnProperty(c)){a[c].listen(d[c],b)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}});Ext.define("Ext.app.domain.Global",{extend:Ext.app.EventDomain,singleton:true,type:"global",listen:function(b,a){b.scope=b.scope||a;Ext.on(b)},match:Ext.returnTrue});Ext.define("Ext.app.BaseController",{mixins:{observable:Ext.util.Observable},isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);delete b.control;delete b.listen;b.eventbus=Ext.app.EventBus;b.initConfig(a)},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){if(a){this.control(a)}},updateListen:function(a){if(a){this.listen(a)}},updateRoutes:function(b){if(b){var e=this,f=e.getBefore()||{},a=Ext.app.route.Router,d,c,g;for(d in b){c=b[d];if(Ext.isString(c)){c={action:c}}g=c.action;if(!c.before){c.before=f[g]}else{if(f[g]){Ext.log.warn('You have a before method configured on a route ("'+d+'") and in the before object property also in the "'+e.self.getName()+'" controller. Will use the before method in the route and disregard the one in the before property.')}}a.connect(d,c,e)}}},isActive:function(){return true},control:function(b,c,a){var d=this,e=a,f;if(Ext.isString(b)){f={};f[b]=c}else{f=b;e=c}d.eventbus.control(f,e||d)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var b=this,a=b.eventbus;Ext.app.route.Router.disconnectAll(b);if(a){a.unlisten(b);b.eventbus=null}b.clearListeners();b.callParent()},redirectTo:function(b,c){if(!c){var a=Ext.util.History.getToken();if(a===b){return false}}else{Ext.app.route.Router.onStateChange(b)}Ext.util.History.add(b);return true}});Ext.define("Ext.app.Util",{},function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(c){var d=Ext.app.namespaces,b,a;if(!Ext.isArray(c)){c=[c]}for(b=0,a=c.length;b<a;b++){d[c[b]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(b){var d=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),a="",c;for(c in d){if(d.hasOwnProperty(c)&&c.length>a.length&&(c+"."===b.substring(0,c.length+1))){a=c}}return a===""?undefined:a}})});Ext.define("Ext.app.domain.Store",{extend:Ext.app.EventDomain,singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(this.idMatchRe.test(b)){a=d.getStoreId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}return a}});Ext.define("Ext.app.route.Queue",{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var a=this.queue,c=a.removeAt(0),b;if(c){b=c&&c.route;b.execute(this.token,c.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else{this.runQueue()}}});Ext.define("Ext.app.route.Route",{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(b){var c=this,a;Ext.apply(c,b,{conditions:{}});a=c.url;c.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);c.paramsInMatchString=a.match(c.paramMatchingRegex)||[];c.matcherRegex=c.createMatcherRegex(a)},recognize:function(c){var d=this,a=d.controller,e,b;if((d.allowInactive||a.isActive())&&d.recognizes(c)){e=d.matchesFor(c);b=c.match(d.matcherRegex);b.shift();return Ext.applyIf(e,{controller:a,action:d.action,historyUrl:c,args:b})}return false},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(c,g,h,d){var b=g.args||[],f=this.before,a=this.controller,e=this.createCallback(g,h,d);if(f){b.push(e);if(Ext.isString(f)){f=this.before=a[f]}if(f){f.apply(a,b)}else{Ext.log.warn("The before action: "+this.before+" was not found on the controller. The action method will not be executed.")}}else{e.resume()}},matchesFor:function(c){var f={},e=this.paramsInMatchString,b=c.match(this.matcherRegex),d=0,a=e.length;b.shift();for(;d<a;d++){f[e[d].replace(":","")]=b[d]}return f},createMatcherRegex:function(a){var c=this.paramsInMatchString,h=this.conditions,d=0,f=c.length,j=Ext.util.Format.format,k=this.caseInsensitive?"i":"",b,g,e;for(;d<f;d++){b=c[d];g=h[b];e=j("{0}",g||"([%a-zA-Z0-9\\-\\_\\s,]+)");a=a.replace(new RegExp(b),e)}return new RegExp("^"+a+"$",k)},createCallback:function(a,d,b){var c=this;b=b||c;return{resume:function(){var e=c.controller,g=c.action,f;if(Ext.isString(g)){g=e[g]}a=a&&a.args?a.args:[];f=a.pop();if(f&&!Ext.isObject(f)){a.push(f)}if(g){c.action=g;g.apply(e,a)}else{Ext.log.warn("The action: "+c.action+" was not found on the controller.")}if(d){d.call(b)}},stop:function(e){if(d){d.call(b,e)}}}}});Ext.define("Ext.util.History",{singleton:true,alternateClassName:"Ext.History",mixins:{observable:Ext.util.Observable},useTopWindow:false,constructor:function(){var a=this;a.hiddenField=null;a.ready=false;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(b){try{this.win.location.hash=b;this.currentToken=b}catch(a){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on("hashchange",a.onHashChange,a)}else{Ext.TaskManager.start({fireIdleEvent:false,run:a.onHashChange,interval:50,scope:a})}a.ready=true;a.fireEvent("ready",a)},onHashChange:function(){var b=this,a=b.getHash();if(a!==b.hash){b.hash=a;b.handleStateChange(a)}},init:function(c,a){var b=this;if(b.ready){Ext.callback(c,a,[b]);return}if(!Ext.isReady){Ext.onReady(function(){b.init(c,a)});return}b.win=b.useTopWindow?window.top:window;b.hash=b.getHash();if(c){b.on("ready",c,a,{single:true})}b.startUp()},add:function(a,b){var c=this,d=false;if(b===false||c.getToken()!==a){c.setHash(a);d=true}return d},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}});Ext.define("Ext.app.route.Router",{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on("change",this.onStateChange,this);this.clear()},onStateChange:function(d){var k=this,c=k.application,m=k.routes,g=m.length,o=k.queueRoutes,j=d.split(k.multipleToken),n=0,b=j.length,e,f,l,h,a;for(;n<b;n++){d=j[n];a=false;if(o){f=new Ext.app.route.Queue({token:d})}for(e=0;e<g;e++){l=m[e];h=l.recognize(d);if(h){a=true;if(o){f.queueAction(l,h)}else{l.execute(d,h)}}}if(o){f.runQueue()}if(!a&&c){c.fireEvent("unmatchedroute",d)}}},connect:function(c,d,a){var b={url:c,action:d,controller:a};if(Ext.isObject(d)){Ext.merge(b,d)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(c){var b=this.routes,a=b.length,e=[],f,d;for(f=0;f<a;++f){d=b[f];if(d.controller!==c){e.push(d)}}this.routes=e},recognize:function(e){var b=this.routes||[],f=0,a=b.length,c,d;for(;f<a;f++){c=b[f];d=c.recognize(e);if(d){return{route:c,args:d}}}return false},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}});Ext.define("Ext.app.Controller",{extend:Ext.app.BaseController,statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(c,a){var d="get",e=c.split("."),f=e.length,b;for(b=0;b<f;b++){d+=Ext.String.capitalize(e[b])}d+=a;return d},processDependencies:function(p,q,c,d,h){if(!h||!h.length){return}var i=this,n=i.strings[d],b,m,l,a,e,f,k,g;if(!Ext.isArray(h)){h=[h]}for(e=0,f=h.length;e<f;e++){a=h[e];b=i.getFullName(a,d,c);m=b.absoluteName;l=b.shortName;q.push(m);k=i.getGetterName(l,n.upper);p[k]=g=i.createGetter(n.getter,a);if(d!=="controller"){g["Ext.app.getter"]=true}}},getFullName:function(c,e,d){var a=c,b,f;if((b=c.indexOf("@"))>0){a=c.substring(0,b);f=c.substring(b+1)+"."+a}else{if(c.indexOf(".")>0&&(Ext.ClassManager.isCreated(c)||this.hasRegisteredPrefix(c))){f=c}else{if(!d){Ext.log.warn("Cannot find namespace for "+e+" "+c+", assuming it is fully qualified class name")}if(d){f=d+"."+e+"."+c;a=c}else{f=c}}}return{absoluteName:f,shortName:a}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(b,c,a){var d=a.onBeforeCreated;a.onBeforeCreated=function(l,g){var f=Ext.app.Controller,j=f.controllerRegex,m=[],k,e,i,h;i=l.prototype;k=Ext.getClassName(l);e=g.$namespace||g.namespace||Ext.app.getNamespace(k)||((h=j.exec(k))&&h[1]);if(e){i.$namespace=e}else{Ext.log.warn("Missing namespace for "+k+", please define it in namespaces property of your Application class.")}f.processDependencies(i,m,e,"model",g.models);f.processDependencies(i,m,e,"view",g.views);f.processDependencies(i,m,e,"store",g.stores);f.processDependencies(i,m,e,"controller",g.controllers);Ext.require(m,Ext.Function.pass(d,arguments,this))}},constructor:function(a){this.callParent(arguments);this.initAutoGetters();this.ensureId()},normalizeRefs:function(b){var c=this,a=[];if(b){if(Ext.isObject(b)){Ext.Object.each(b,function(d,e){if(Ext.isString(e)){e={selector:e}}e.ref=d;a.push(e)})}else{if(Ext.isArray(b)){a=Ext.Array.merge(a,b)}}}b=c.refs;if(b){c.refs=null;b=c.normalizeRefs(b);if(b){a=Ext.Array.merge(a,b)}}return a},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a["Ext.app.getter"]){a.call(this)}}},updateControl:function(a){this.ensureId();this.callParent([a])},updateListen:function(a){this.ensureId();this.callParent([a])},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=true}},finishInit:function(f){var d=this,e=d.controllers,b,c,a;if(d._initialized&&e&&e.length){for(c=0,a=e.length;c<a;c++){b=d.getController(e[c]);b.finishInit(f)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(a){var f=this,b=0,e=a.length,g,d,c;a=Ext.Array.from(a);f.references=f.references||[];for(;b<e;b++){g=a[b];d=g.ref;c="get"+Ext.String.capitalize(d);if(!f[c]){f[c]=Ext.Function.pass(f.getRef,[d,g],f)}f.references.push(d.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,f,a){var c=this,e=c.refCache||(c.refCache={}),b=e[d];f=f||{};a=a||{};Ext.apply(f,a);if(f.forceCreate){return Ext.ComponentManager.create(f,"component")}if(!b){if(f.selector){e[d]=b=Ext.ComponentQuery.query(f.selector)[0]}if(!b&&f.autoCreate){e[d]=b=Ext.ComponentManager.create(f,"component")}if(b){b.on("beforedestroy",function(){e[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.application;if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(c){var a,b;a=(c.indexOf("@")===-1)?c:c.split("@")[0];b=Ext.StoreManager.get(a);if(!b){c=Ext.app.Controller.getFullName(c,"store",this.$namespace);if(c){b=Ext.create(c.absoluteName,{storeId:a})}}return b},getModel:function(c){var b=Ext.app.Controller.getFullName(c,"model",this.$namespace),a=Ext.ClassManager.get(b.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(c)}return a},getView:function(a){var b=Ext.app.Controller.getFullName(a,"view",this.$namespace);return b&&Ext.ClassManager.get(b.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(a,b){var d=this,f=d.application,e,c;if(!b&&f){f.unregister(d)}d.application=null;if(a){e=d.refCache;for(c in e){if(e.hasOwnProperty(c)){Ext.destroy(e[c])}}}d.callParent()}});Ext.define("Ext.form.Labelable",{extend:Ext.Mixin,isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="alert" aria-live="polite" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{id}-inputEl">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel"><div>{fieldLabel}</div></tpl>',"</tpl>",'<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel">{fieldLabel}\n</tpl>',"</tpl>",'<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",topLabelCls:Ext.baseCSSPrefix+"form-item-label-top",rightLabelCls:Ext.baseCSSPrefix+"form-item-label-right",labelInnerCls:Ext.baseCSSPrefix+"form-item-label-inner",topLabelSideErrorCls:Ext.baseCSSPrefix+"form-item-label-top-side-error",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",errorWrapCls:Ext.baseCSSPrefix+"form-error-wrap",errorWrapSideCls:Ext.baseCSSPrefix+"form-error-wrap-side",errorWrapUnderCls:Ext.baseCSSPrefix+"form-error-wrap-under",errorWrapUnderSideLabelCls:Ext.baseCSSPrefix+"form-error-wrap-under-side-label",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",invalidIconCls:Ext.baseCSSPrefix+"form-invalid-icon",invalidUnderCls:Ext.baseCSSPrefix+"form-invalid-under",fieldBodyCls:"",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:"ext-form-error-tip",sticky:true,ui:"form-invalid"};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor="top";a.showDelay=0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}b=this.tip=Ext.create("Ext.tip.QuickTip",a);c=Ext.apply({},b.tagConfig);c.attribute="errorqtip";b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(!a.activeErrorsTpl){if(a.msgTarget=="title"){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else{a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]);a.lastActiveError="";a.enableBubble("errorchange")},trimLabelSeparator:function(){var c=this,d=c.labelSeparator,a=c.fieldLabel||"",b=a.substr(a.length-1);return b===d?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(c){c=c||"";var d=this,e=d.labelSeparator,b=d.labelEl,a=d.errorWrapEl,g=(d.labelAlign!=="top"),f=d.errorWrapUnderSideLabelCls;d.fieldLabel=c;if(d.rendered){if(Ext.isEmpty(c)&&d.hideEmptyLabel){b.setDisplayed("none");if(g&&a){a.removeCls(f)}}else{if(e){c=d.trimLabelSeparator()+e}b.first().setHtml(c);b.setDisplayed("");if(g&&a){a.addCls(f)}}d.updateLayout()}},getInsertionRenderData:function(d,e){var b=e.length,a,c;while(b--){a=e[b];c=this[a];if(c){if(typeof c!="string"){if(!c.isTemplate){c=Ext.XTemplate.getTpl(this,a)}c=c.apply(d)}}d[a]=c||""}return d},getLabelableRenderData:function(){var o=this,r=o.labelAlign,e=(r==="top"),l=(r==="right"),i=(o.msgTarget==="side"),f=(o.msgTarget==="under"),q=o.errorMsgCls,g=o.labelPad,n=o.labelWidth,b=o.labelClsExtra||"",h=i?o.errorWrapSideCls:o.errorWrapUnderCls,a="",k="",d=o.hasVisibleLabel(),m=o.autoFitErrors,j=o.defaultBodyWidth,c,p;if(e){b+=" "+o.topLabelCls;if(g){k="padding-bottom:"+g+"px;"}if(i&&!m){b+=" "+o.topLabelSideErrorCls}}else{if(l){b+=" "+o.rightLabelCls}if(g){a+=o.getHorizontalPaddingStyle()+g+"px;"}a+="width:"+(n+(g?g:0))+"px;";k="width:"+n+"px"}if(d){if(!e&&f){h+=" "+o.errorWrapUnderSideLabelCls}}else{a+="display:none;"}if(j){c="min-width:"+j+"px;max-width:"+j+"px;"}p={id:o.id,inputId:o.getInputId(),labelCls:o.labelCls,labelClsExtra:b,labelStyle:a+(o.labelStyle||""),labelInnerStyle:k,labelInnerCls:o.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:c,baseBodyCls:o.baseBodyCls,fieldBodyCls:o.fieldBodyCls,extraFieldBodyCls:o.extraFieldBodyCls,errorWrapCls:o.errorWrapCls,errorWrapExtraCls:h,renderError:i||f,invalidMsgCls:i?o.invalidIconCls:f?o.invalidUnderCls:"",errorMsgCls:q,growCls:o.grow?o.growCls:"",errorWrapStyle:(i&&!m)?"visibility:hidden":"display:none",fieldLabel:o.getFieldLabel(),labelSeparator:o.labelSeparator};o.getInsertionRenderData(p,o.labelableInsertions);return p},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls(Ext.baseCSSPrefix+a.ownerLayout.type+"-form-item")}},onLabelRender:function(){var d=this,c={},f=Ext.Element,a=d.errorWrapEl,e,b;if(a){a.setVisibilityMode((d.msgTarget==="side"&&!d.autoFitErrors)?f.VISIBILITY:f.DISPLAY)}if(d.extraMargins){e=d.el.getMargin();for(b in e){if(e.hasOwnProperty(b)){c["margin-"+b]=(e[b]+d.extraMargins[b])+"px"}}d.el.setStyle(c)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(g){var e=this,f=e.errorWrapEl,c=e.msgTarget,b=c==="side",i=c==="qtip",a,d,h;g=Ext.Array.from(g);d=e.getTpl("activeErrorsTpl");e.activeErrors=g;a=e.activeError=d.apply({fieldLabel:e.fieldLabel,errors:g,listCls:Ext.plainListCls});e.renderActiveError();if(e.rendered){if(b){e.errorEl.dom.setAttribute("data-errorqtip",a)}else{if(i){e.getActionEl().dom.setAttribute("data-errorqtip",a)}else{if(c==="title"){e.getActionEl().dom.setAttribute("title",a)}}}if(b||i){Ext.form.Labelable.initTip()}if(!e.msgTargets[c]){h=Ext.get(c);if(h){h.dom.innerHTML=a}}}if(f){f.setVisible(g.length>0);if(b&&e.autoFitErrors){e.labelEl.addCls(e.topLabelSideErrorCls)}e.updateLayout()}},unsetActiveError:function(){var c=this,a=c.errorWrapEl,b=c.msgTarget,d;delete c.activeError;delete c.activeErrors;c.renderActiveError();if(c.rendered){if(b==="qtip"){c.getActionEl().dom.removeAttribute("data-errorqtip")}else{if(b==="title"){c.getActionEl().dom.removeAttribute("title")}}if(!c.msgTargets[b]){d=Ext.get(b);if(d){d.dom.innerHTML=""}}if(a){a.hide();if(b==="side"&&c.autoFitErrors){c.labelEl.removeCls(c.topLabelSideErrorCls)}c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.lastActiveError=b;c.fireEvent("errorchange",c,b)}if(c.rendered&&!c.isDestroyed&&!c.preventMark){c.toggleInvalidCls(a);if(c.errorEl){c.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}});Ext.define("Ext.form.field.Field",{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var e=this,d=e.valuePublishEvent,a,c;e.initValue();var f=["tagName","nodeName","children","childNodes"],b=this.name;if(b&&Ext.Array.indexOf(f,b)>-1){Ext.log.warn(['It is recommended to not use "',b,'" as a field name, because it ',"can cause naming collisions during form submission."].join(""))}if(Ext.isString(d)){e.on(d,e.publishValue,e)}else{for(c=0,a=d.length;c<a;++c){e.on(d[c],e.publishValue,e)}}},initValue:function(){var a=this;a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--;a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.valueFrom(b,""))===String(Ext.valueFrom(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(a,b){var c=this,d=null;if(!c.disabled&&(c.submitValue||!b)){d={};d[c.getFieldIdentifier()]=c.getValue()}return d},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var c=this,b,a;if(!c.suspendCheckChange){b=c.getValue();a=c.lastValue;if(!c.isDestroyed&&c.didValueChange(b,a)){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},didValueChange:function(b,a){return !this.isEqual(b,a)},onChange:function(a){var b=this;if(b.validateOnChange){b.validate()}b.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(d){var e=[],c=this.getValidationField(),b=this.getValidation(),a;if(c){a=c.validate(d);if(a!==true){e.push(a)}}if(b&&b!==true){e.push(b)}return e},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){var a=this,b=a.isValid();if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(a,b){if(b){this.validate()}}});Ext.define("Ext.form.field.Base",{extend:Ext.Component,mixins:[Ext.form.Labelable,Ext.form.field.Field],xtype:"field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:true,hasFocus:false,baseCls:Ext.baseCSSPrefix+"field",fieldBodyCls:Ext.baseCSSPrefix+"field-body",maskOnDisable:false,stretchInputElFixed:true,initComponent:function(){var a=this;a.callParent();a.subTplData=a.subTplData||{};a.initLabelable();a.initField();if(!a.name){a.name=a.getInputId()}if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls(Ext.baseCSSPrefix+"form-type-"+a.inputType)},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(b){var d=this,c=d.inputType,a=d.getInputId(),e;e=Ext.apply({ui:d.ui,id:a,cmpId:d.id,name:d.name||a,disabled:d.disabled,readOnly:d.readOnly,value:d.getRawValue(),type:c,fieldCls:d.fieldCls,fieldStyle:d.getFieldStyle(),childElCls:b.childElCls,tabIdx:d.tabIndex,inputCls:d.inputCls,typeCls:Ext.baseCSSPrefix+"form-"+(d.isTextInput?"text":c),role:d.ariaRole},d.subTplData);d.getInsertionRenderData(e,d.subTplInsertions);return e},getSubTplMarkup:function(b){var c=this,d=c.getSubTplData(b),e=c.getTpl("preSubTpl"),f=c.getTpl("postSubTpl"),a="";if(e){a+=e.apply(d)}a+=c.getTpl("fieldSubTpl").apply(d);if(f){a+=f.apply(d)}return a},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,true):a||""},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.valueFrom(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(c){var a=this,b=a.rawValue;if(!a.transformRawValue.$nullFn){c=a.transformRawValue(c)}c=Ext.valueFrom(c,"");if(b===undefined||b!==c){a.rawValue=c;if(a.inputEl){a.bindPropertyChange(false);a.inputEl.dom.value=c;a.bindPropertyChange(true)}if(a.rendered&&a.reference){a.publishState("rawValue",c)}}return c},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;a.callParent();if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=true;if(a.hasActiveError()){a.clearInvalid();a.needsValidateOnEnable=true}}},onEnable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=false;if(a.needsValidateOnEnable){delete a.needsValidateOnEnable;a.forceValidation=true;a.isValid();delete a.forceValidation}}},setReadOnly:function(c){var a=this,b=a.inputEl;c=!!c;a[c?"addCls":"removeCls"](a.readOnlyCls);a.readOnly=c;if(b){b.dom.readOnly=c}else{if(a.rendering){a.setReadOnlyOnBoxReady=true}}a.fireEvent("writeablechange",a,c)},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},initEvents:function(){var g=this,h=g.inputEl,c,f,i=g.checkChangeEvents,j=g.ignoreChangeRe,b=i.length,d,a;if(h){g.mon(h,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",g.fireKey,g);c=new Ext.util.DelayedTask(g.checkChange,g);g.onChangeEvent=f=function(k){if(!(k.type=="propertychange"&&j.test(k.browserEvent.propertyName))){c.delay(g.checkChangeBuffer)}};for(d=0;d<b;d++){a=i[d];if(a==="propertychange"){g.usesPropertychange=true}g.mon(h,a,f)}}g.callParent()},bindPropertyChange:function(c){var b=this,a=b.usesPropertychange;if(a){b[c?"mon":"mun"](b.inputEl,"propertychange",b.onChangeEvent)}},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls);if(a.rendered&&a.reference){a.publishState("dirty",b)}},isValid:function(){var b=this,a=b.disabled,c=b.forceValidation||!a;return c?b.validateValue(b.processRawValue(b.getRawValue())):a},validateValue:function(b){var a=this,d=a.getErrors(b),c=Ext.isEmpty(d);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(d)}}return c},markInvalid:function(d){var b=this,a=b.getActiveError(),c;b.setActiveErrors(Ext.Array.from(d));c=b.getActiveError();if(a!==c){b.setError(c)}},clearInvalid:function(){var b=this,a=b.hasActiveError();delete b.needsValidateOnEnable;b.unsetActiveError();if(a){b.setError("")}},setError:function(a){var c=this,b=c.msgTarget,d;if(c.rendered){if(b=="title"||b=="qtip"){d=b=="qtip"?"data-errorqtip":"title";c.getActionEl().dom.setAttribute(d,a||"")}else{c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.hasActiveError(),a=c.invalidCls+"-field";if(c.inputEl){c.inputEl[b?"addCls":"removeCls"]([a,a+"-"+c.ui])}c.mixins.labelable.renderActiveError.call(c)},privates:{applyBind:function(e,c){var b=this,a=c&&c.value,d;d=b.callParent([e,c]);if(d.value!==a&&b.getInherited().modelValidation){b.updateValueBinding(d)}return d},applyRenderSelectors:function(){var a=this;a.callParent();if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return a.callParent()},updateValueBinding:function(d){var c=this,b=d.value,a=d.$fieldBinding;if(a){a.destroy();d.$fieldBinding=null}if(b&&b.bindValidationField){c.fieldBinding=b.bindValidationField("setValidationField",c)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindPropertyChange(false);this.callParent(arguments);this.bindPropertyChange(true)}}}}});Ext.define("Ext.form.field.Display",{extend:Ext.form.field.Base,alias:"widget.displayfield",alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],ariaRole:"textbox",fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:true,disableFormats:true}],focusable:false,readOnly:true,fieldCls:Ext.baseCSSPrefix+"form-display-field",fieldBodyCls:Ext.baseCSSPrefix+"form-display-field-body",htmlEncode:false,noWrap:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,valueToRaw:function(a){if(!a&&a!==0){return""}else{return a}},isDirty:function(){return false},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(b){var a=this;b=Ext.valueFrom(b,"");a.rawValue=b;if(a.rendered){a.inputEl.dom.innerHTML=a.getDisplayValue();a.updateLayout()}return b},getDisplayValue:function(){var a=this,b=this.getRawValue(),c;if(a.renderer){c=a.renderer.call(a.scope||a,b,a)}else{c=a.htmlEncode?Ext.util.Format.htmlEncode(b):b}return c},getSubTplData:function(b){var a=this.callParent(arguments);a.value=this.getDisplayValue();return a}});Ext.define("Ext.layout.container.Fit",{extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.FitLayout",alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit",manageMargins:true,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b,c){var a=c||this.owner.getSizeModel(),d=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[d]},beginLayoutCycle:function(j,f){var s=this,t=s.lastHeightModel&&s.lastHeightModel.calculated,g=s.lastWidthModel&&s.lastWidthModel.calculated,n=g||t,k=0,l=0,r,b,o,q,e,a,h,m,p,d;s.callParent(arguments);if(n&&j.targetContext.el.dom.tagName.toUpperCase()!="TD"){n=g=t=false}b=j.childItems;e=b.length;for(o=0;o<e;++o){q=b[o];if(f){r=q.target;h=r.minHeight;m=r.minWidth;if(m||h){a=q.marginInfo||q.getMarginInfo();h+=a.height;m+=a.height;if(k<h){k=h}if(l<m){l=m}}}if(n){p=q.el.dom.style;if(t){p.height=""}if(g){p.width=""}}}if(f){j.maxChildMinHeight=k;j.maxChildMinWidth=l}r=j.target;j.overflowX=(!j.widthModel.shrinkWrap&&j.maxChildMinWidth&&r.scrollFlags.x)||d;j.overflowY=(!j.heightModel.shrinkWrap&&j.maxChildMinHeight&&r.scrollFlags.y)||d},calculate:function(f){var n=this,k=f.childItems,d=k.length,c=n.getContainerSize(f),e={length:d,ownerContext:f,targetSize:c},q=f.widthModel.shrinkWrap,l=f.heightModel.shrinkWrap,j=f.overflowX,g=f.overflowY,m,b,o,h,a,p;if(j||g){m=n.getScrollbarsNeeded(j&&c.width,g&&c.height,f.maxChildMinWidth,f.maxChildMinHeight);if(m){b=Ext.getScrollbarSize();if(m&1){c.height-=b.height}if(m&2){c.width-=b.width}}}if(d>0){for(h=0;h<d;++h){e.index=h;n.fitItem(k[h],e)}}else{e.contentWidth=e.contentHeight=0}if(l||q){o=f.targetContext.getPaddingInfo();if(q){if(g&&!c.gotHeight){n.done=false}else{a=e.contentWidth+o.width;if(m&2){a+=b.width}if(!f.setContentWidth(a)){n.done=false}}}if(l){if(j&&!c.gotWidth){n.done=false}else{p=e.contentHeight+o.height;if(m&1){p+=b.height}if(!f.setContentHeight(p)){n.done=false}}}}},fitItem:function(b,c){var a=this;if(b.invalid){a.done=false;return}c.margins=b.getMarginInfo();c.needed=c.got=0;a.fitItemWidth(b,c);a.fitItemHeight(b,c);if(c.got!=c.needed){a.done=false}},fitItemWidth:function(c,d){var a,b;if(d.ownerContext.widthModel.shrinkWrap){b=c.getProp("width")+d.margins.width;a=d.contentWidth;if(a===undefined){d.contentWidth=b}else{d.contentWidth=Math.max(a,b)}}else{if(c.widthModel.calculated){++d.needed;if(d.targetSize.gotWidth){++d.got;this.setItemWidth(c,d)}else{return}}}this.positionItemX(c,d)},fitItemHeight:function(c,d){var b,a;if(d.ownerContext.heightModel.shrinkWrap){a=c.getProp("height")+d.margins.height;b=d.contentHeight;if(b===undefined){d.contentHeight=a}else{d.contentHeight=Math.max(b,a)}}else{if(c.heightModel.calculated){++d.needed;if(d.targetSize.gotHeight){++d.got;this.setItemHeight(c,d)}else{return}}}this.positionItemY(c,d)},positionItemX:function(a,c){var b=c.margins;if(c.index||b.left){a.setProp("x",b.left)}if(b.width){a.setProp("margin-right",b.width)}},positionItemY:function(a,c){var b=c.margins;if(c.index||b.top){a.setProp("y",b.top)}if(b.height){a.setProp("margin-bottom",b.height)}},setItemHeight:function(a,b){a.setHeight(b.targetSize.height-b.margins.height)},setItemWidth:function(a,b){a.setWidth(b.targetSize.width-b.margins.width)}});Ext.define("Ext.panel.Table",{extend:Ext.panel.Panel,alias:"widget.tablepanel",extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null},publishes:["selection"],twoWayBindable:["selection"],autoLoad:false,variableRowHeight:false,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:false,viewType:null,selType:"rowmodel",scroll:true,deferRowRender:false,sortableColumns:true,multiColumnSort:false,enableLocking:false,scrollerOwner:true,enableColumnMove:true,sealedColumns:false,enableColumnResize:true,rowLines:true,bufferedRenderer:true,ownerGrid:null,colLinesCls:Ext.baseCSSPrefix+"grid-with-col-lines",rowLinesCls:Ext.baseCSSPrefix+"grid-with-row-lines",noRowLinesCls:Ext.baseCSSPrefix+"grid-no-row-lines",hiddenHeaderCtCls:Ext.baseCSSPrefix+"grid-header-ct-hidden",hiddenHeaderCls:Ext.baseCSSPrefix+"grid-header-hidden",resizeMarkerCls:Ext.baseCSSPrefix+"grid-resize-marker",emptyCls:Ext.baseCSSPrefix+"grid-empty",focusable:true,tabIndex:0,constructor:function(b){var c=this,a;c.ownerGrid=(b&&b.ownerGrid)||c;c.callParent([b]);a=this.store;a.trackStateChanges=true;if(c.autoLoad){a.unblockLoad();a.load()}},initComponent:function(){if(this.verticalScroller){Ext.Error.raise("The verticalScroller config is not supported.")}if(!this.viewType){Ext.Error.raise("You must specify a viewType config.")}if(this.headers){Ext.Error.raise("The headers config is not supported. Please specify columns instead.")}var f=this,h=f.columns||f.colModel||[],b,e,a,g,c=f.store=Ext.data.StoreManager.lookup(f.store||"ext-empty-store"),d;f.enableLocking=f.enableLocking||f.hasLockedColumns(h);if(f.autoLoad){f.store.blockLoad()}if(f.plugins){f.plugins=f.constructPlugins()}if(f.columnLines){f.addBodyCls(f.colLinesCls)}f.addBodyCls(f.rowLines?f.rowLinesCls:f.noRowLinesCls);f.addBodyCls(f.extraBodyCls);if(f.enableLocking){f.self.mixin("lockable",Ext.grid.locking.Lockable);f.injectLockable()}else{if(h.isRootHeader){f.headerCt=h;f.headerCt.forceFit=!!f.forceFit;f.columnManager=h.columnManager;f.visibleColumnManager=h.visibleColumnManager}else{if(Ext.isArray(h)){h={items:h}}Ext.apply(h,{grid:f,forceFit:f.forceFit,sortable:f.sortableColumns,enableColumnMove:f.enableColumnMove,enableColumnResize:f.enableColumnResize,columnLines:f.columnLines,sealed:f.sealedColumns});if(f.hideHeaders){h.height=0;h.hiddenHeaders=true}if(Ext.isDefined(f.enableColumnHide)){h.enableColumnHide=f.enableColumnHide}f.headerCt=new Ext.grid.header.Container(h)}}f.columns=d=f.headerCt.getGridColumns();f.scrollTask=new Ext.util.DelayedTask(f.syncHorizontalScroll,f);f.cls=(f.cls||"")+(" "+f.extraBaseCls);delete f.autoScroll;g=f.plugins&&Ext.Array.findBy(f.plugins,function(i){return i.isBufferedRenderer});if(g){f.bufferedRenderer=g}if(!f.hasView){if(c.isBufferedStore&&!c.remoteSort){for(e=0,a=d.length;e<a;e++){d[e].sortable=false}}if(f.hideHeaders){f.headerCt.addCls(f.hiddenHeaderCtCls);f.addCls(f.hiddenHeaderCls)}f.relayHeaderCtEvents(f.headerCt);f.features=f.features||[];if(!Ext.isArray(f.features)){f.features=[f.features]}f.dockedItems=[].concat(f.dockedItems||[]);f.dockedItems.unshift(f.headerCt);f.viewConfig=f.viewConfig||{};b=f.getView();f.items=[b];f.hasView=true;if(!f.hideHeaders){b.on({scroll:f.onHorizontalScroll,scope:f,onFrame:!!Ext.global.requestAnimationFrame})}f.bindStore(c,true);f.mon(b,{viewready:f.onViewReady,refresh:f.onRestoreHorzScroll,scope:f})}f.relayEvents(f.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","select","beforedeselect","deselect"]);f.callParent(arguments);f.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var a=this,b=a.bufferedRenderer;if(!a.lockable){if(b&&a.getSizeModel().height.auto){if(b.isBufferedRenderer){Ext.Error.raise("Cannot use buffered rendering with auto height")}a.bufferedRenderer=b=false}if(b&&!b.isBufferedRenderer){b={xclass:"Ext.grid.plugin.BufferedRenderer"};Ext.copyTo(b,a,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer");a.bufferedRenderer=a.addPlugin(b)}}a.callParent(arguments)},initFocusableEvents:function(){var b=this,a=b.getView();b.callParent();b.focusEnterLeaveListeners=a.getFocusEl().on({focusenter:b.onFocusEnter,focusleave:b.onFocusLeave,scope:b,destroyable:true})},onFocus:function(a){this.callParent([a]);this.handleFocusEnter(a)},onFocusEnter:function(a){this.handleFocusEnter(a)},handleFocusEnter:function(c){var f=this,g=f.getView(),a,h=g.getNavigationModel(),i,b,j=g.bufferedRenderer,d;if(!f.containsFocus){i=b=g.getLastFocused();if(!b){a=g.isLockingView?(g.lockedGrid.isVisible()?g.lockedView:g.normalView):g;d=g.dataSource.getAt(j?j.getFirstVisibleRowIndex():0);if(!d.isNonData){b=new Ext.grid.CellContext(a).setPosition({row:d,column:0})}}if(!b){c.stopEvent();c.getTarget().blur();return}h.setPosition(b,null,c,null,!!i);f.containsFocus=!!h.getPosition()}if(f.containsFocus){this.getView().el.dom.setAttribute("tabindex","-1")}},onFocusLeave:function(b){var a=this.getView();if(this.containsFocus){a.getNavigationModel().setPosition(null,null,b,null,true);this.containsFocus=false;a.focusEl=a.el;a.focusEl.dom.setAttribute("tabindex",0)}},hasLockedColumns:function(c){var b,a,d;if(c.isRootHeader){c=c.items.items}else{if(Ext.isObject(c)){c=c.items}}for(b=0,a=c.length;b<a;b++){d=c[b];if(!d.processed&&d.locked){return true}}},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var b=this,c=b.callParent(),a=b.store.getState();c=b.addPropertyToState(c,"columns",b.headerCt.getColumnsState());if(a){c.storeState=a}return c},applyState:function(e){var d=this,f=e.sort,a=e.storeState,b=d.store,c=e.columns;delete e.columns;d.callParent(arguments);if(c){d.headerCt.applyColumnsState(c)}if(f){if(b.remoteSort){b.sort({property:f.property,direction:f.direction,root:f.root},null,false)}else{b.sort(f.property,f.direction)}}else{if(a){b.applyState(a)}}},getStore:function(){return this.store},getView:function(){var b=this,c,a;if(!b.view){c=b.getSelectionModel();a=Ext.apply({grid:b,ownerGrid:b.ownerGrid,deferInitialRefresh:b.deferRowRender,variableRowHeight:b.variableRowHeight,preserveScrollOnRefresh:true,trackOver:b.trackMouseOver!==false,throttledUpdate:b.throttledUpdate===true,scroll:b.scroll,xtype:b.viewType,store:b.store,headerCt:b.headerCt,columnLines:b.columnLines,rowLines:b.rowLines,selModel:c,navigationModel:"grid",features:b.features,panel:b,emptyText:b.emptyText||""},b.viewConfig);if(b.scroll&&b.viewConfig.scroll&&b.scroll!==b.viewConfig.scroll){a.scroll="both"}Ext.widget(a);if(b.view.emptyText){b.view.emptyText='<div class="'+b.emptyCls+'">'+b.view.emptyText+"</div>"}b.view.getComponentLayout().headerCt=b.headerCt;b.mon(b.view,{uievent:b.processEvent,scope:b});c.view=b.view;b.headerCt.view=b.view;if(b.hasListeners.viewcreated){b.fireEvent("viewcreated",b,b.view)}}return b.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,processEvent:function(f,h,i,a,g,d,c,j){var b=d.position.column;if(b){return b.processEvent.apply(b,arguments)}},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){this.saveScrollPos();this.callParent(arguments)},afterExpand:function(){this.callParent(arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){if(this.view.scrollManager){this.view.scrollManager.refresh()}},onHeaderMove:function(e,f,a,b,d){var c=this;if(c.optimizedColumnMove===false){c.view.refreshView()}else{c.view.moveColumn(b,d,a)}c.delayScroll()},onHeaderHide:function(a,b){if(this.view.refreshCounter){this.view.refreshView()}},onHeaderShow:function(a,b){if(this.view.refreshCounter){this.view.refreshView()}},onHeadersChanged:function(b,c){var a=this;if(a.rendered&&!a.reconfiguring){a.view.refreshView();a.delayScroll()}},delayScroll:function(){var a=this.view;if(a){this.scrollTask.delay(10,null,null,[a])}},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var b=this,a=b.scrollXPos;if(a){b.syncHorizontalScroll(b,true)}},getScrollerOwner:function(){var a=this;if(!this.scrollerOwner){a=this.up("[scrollerOwner]")}return a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},true))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){var c=this,a=c.selModel,e,d,b;if(!a){a={};e=true}if(!a.events){b=a.selType||c.selType;e=!a.mode;a=c.selModel=Ext.create("selection."+b,a)}if(c.simpleSelect){d="SIMPLE"}else{if(c.multiSelect){d="MULTI"}}Ext.applyIf(a,{allowDeselect:c.allowDeselect});if(d&&e){a.setSelectionMode(d)}if(!a.hasRelaySetup){c.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect"]);a.hasRelaySetup=true;if(a.isRowModel){a.on("selectionchange",c.updateBindSelection,c)}}if(c.disableSelection){a.locked=true}return a},getScrollTarget:function(){var a=this.getScrollerOwner(),b=a.query("tableview");return b[1]||b[0]},onHorizontalScroll:function(a){this.syncHorizontalScroll(a)},syncHorizontalScroll:function(e,c){var d=this,a=d.view.getScrollX(),b;c=c===true;if(d.rendered&&(c||a!==d.scrollXPos)){if(c){b=d.getScrollTarget();b.setScrollX(a)}d.headerCt.setScrollX(a);d.scrollXPos=a}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,c){var d=this,a=d.getView(),e=d.bufferedRenderer;if(b){d.store=b;if(e&&e.isBufferedRenderer&&e.store){e.bindStore(b)}if(a.store!==b){a.bindStore(b,false)}d.mon(b,{load:d.onStoreLoad,scope:d});d.storeRelayers=d.relayEvents(b,["filterchange","groupchange"])}else{d.unbindStore()}},unbindStore:function(){var c=this,b=c.store,a;if(b){c.store=null;c.mun(b,{load:c.onStoreLoad,scope:c});Ext.destroy(c.storeRelayers);a=c.view;if(a.store){a.bindStore(null)}}},setColumns:function(a){if(a.length||this.getColumnManager().getColumns().length){this.reconfigure(undefined,a)}},setStore:function(a){this.reconfigure(a)},reconfigure:function(a,c){var d=this,f=d.store,e=d.headerCt,b=e?e.items.getRange():d.columns;if(arguments.length===1&&Ext.isArray(a)){c=a;a=null}if(c){c=Ext.Array.slice(c)}d.reconfiguring=true;d.fireEvent("beforereconfigure",d,a,c,f,b);if(d.lockable){d.reconfigureLockable(a,c)}else{Ext.suspendLayouts();if(c){delete d.scrollXPos;e.removeAll();e.add(c)}if(a&&(a=Ext.StoreManager.lookup(a))!==f){d.unbindStore();d.bindStore(a)}else{d.getView().refreshView()}Ext.resumeLayouts(true)}d.fireEvent("reconfigure",d,a,c,f,b);delete d.reconfiguring},beforeDestroy:function(){var a=this.scrollTask;if(a){a.cancel();this.scrollTask=null}Ext.destroy(this.focusEnterLeaveListeners);this.callParent()},onDestroy:function(){var a=this;if(a.lockable){a.destroyLockable()}a.unbindStore();a.callParent();a.columns=a.storeRelayers=a.columnManager=a.visibleColumnManager=null},destroy:function(){var a=this;a.callParent();if(a.isDestroyed){a.view=a.selModel=a.headerCt=null}},privates:{getFocusEl:function(){return this.getView().getFocusEl()}}});Ext.define("Ext.selection.Model",{extend:Ext.util.Observable,alternateClassName:"Ext.AbstractSelectionModel",mixins:[Ext.util.StoreHolder],allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.modes={SINGLE:true,SIMPLE:true,MULTI:true};b.setSelectionMode(a.mode||b.mode);b.selected=new Ext.util.MixedCollection();b.callParent(arguments)},bindStore:function(a,b){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);if(c.store&&!b){c.refresh()}},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(b){var e=this,d=e.store.getRange(),c=0,a=d.length,f=e.getSelection().length;e.suspendChanges();for(;c<a;c++){e.doSelect(d[c],true,b)}e.resumeChanges();if(!b){e.maybeFireSelectionChange(e.getSelection().length!==f)}},deselectAll:function(j){var f=this,b=f.getSelection(),g={},h=f.store,a=b.length,e,c,d;for(e=0,c=b.length;e<c;e++){d=b[e];g[d.id]=h.indexOf(d)}b=Ext.Array.sort(b,function(l,i){var m=g[l.id],k=g[i.id];return m<k?-1:1});f.suspendChanges();f.doDeselect(b,j);f.resumeChanges();if(!j){f.maybeFireSelectionChange(f.getSelection().length!==a)}},getSelectionStart:function(){var c=this,b=c.view,a;if(!c.selectionStart&&b&&b.rendered){a=b.getNavigationModel();if(a){c.setSelectionStart(a.getRecord())}}return c.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(j,l){var m=this,d=m.isSelected(j),f=l.shiftKey,a=l.ctrlKey,c=f?(m.getSelectionStart()):null,g=m.getSelection(),k=g.length,n=m.allowDeselect,b,h,o;switch(m.selectionMode){case"MULTI":if(f&&c){m.selectRange(c,j,a)}else{if(a&&d){m.doDeselect(j,false)}else{if(a){m.doSelect(j,true,false)}else{if(d&&!f&&!a&&k>1){b=[];for(h=0;h<k;++h){o=g[h];if(o!==j){b.push(o)}}m.doDeselect(b)}else{if(!d){m.doSelect(j,false)}}}}}break;case"SIMPLE":if(d){m.doDeselect(j)}else{m.doSelect(j,true)}break;case"SINGLE":if(n&&!a){n=m.toggleOnClick}if(n&&d){m.doDeselect(j)}else{m.doSelect(j,false)}break}if(!f){if(m.isSelected(j)){m.selectionStart=j}else{m.selectionStart=null}}},vetoSelection:function(a){if(a.type!=="keydown"&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return true}}else{return a.type==="mousedown"}},onNavigate:function(g){var i=this,h=g.keyEvent,b=h.ctrlKey,d=g.recordIndex,f=g.record,m=g.previousRecord,c=i.isSelected(f),k=(i.selectionStart&&i.isSelected(g.previousRecord))?i.selectionStart:(i.selectionStart=g.previousRecord),a=g.previousRecordIndex,l=h.getCharCode(),n=l===h.SPACE,j=l===h.UP||l===h.PAGE_UP?"up":(l===h.DOWN||l===h.DOWN?"down":null);if(!f||i.vetoSelection(h)){return}switch(i.selectionMode){case"MULTI":if(l===h.A&&b){i.selectRange(0,i.store.getCount()-1)}else{if(n){if(h.shiftKey){i.selectRange(k,f,b)}else{if(c){i.doDeselect(f,b)}else{i.doSelect(f,b)}}}else{if(h.shiftKey&&k){if(j==="up"&&a<=d){i.deselectRange(m,d+1)}else{if(j==="down"&&a>=d){i.deselectRange(m,d-1)}else{if(k!==f){i.selectRange(k,f,b)}}}i.lastSelected=f}else{if(l){if(!b){i.doSelect(f,false)}}else{i.selectWithEvent(f,h)}}}}break;case"SIMPLE":if(c){i.doDeselect(f)}else{i.doSelect(f,true)}break;case"SINGLE":if(n){if(c){if(i.allowDeselect){i.doDeselect(f)}}else{i.doSelect(f)}}else{if(b){break}else{if(n&&i.allowDeselect&&c){i.doDeselect(f)}else{i.doSelect(f,false)}}}break}if(!h.shiftKey){if(i.isSelected(f)){i.selectionStart=f}}},selectRange:function(l,d,m){var h=this,k=h.store,c=h.selected.items,n,f,g,e,a,j,b;if(h.isLocked()){return}n=h.normalizeRowRange(l,d);l=n[0];d=n[1];e=[];for(f=l;f<=d;f++){if(!h.isSelected(k.getAt(f))){e.push(k.getAt(f))}}if(!m){a=[];h.suspendChanges();for(f=0,g=c.length;f<g;++f){b=c[f];j=k.indexOf(b);if(j<l||j>d){a.push(b)}}for(f=0,g=a.length;f<g;++f){h.doDeselect(a[f])}h.resumeChanges()}if(e.length){h.doMultiSelect(e,true)}else{h.maybeFireSelectionChange(a.length>0)}},deselectRange:function(e,d){var h=this,c=h.store,a,g,f,b;if(h.isLocked()){return}a=h.normalizeRowRange(e,d);e=a[0];d=a[1];f=[];for(g=e;g<=d;g++){b=c.getAt(g);if(h.isSelected(b)){f.push(b)}}if(f.length){h.doDeselect(f)}},normalizeRowRange:function(c,b){var a=this.store,d;if(!Ext.isNumber(c)){c=a.indexOf(c)}c=Math.max(0,c);if(!Ext.isNumber(b)){b=a.indexOf(b)}b=Math.min(b,a.getCount()-1);if(c>b){d=b;b=c;c=d}return[c,b]},select:function(b,c,a){if(Ext.isDefined(b)&&!(Ext.isArray(b)&&!b.length)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,e,b){var d=this,a;if(d.locked||!d.store){return}if(typeof c==="number"){a=d.store.getAt(c);if(!a){return}c=[a]}if(d.selectionMode==="SINGLE"&&c){a=c.length?c[0]:c;d.doSingleSelect(a,b)}else{d.doMultiSelect(c,e,b)}},doMultiSelect:function(a,m,k){var g=this,b=g.selected,j=false,n,d,f,e,c,h=g.view,l;if(g.locked){return}a=!Ext.isArray(a)?[a]:a;f=a.length;if(!m&&b.getCount()>0){n=g.deselectDuringSelect(a,b.getRange(),k);if(n[0]){g.maybeFireSelectionChange(n[1]>0&&!k);return}else{j=n[1]>0}}c=function(){b.add(e);j=true};for(d=0;d<f;d++){e=a[d];if(g.isSelected(e)){continue}g.onSelectChange(e,true,k,c)}g.lastSelected=e;if(h&&h.rendered&&!k&&!g.preventFocus){l=h.getNavigationModel();if(l){l.setPosition(e,null,null,k,true)}}g.maybeFireSelectionChange(j&&!k)},deselectDuringSelect:function(d,a,h){var g=this,f=a.length,c=0,e=false,j,b;g.suspendChanges();for(b=0;b<f;++b){j=a[b];if(!Ext.Array.contains(d,j)){if(g.doDeselect(j,h)){++c}else{e=true}}}g.resumeChanges();return[e,c]},doDeselect:function(a,j){var h=this,b=h.selected,d=0,g,e,k=0,f=0,c;if(h.locked||!h.store){return false}if(typeof a==="number"){e=h.store.getAt(a);if(!e){return false}a=[e]}else{if(!Ext.isArray(a)){a=[a]}}c=function(){++f;b.remove(e)};g=a.length;h.suspendChanges();for(;d<g;d++){e=a[d];if(h.isSelected(e)){if(h.lastSelected===e){h.lastSelected=b.last()}++k;h.onSelectChange(e,false,j,c)}}h.resumeChanges();h.maybeFireSelectionChange(f>0&&!j);return f===k},doSingleSelect:function(c,d){var f=this,b=f.view,a,h=false,e=f.selected,g;if(f.locked){return}if(f.isSelected(c)){return}g=function(){if(e.getCount()){f.suspendChanges();if(!f.doDeselect(f.lastSelected,d)){f.resumeChanges();return false}f.resumeChanges()}e.add(c);f.lastSelected=c;h=true};f.onSelectChange(c,true,d,g);if(h){if(b&&b.rendered&&!d&&!f.preventFocus){a=b.getNavigationModel();if(a){a.setPosition(c,null,null,d,true)}}f.maybeFireSelectionChange(!d)}},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.suspendChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(d,c){var f=this,b=f.store,e,a;a=f.normalizeRowRange(d,c);d=a[0];c=a[1];for(e=d;e<=c;e++){if(!f.isSelected(b.getAt(e))){return false}}return true},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){return this.selected.getCount()>0},pruneIf:function(){var g=this,e=g.selected,b=g.store,d=[],a=e.length,c,f;if(g.pruneRemoved){for(c=0;c<a;c++){f=e.getAt(c);if(b.indexOfId(f.id)===-1){d.push(f)}}if(d.length){for(c=0,a=d.length;c<a;c++){f=d[c];e.remove(f);g.onPrune(f)}g.maybeFireSelectionChange(true)}}},onPrune:Ext.emptyFn,refresh:function(){var g=this,k=g.store,a,d=[],f=[],c=g.getSelection(),e=c.length,j,h,b=0;if(!k){return}for(;b<e;b++){j=c[b];if(k.indexOf(j)!==-1){d.push(j)}else{if(!g.pruneRemoved){a=k.getById(j.getId());if(a){d.push(a)}else{f.push(j)}}}if(g.mode==="SINGLE"&&f.length){break}}if(g.selected.getCount()!==(d.length+f.length)){h=true}g.clearSelections();if(d.length){g.doSelect(d,false,true)}if(f.length){g.selected.addAll(f);if(!g.lastSelected){g.lastSelected=f[f.length-1]}}g.maybeFireSelectionChange(h)},clearSelections:function(){this.selected.clear();this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(this.selected.getCount()>0){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(c,b,d,a){var e=this;if(e.selectionStart&&Ext.Array.contains(b,e.selectionStart)){e.selectionStart=null}if(a||e.locked||!e.pruneRemoved){return}e.deselect(b)},deselectDeletedRecords:function(b){var f=this,d=f.selected,c,e=b.length,g=0,a;for(c=0;c<e;c++){a=b[c];if(d.remove(a)){if(f.lastSelected===a){f.lastSelected=null}++g}}if(g){f.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){this.clearListeners();this.clearSelections();this.bindStore(null)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(a,d,c,b){this.selected.updateKey(c,b)},onStoreRefresh:function(){var f=this,h=f.getStore(),c=f.selected,g=f.lastSelected,e,a,d,j,b;if(f.store.isBufferedStore){return}e=c.items;a=e.length;if(g){f.lastSelected=h.getById(g.id)}for(d=0;d<a;++d){j=e[d];b=h.getById(j.id);if(b){f.selected.replace(b)}else{f.selected.remove(j)}}},onStoreLoad:Ext.emptyFn,onSelectChange:function(a,d,c,f){var e=this,b=d?"select":"deselect";if((c||e.fireEvent("before"+b,e,a))!==false&&f()!==false){if(!c){e.fireEvent(b,e,a)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){this.views=this.views||[];this.views.push(a)},resolveListenerScope:function(c){var a=this.view,b;if(a){b=a.resolveListenerScope(c)}return b||this.callParent([c])},onVetoUIEvent:Ext.emptyFn,bindComponent:Ext.emptyFn});Ext.define("Ext.selection.DataViewModel",{extend:Ext.selection.Model,deselectOnContainerClick:true,enableKeyNav:true,bindComponent:function(a){var b=this;b.view=a;b.navigationModel=a.getNavigationModel();a.on(b.getViewListeners());b.navigationModel.on({navigate:b.onNavigate,scope:b})},getViewListeners:function(){var b=this,a=b.view,c={refresh:b.refresh,scope:b};c[a.triggerCtEvent]=b.onContainerClick;return c},onUpdate:function(b){var a=this.view;if(a&&this.isSelected(b)){a.onItemSelect(b)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,e,d,g){var f=this,a=f.view,c=e?"select":"deselect";if((d||f.fireEvent("before"+c,f,b))!==false&&g()!==false){if(a){if(e){a.onItemSelect(b)}else{a.onItemDeselect(b)}}if(!d){f.fireEvent(c,f,b)}}},destroy:function(){Ext.destroy(this.keyNav);this.callParent()}});Ext.define("Ext.view.NavigationModel",{mixins:[Ext.util.Observable,Ext.mixin.Factoryable],alias:"view.navigation.default",focusCls:Ext.baseCSSPrefix+"view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){this.view=a;this.bindView(a)},bindView:function(a){var c=this,b;c.initKeyNav(a);b=c.getStoreListeners();b.destroyable=true;c.dataSourceListeners=a.dataSource.on(b);b=c.getViewListeners();b.destroyable=true;c.viewListeners=a.on(b)},getStoreListeners:function(){var a=this;return{clear:a.onStoreClear,remove:a.onStoreRemove,scope:a}},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,refresh:a.onViewRefresh,scope:a}},initKeyNav:function(a){var b=this;b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",processEvent:function(d,c,g,e,f){return f},up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(a,b){b.preventDefault()},onItemMouseDown:function(b,a,f,d,c){var e=c.parentEvent;if(!e||e.type!=="touchstart"){this.setPosition(d)}},onItemClick:function(c,b,e,d,a){if(this.record===b){this.fireNavigateEvent(a)}else{this.setPosition(d,a)}},onStoreClear:function(){this.setPosition()},onStoreRemove:function(){this.setPosition(this.getRecord())},onViewRefresh:function(){this.setPosition(this.getRecord())},setPosition:function(c,f,j,g){var h=this,i=h.view,d=i.getSelectionModel(),a=i.dataSource,e,b;if(c==null){h.record=h.recordIndex=null}else{if(typeof c==="number"){b=Math.max(Math.min(c,a.getCount()-1),0);e=a.getAt(c)}else{if(c.isEntity){e=c;b=a.indexOf(c)}else{if(c.tagName){e=i.getRecord(c);b=a.indexOf(e)}else{e=b=null}}}}if(b===h.recordIndex){return}if(h.item){h.item.removeCls(h.focusCls)}h.previousRecordIndex=h.recordIndex;h.previousRecord=h.record;h.previousItem=h.item;h.recordIndex=b;h.record=e;if(e){h.focusPosition(h.recordIndex)}else{h.item=null}if(!j){d.fireEvent("focuschange",d,h.previousRecord,h.record)}if(!g&&f&&h.record!==h.previousRecord){h.fireNavigateEvent(f)}},focusPosition:function(a){var b=this;if(a!=null&&a!==-1){if(a.isEntity){a=b.view.dataSource.indexOf(a)}b.item=b.view.all.item(a);if(b.item){b.lastFocused=b.record;b.focusItem(b.item)}else{b.record=null}}else{b.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeyTab:Ext.returnTrue,onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){Ext.destroy(this.dataSourceListeners,this.viewListeners)}});Ext.define("Ext.view.AbstractView",{extend:Ext.Component,mixins:[Ext.util.StoreHolder],inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.boundView)}},defaultBindProperty:"store",statics:{updateDelay:200,queueRecordChange:function(m,o,g,b,c){var l=this,a=l.changeQueue||(l.changeQueue={}),h=g.internalId,k,f,j,d,p,n,e;k=a[h]||(a[h]={operation:b,record:g,data:{},views:[]});f=k.data;Ext.Array.include(k.views,m);if(c&&(j=c.length)){for(d=0;d<j;d++){p=c[d];n=g.data[p];if(f.hasOwnProperty(p)){if(g.isEqual(f[p],n)){delete f[p];e=true}}else{f[p]=n}}if(e&&!Ext.Object.getKeys(f).length){delete a[h]}}else{Ext.apply(f,g.data)}if(!l.flushQueueTask){l.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(l.onFlushTick,l):Ext.Function.bind(l.onFlushTick,l),interval:Ext.view.AbstractView.updateDelay,repeat:1})}l.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var e=this,f,a,h,d,g,c,b;if(Ext.isScrolling){e.flushQueueTask.start();return}h=e.changeQueue;this.changeQueue={};for(g in h){d=h[g];f=d.views;a=f.length;for(c=0;c<a;c++){b=f[c];if(!b.isDestroyed){b.handleUpdate(b.dataSource,d.record,d.operation,Ext.Object.getKeys(d.data))}}}Ext.AnimationQueue.stop(e.flushChangeQueue,e)}},config:{selection:null,navigationModel:"default"},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,addCmpEvents:Ext.emptyFn,initComponent:function(){var c=this,a=Ext.isDefined,d=c.itemTpl,b={};if(d){if(Ext.isArray(d)){d=d.join("")}else{if(Ext.isObject(d)){b=Ext.apply(b,d.initialConfig);d=d.html}}if(!c.itemSelector){c.itemSelector="."+c.itemCls}d=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',c.itemCls,d,c.itemAriaRole);c.tpl=new Ext.XTemplate(d,b)}if(!a(c.tpl)||!a(c.itemSelector)){Ext.Error.raise({sourceClass:"Ext.view.View",tpl:c.tpl,itemSelector:c.itemSelector,msg:"DataView requires both tpl and itemSelector configurations to be defined."})}c.callParent();c.tpl=c.getTpl("tpl");if(a(c.overCls)||a(c.overClass)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.view.View: Using the deprecated overCls or overClass configuration. Use overItemCls instead.")}c.overItemCls=c.overCls||c.overClass;delete c.overCls;delete c.overClass}if(a(c.selectedCls)||a(c.selectedClass)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.view.View: Using the deprecated selectedCls or selectedClass configuration. Use selectedItemCls instead.")}c.selectedItemCls=c.selectedCls||c.selectedClass;delete c.selectedCls;delete c.selectedClass}if(c.overItemCls){c.trackOver=true}c.addCmpEvents();c.store=Ext.data.StoreManager.lookup(c.store||"ext-empty-store");if(!c.dataSource){c.dataSource=c.store}c.bindStore(c.dataSource,true,"dataSource");if(!c.all){c.all=new Ext.CompositeElementLite()}c.scrollState={top:0,left:0};c.on({scroll:c.onViewScroll,element:"el",onFrame:!!Ext.global.requestAnimationFrame,scope:c});c.savedTabIndexAttribute="data-savedtabindex-"+c.id;this.getNavigationModel().bindComponent(this);this.getSelectionModel().bindComponent(this)},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var e=this,b=e.loadMask,d=e.getMaskStore(),a={target:e,msg:e.loadingText,useMsg:e.loadingUseMsg,store:d},c;e.callParent(arguments);if(b){c=d.getProxy();if(c&&!c.isSynchronous){if(e.loadingCls){a.msgCls=e.loadingCls}if(Ext.isObject(b)){a=Ext.apply(a,b)}e.loadMask=new Ext.LoadMask(a);e.loadMask.on({scope:e,beforeshow:e.onMaskBeforeShow,hide:e.onMaskHide})}}},beforeLayout:function(){var a=this;a.callParent(arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else{a.doFirstRefresh(a.dataSource)}}},getMaskStore:function(){return this.store},onMaskBeforeShow:function(){var b=this,a=b.loadingHeight;if(a&&a>b.getHeight()){b.hasLoadingHeight=true;b.oldMinHeight=b.minHeight;b.minHeight=a;b.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){this.callParent(arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent(arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var b=this.loadMask,a=[];if(b&&b.isComponent){a.push(b)}return a},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},getSelectionModel:function(){var b=this,c="SINGLE",a=b.selModel;if(b.simpleSelect){c="SIMPLE"}else{if(b.multiSelect){c="MULTI"}}if(!a||!a.events){a=b.selModel=new Ext.selection.DataViewModel(Ext.apply({allowDeselect:b.allowDeselect,mode:c},a))}if(!a.hasRelaySetup){b.relayEvents(a,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);a.hasRelaySetup=true;a.on("selectionchange",b.updateBindSelection,b)}if(b.disableSelection){a.locked=true}return a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},initFocusableEvents:function(){var a=this;this.mixins.focusable.initFocusableEvents.call(this);a.focusEnterLeaveListeners=a.el.on({focusenter:a.onFocusEnter,focusleave:a.onFocusLeave,scope:a,destroyable:true})},onFocus:function(a){this.callParent([a]);this.handleFocusEnter(a)},onFocusEnter:function(a){this.handleFocusEnter(a)},handleFocusEnter:function(d){var c=this,b=c.getNavigationModel(),a;if(!c.containsFocus){a=b.getLastFocused();b.setPosition(a||0,d,null,!a);c.containsFocus=b.getPosition()!=null}if(c.containsFocus){this.focusEl.dom.setAttribute("tabindex","-1")}},onFocusLeave:function(b){var a=this;if(a.containsFocus){a.getNavigationModel().setPosition(null,b,null,true);a.containsFocus=false;a.focusEl.dom.setAttribute("tabindex",0)}},onRemoved:function(a){this.callParent([a]);this.onFocusLeave()},refresh:function(){var h=this,k=h.all,a=k.getCount(),e=h.refreshCounter,i,f,d,c,g,j=e&&k.getCount()&&h.preserveScrollOnRefresh&&!h.bufferedRenderer,b;if(!h.rendered||h.isDestroyed||h.preventRefresh){return}if(!h.hasListeners.beforerefresh||h.fireEvent("beforerefresh",h)!==false){h.refreshing=true;i=h.getTargetEl();c=h.getViewRange();d=i.dom;if(j){f=h.getOverflowEl();b=f.getScroll()}if(e){g=true;h.clearViewEl();h.refreshCounter++}else{h.refreshCounter=1}h.tpl.append(i,h.collectData(c,k.startIndex||0));if(c.length<1){if(h.emptyText&&!h.getStore().isLoading()&&(!h.deferEmptyText||g)){h.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",i.dom,h.emptyText)}k.clear()}else{h.collectNodes(i.dom);h.updateIndexes(0)}Ext.deferCallback(i.saveChildrenTabbableState,i,[h.savedTabIndexAttribute]);if(g){if(h.refreshSelmodelOnRefresh!==false){h.selModel.refresh()}else{if(!h.preventPrune){h.selModel.pruneIf()}}}h.refreshNeeded=false;h.refreshSize(k.getCount()!==a);h.fireEvent("refresh",h,c);if(j){f.setScrollLeft(b.left);f.setScrollTop(b.top)}if(!h.viewReady){h.viewReady=true;h.fireEvent("viewready",h)}h.refreshing=false;h.refreshScroll()}},collectNodes:function(b){var a=this.all;a.fill(Ext.fly(b).query(this.getItemSelector()),a.startIndex||0);if(this.focusable){a.set({tabindex:"-1"})}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var b=this,a=b.getSizeModel(),c=b.scrollManager;if(a.height.shrinkWrap||a.width.shrinkWrap||d){b.updateLayout()}else{if(b.touchScroll&&!b.bufferedRenderer){if(c){c.refresh()}else{b.on({boxready:b.refreshScroll,scope:b,single:true})}}}},onResize:function(){var a=this,b=a.scrollManager;if(b&&!a._hasScrollListener){b.on({scroll:a.onViewScroll,scope:a,onFrame:!!Ext.global.requestAnimationFrame});a._hasScrollListener=true}this.callParent(arguments)},clearViewEl:function(){var b=this,c=b.getTargetEl(),a=b.getNodeContainer()===c;b.clearEmptyEl();b.all.clear(!a);if(a){c.dom.innerHTML=""}},clearEmptyEl:function(){var a=this.emptyEl;if(a){a.parentNode.removeChild(a)}this.emptyEl=null},onViewScroll:function(){this.fireEvent("scroll",this)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(e,d,c){var b,a,f;if(c){b=c.getAssociatedData();for(a in b){if(b.hasOwnProperty(a)){if(!f){e=Ext.Object.chain(e);f=true}e[a]=b[a]}}}return e},collectData:function(c,f){var e=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];e[d]=this.prepareData(b.data,f+d,b)}return e},bufferRender:function(a,b){var c=this,d=c.renderBuffer||(c.self.prototype.renderBuffer=document.createElement("div"));c.tpl.overwrite(d,c.collectData(a,b));return Ext.fly(d).query(c.getItemSelector())},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,true):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(d,b,c,g,e){var f=this,a=e&&e.filtered;if(!a&&f.getNode(b)){if(f.throttledUpdate){f.statics().queueRecordChange(f,d,b,c,g)}else{f.handleUpdate.apply(f,arguments)}}},handleUpdate:function(b,a){var e=this,c,d;if(e.viewReady){c=e.dataSource.indexOf(a);if(c>-1){if(e.getNode(a)){d=e.bufferRender([a],c)[0];e.all.replaceElement(c,d,true);e.updateIndexes(c,c);e.selModel.onUpdate(a);e.refreshSizePending=true;if(e.selModel.isSelected(a)){e.onItemSelect(a)}if(e.hasListeners.itemupdate){e.fireEvent("itemupdate",a,c,d)}return d}}}},onReplace:function(h,k,b,c){var g=this,f,m=g.all,a,l,e,d;if(g.rendered){a=g.bufferRender(c,k,true);l=m.item(k);if(l){m.item(k).insertSibling(a,"before",true)}else{g.appendNodes(a)}m.insert(k,a);k+=c.length;f=k+b.length-1;m.removeRange(k,f,true);if(g.refreshSelmodelOnRefresh!==false){g.selModel.refresh()}g.updateIndexes(k);g.refreshSizePending=true;if(g.hasListeners.itemremove){for(e=b.length,d=f;e>=0;--e,--d){g.fireEvent("itemremove",b[e],d,g)}}if(g.hasListeners.itemadd){g.fireEvent("itemadd",c,k,a)}}},onAdd:function(c,b,d){var e=this,a;if(e.rendered){if(e.all.getCount()===0){e.refresh();a=e.all.slice()}else{a=e.doAdd(b,d);if(e.refreshSelmodelOnRefresh!==false){e.selModel.refresh()}e.updateIndexes(d);e.refreshSizePending=true}if(e.hasListeners.itemadd){e.fireEvent("itemadd",b,d,a)}}},appendNodes:function(b){var c=document.createDocumentFragment(),a=b.length,d;for(d=0;d<a;++d){c.appendChild(b[d])}this.getNodeContainer().appendChild(c)},doAdd:function(c,d){var h=this,b=h.bufferRender(c,d,true),f=h.all,g=f.getCount(),e=f.startIndex||0,a=f.endIndex||g-1;if(g===0||d>a){h.appendNodes(b)}else{if(d<=e){f.item(e).insertSibling(b,"before",true)}else{f.item(d).insertSibling(b,"before",true)}}f.insert(d,b);return b},onRemove:function(b,e,h){var j=this,l=j.all,c=j.hasListeners.itemremove,k,f,g,a,d;if(l.getCount()){if(j.dataSource.getCount()===0){if(c){j.fireEvent("itemremove",e,h,j.getNodes(h,h+e.length-1))}j.preventPrune=true;j.refresh();j.preventPrune=false}else{if(c){a=[]}for(f=e.length-1;f>=0;--f){g=e[f];k=h+f;if(a){d=l.item(k);a[f]=d?d.dom:undefined}if(l.item(k)){j.doRemove(g,k)}}if(c){j.fireEvent("itemremove",e,h,a,j)}j.updateIndexes(h)}j.refreshSizePending=true}},doRemove:function(a,b){this.all.removeElement(b,true)},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(e,d){var b=this.all.elements,a=this.getViewRange(),c;e=e||0;d=d||((d===0)?0:(b.length-1));for(c=e;c<=d;c++){b[c].viewIndex=c;b[c].viewRecordId=a[c].internalId;if(!b[c].boundView){b[c].boundView=this.id}}},bindStore:function(a,b,d){var c=this;c.mixins.storeholder.bindStore.apply(c,arguments);if(c.componentLayoutCounter&&!c.preventRefresh){c.doFirstRefresh(a,!b)}},doFirstRefresh:function(a,c){var b=this;if(b.deferInitialRefresh&&!c){Ext.defer(b.doFirstRefresh,1,b,[a,true])}else{if(a&&!a.loading){b.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null)},onBindStore:function(a,b,d){var c=this;c.getSelectionModel().bindStore(a);c.setMaskBind(a);if(!b&&d==="store"){c.preventRefresh=true;c.store=a;c.bindStore(a,false,"dataSource");c.preventRefresh=false}},setMaskBind:function(b){var a=this.loadMask;if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.refresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:Ext.emptyFn,onEndUpdate:function(){if(this.refreshSizePending){this.refreshSize(true);this.refreshSizePending=false}},onDataRefresh:function(){this.refreshView()},refreshView:function(){var b=this,a=b.blockRefresh||!b.rendered||b.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(a){b.refreshNeeded=true}else{if(b.bufferedRenderer&&b.all.getCount()){b.bufferedRenderer.refreshView()}else{b.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.selModel.getSelection(),d=a.length,c=0;for(;c<d;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],d=0,a=c.length,e=this.dataSource.data;for(;d<a;d++){b[b.length]=e.getByKey(c[d].viewRecordId)}return b},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).viewRecordId)},isSelected:function(b){var a=this.getRecord(b);return this.selModel.isSelected(a)},select:function(b,c,a){this.selModel.select(b,c,a)},deselect:function(b,a){this.selModel.deselect(b,a)},getNode:function(a){if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return document.getElementById(a)}if(Ext.isNumber(a)){return this.all.elements[a]}if(a.isModel){return this.getNodeByRecord(a)}return Ext.fly(a).findParent(this.itemSelector,this.getTargetEl())},getNodeByRecord:function(a){var c=this.all.elements,d=c.length,b=0;for(;b<d;b++){if(c[b].viewRecordId===a.internalId){return c[b]}}return null},getNodes:function(c,a){var b=this.all;if(a!==undefined){a++}return b.slice(c,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onDestroy:function(){var a=this;a.all.clear();a.emptyEl=null;a.callParent();a.bindStore(null);Ext.destroy(a.navigationModel,a.selModel,a.scrollManager)},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},privates:{getFocusEl:function(){return this.el},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():this.callParent()}}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,d){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})});Ext.define("Ext.view.View",{extend:Ext.view.AbstractView,alternateClassName:"Ext.DataView",alias:"widget.dataview",inputTagRe:/^textarea$|^input$/i,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;a.callParent();a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(d){var c=this,a=c.getTargetSelector(),b=d.getTarget(a);if(!c.isDestroyed){if(b){if(c.mouseOverItem!==b&&c.el.contains(b)){c.mouseOverItem=d.item=b;d.newType="mouseenter";c.handleEvent(d)}}else{c.handleEvent(d)}}},handleMouseOut:function(f){var b=this.getTargetSelector(),c=f.getTarget(b),d=f.getRelatedTarget(b),a;if((c===d)&&!(c===null&&d===null)){return}if(!this.isDestroyed){if(c&&(a=this.self.getBoundView(c))){f.item=c;f.newType="mouseleave";a.handleEvent(f);a.mouseOverItem=null}else{this.handleEvent(f)}}},handleEvent:function(f){var d=this,b=Ext.String.startsWith(f.type,"key"),c=b&&f.getKey(),a=d.getNavigationModel();f.view=d;if(b){f.item=a.getItem();f.record=a.getRecord()}if(!f.item){f.item=f.getTarget(d.itemSelector)}if(f.item&&!f.record){f.record=d.getRecord(f.item)}if(d.processUIEvent(f)!==false){d.processSpecialEvent(f)}if(c===f.SPACE){if(!d.inputTagRe.test(f.getTarget().tagName)){f.stopEvent()}}},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(f){if(!Ext.getBody().isAncestor(f.target)){return}var i=this,j=f.item,k=i.self,a=k.EventMap,g=k.TouchEventMap,d,c=f.record,h=f.type,b=h;if(f.newType){b=f.newType}if(j){b=g[b]||b;d=f.recordIndex=i.indexInStore?i.indexInStore(c):i.indexOf(j);if(!c||i.processItemEvent(c,j,d,f)===false){return false}if((i["onBeforeItem"+a[b]](c,j,d,f)===false)||(i.fireEvent("beforeitem"+b,i,c,j,d,f)===false)||(i["onItem"+a[b]](c,j,d,f)===false)){return false}i.fireEvent("item"+b,i,c,j,d,f)}else{h=g[h]||h;if((i.processContainerEvent(f)===false)||(i["onBeforeContainer"+a[h]](f)===false)||(i.fireEvent("beforecontainer"+h,i,f)===false)||(i["onContainer"+a[h]](f)===false)){return false}i.fireEvent("container"+h,i,f)}return true},onItemMouseEnter:function(a,c,b,d){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var b=this,a=b.highlightedItem,d=b.overItemCls;if(a!==c){if(a){Ext.fly(a).removeCls(d);if(Ext.isIE8){b.repaintBorder(a);b.repaintBorder(a.nextSibling)}if(b.hasListeners.unhighlightitem){b.fireEvent("unhighlightitem",b,a)}}b.highlightedItem=c;if(c){Ext.fly(c).addCls(b.overItemCls);if(Ext.isIE8){b.repaintBorder(c.nextSibling)}if(b.hasListeners.highlightitem){b.fireEvent("highlightitem",b,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(b,a){var f=this,e,c,d;if(f.viewReady){e=f.getNode(a);c=f.callParent(arguments);d=f.highlightedItem;if(d&&d===e){delete f.highlightedItem;if(c){f.highlightItem(c)}}}},refresh:function(){this.clearHighlight();this.callParent(arguments)},focusNode:function(h){var f=this,e=f.getNode(h),d=f.el,a=0,b=0,g=d.getRegion(),c;g.bottom=g.top+d.dom.clientHeight;g.right=g.left+d.dom.clientWidth;if(e){c=Ext.fly(e).getRegion();if(c.top<g.top){a=c.top-g.top}else{if(c.bottom>g.bottom){a=c.bottom-g.bottom}}if(c.left<g.left){b=c.left-g.left}else{if(c.right>g.right){b=c.right-g.right}}if(b||a){f.scrollBy(b,a,false)}Ext.fly(e).set({tabIndex:-1});e.focus()}},bindStore:function(b,c,a){var d=this[a];if(d&&d.isFeatureStore){if(b.isFeatureStore){this.bindStoreListeners(b);d.bindStore(d.store)}else{d.bindStore(b)}this.getSelectionModel().bindStore(d.store)}else{this.callParent(arguments)}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}});Ext.define("Ext.grid.CellContext",{isCellContext:true,constructor:function(a){this.view=a},isEqual:function(a){if(a){return this.record===a.record&&this.column===a.column}return false},setPosition:function(c,a){var b=this;if(arguments.length===1){if(c.view){b.view=c.view}a=c.column;c=c.row}b.setRow(c);b.setColumn(a);return b},setAll:function(b,c,d,a,f){var e=this;e.view=b;e.rowIdx=c;e.colIdx=d;e.record=a;e.column=f;return e},setRow:function(c){var a=this,b=a.view.dataSource;if(c!==undefined){if(typeof c==="number"){a.rowIdx=Math.max(Math.min(c,b.getCount()-1),0);a.record=b.getAt(c)}else{if(c.isModel){a.record=c;a.rowIdx=b.indexOf(c)}else{if(c.tagName){a.record=a.view.getRecord(c);a.rowIdx=b.indexOf(a.record)}}}}},setColumn:function(a){var b=this,c=b.view.getVisibleColumnManager();if(a!==undefined){if(typeof a==="number"){b.colIdx=a;b.column=c.getHeaderAtIndex(a)}else{if(a.isHeader){b.column=a;b.colIdx=c.getHeaderIndex(a)}}}},equal:function(a){return(a&&a.isCellContext&&a.view===this.view&&a.record===this.record&&a.column===this.column)},clone:function(){var b=this,a=new b.self(b.view);a.rowIdx=b.rowIdx;a.colIdx=b.colIdx;a.record=b.record;a.column=b.column;return a}});Ext.define("Ext.util.CSS",function(){var c,e=null,d=document,b=/(-[a-z])/gi,a=function(f,g){return g.charAt(1).toUpperCase()};return{singleton:true,rules:e,initialized:false,constructor:function(){c=this},createStyleSheet:function(h,j){var g,f=d.getElementsByTagName("head")[0],i=d.createElement("style");i.setAttribute("type","text/css");if(j){i.setAttribute("id",j)}g=i.styleSheet;if(g){f.appendChild(i);g.cssText=h}else{i.appendChild(d.createTextNode(h));f.appendChild(i);g=i.sheet}c.cacheStyleSheet(g);return g},removeStyleSheet:function(g){var f=d.getElementById(g);if(f){f.parentNode.removeChild(f)}},swapStyleSheet:function(h,f){var g;c.removeStyleSheet(h);g=d.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("id",h);g.setAttribute("href",f);d.getElementsByTagName("head")[0].appendChild(g)},cacheStyleSheet:function(l){if(!e){e=c.rules={}}try{var o=l.cssRules||l.rules,k=o.length-1,g=l.imports,f=g?g.length:0,n,h;for(h=0;h<f;++h){c.cacheStyleSheet(g[h])}for(;k>=0;--k){n=o[k];if(n.styleSheet){c.cacheStyleSheet(n.styleSheet)}c.cacheRule(n,l)}}catch(m){}},cacheRule:function(g,k){if(g.styleSheet){return c.cacheStyleSheet(g.styleSheet)}var i=g.selectorText,h,f;if(i){i=i.split(",");h=i.length;for(f=0;f<h;f++){e[Ext.String.trim(i[f]).toLowerCase()]={parentStyleSheet:k,cssRule:g}}}},getRules:function(h){var g={},f;if(e===null||h){c.refreshCache()}for(f in e){g[f]=e[f].cssRule}return g},refreshCache:function(){var h=d.styleSheets,g=0,f=h.length;e=c.rules={};for(;g<f;g++){try{if(!h[g].disabled){c.cacheStyleSheet(h[g])}}catch(j){}}},getRule:function(g,j,h){var k,f;if(!e||j){c.refreshCache()}if(!Ext.isArray(g)){f=e[g.toLowerCase()];if(f&&!h){f=f.cssRule}return f||null}for(k=0;k<g.length;k++){if(e[g[k]]){return h?e[g[k].toLowerCase()]:e[g[k].toLowerCase()].cssRule}}return null},createRule:function(k,g,i){var f,j=k.cssRules||k.rules,h=j.length;if(k.insertRule){k.insertRule(g+" {"+i+"}",h)}else{k.addRule(g,i||" ")}c.cacheRule(f=j[h],k);return f},updateRule:function(f,k,j){var l,g,h;if(!Ext.isArray(f)){l=c.getRule(f);if(l){if(arguments.length===2){h=Ext.Element.parseStyles(k);for(k in h){l.style[k.replace(b,a)]=h[k]}}else{l.style[k.replace(b,a)]=j}return true}}else{for(g=0;g<f.length;g++){if(c.updateRule(f[g],k,j)){return true}}}return false},deleteRule:function(f){var h=c.getRule(f,false,true),i,g;if(h){i=h.parentStyleSheet;g=Ext.Array.indexOf(i.cssRules||i.rules,h.cssRule);if(i.deleteRule){i.deleteRule(g)}else{i.removeRule(g)}delete e[f]}}}});Ext.define("Ext.view.TableLayout",{extend:Ext.layout.component.Auto,alias:["layout.tableview"],type:"tableview",beginLayout:function(c){var b=this,a=b.owner.lockingPartner;b.callParent(arguments);if(a){b.lockedGrid=b.owner.up("[lockable]");b.lockedGrid.needsRowHeightSync=true;if(!c.lockingPartner){c.lockingPartner=c.context.getItem(a,a.el);if(c.lockingPartner&&!c.lockingPartner.lockingPartner){c.lockingPartner.lockingPartner=c}}}c.headerContext=c.context.getCmp(b.headerCt);if(b.owner.body.dom){c.bodyContext=c.getEl(b.owner.body)}},calculate:function(f){var e=this,c=e.lockingPartner,a=e.owner,d=0,b;if(!a.store.getCount()){f.state.columnWidthsSynced=true;if(f.bodyContext){f.bodyContext.setHeight(d,false)}f.setProp("contentHeight",d);e.callParent(arguments);return}if(f.headerContext.hasProp("columnsChanged")){if(f.headerContext.getProp("columnsChanged")&&!e.setColumnWidths(f)){e.done=false;return}f.state.columnWidthsSynced=true;if(f.bodyContext){b=e.owner.el.down("."+a.ownerCt.emptyCls,true);if(!b){d=f.bodyContext.el.dom.offsetHeight;f.bodyContext.setHeight(d,false)}else{d=b.offsetHeight}if(f.headerContext.state.boxPlan.tooNarrow&&f.ownerCtContext.sizeModel.height.shrinkWrap){d+=Ext.getScrollbarSize().height}f.setProp("contentHeight",d)}if(c&&!c.state.columnWidthsSynced){e.done=false}else{e.callParent(arguments)}}else{e.done=false}},measureContentHeight:function(b){var a=b.lockingPartner;if(!b.bodyContext||(b.state.columnWidthsSynced&&(!a||a.state.columnWidthsSynced))){return this.callParent(arguments)}},setColumnWidths:function(c){if(!this.owner.body.dom){return true}var k=this,b=k.owner,a=c.context,f=c.headerContext.getProp("columnsChanged"),e=k.headerCt.getVisibleGridColumns(),d,h=0,j=f.length,l,g;if(a){a.currentLayout=k}for(h=0;h<j;h++){d=e[f[h]];l=a.getCmp(d);g=l.props.width;if(isNaN(g)){l.getProp("width");return false}b.body.select(b.getColumnSizerSelector(d)).setWidth(g)}return true},finishedLayout:function(c){var b=this,a=c.headerContext.props.contentWidth,d=Ext.fly(b.owner.getNodeContainer());b.callParent(arguments);d&&d.setWidth(a);if(b.owner.refreshCounter&&b.lockedGrid&&b.lockedGrid.syncRowHeight&&b.lockedGrid.needsRowHeightSync){b.lockedGrid.syncRowHeights();b.lockedGrid.needsRowHeightSync=false}}});Ext.define("Ext.view.NodeCache",{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a;this.clear();this.el=new Ext.dom.Fly()},clear:function(f){var d=this,e=d.elements,b,c,a=d.statics().range;if(d.count&&f){if(a){a.setStartBefore(e[d.startIndex]);a.setEndAfter(e[d.endIndex]);a.deleteContents()}else{for(b in e){c=e[b];c.parentNode.removeChild(c)}}}d.elements={};d.count=d.startIndex=0;d.endIndex=-1},fill:function(b,g,f){f=f||0;var d=this,e=d.elements={},c,a=b.length-f;if(!g){g=0}for(c=0;c<a;c++){e[g+c]=b[c+f]}d.startIndex=g;d.endIndex=g+a-1;d.count=a;return this},insert:function(f,b){var d=this,e=d.elements,c,a=b.length;if(d.count){if(f>d.endIndex+1||f+b.length-1<d.startIndex){Ext.Error.raise("Discontiguous range would result from inserting "+b.length+" nodes at "+f)}if(f<d.count){for(c=d.endIndex+a;c>=f+a;c--){e[c]=e[c-a];e[c].setAttribute("data-recordIndex",c)}}d.endIndex=d.endIndex+a}else{d.startIndex=f;d.endIndex=f+a-1}for(c=0;c<a;c++,f++){e[f]=b[c];e[f].setAttribute("data-recordIndex",f)}d.count+=a},invoke:function(d,a){var e=this,c,b;d=Ext.dom.Element.prototype[d];for(b=e.startIndex;b<=e.endIndex;b++){c=e.item(b);if(c){d.apply(c,a)}}return e},item:function(c,b){var d=this.elements[c],a=null;if(d){a=b?this.elements[c]:this.el.attach(this.elements[c])}return a},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},getCount:function(){return this.count},slice:function(e,b){var d=this.elements,a=[],c;if(!b){b=this.endIndex}else{b=Math.min(this.endIndex,b-1)}for(c=e||this.startIndex;c<=b;c++){a.push(d[c])}return a},replaceElement:function(d,c,a){var e=this.elements,b=(typeof d==="number")?d:this.indexOf(d);if(b>-1){c=Ext.getDom(c);if(a){d=e[b];d.parentNode.insertBefore(c,d);Ext.removeNode(d);c.setAttribute("data-recordIndex",b)}this.elements[b]=c}return this},indexOf:function(b){var c=this.elements,a;b=Ext.getDom(b);for(a=this.startIndex;a<=this.endIndex;a++){if(c[a]===b){return a}}return -1},removeRange:function(b,f,d){var h=this,a=h.elements,e,g,c,j;if(f==null){f=h.endIndex+1}else{f=Math.min(h.endIndex+1,f+1)}if(b==null){b=h.startIndex}c=f-b;for(g=b,j=f;g<=h.endIndex;g++,j++){if(d&&g<f){Ext.removeNode(a[g])}if(j<=h.endIndex){e=a[g]=a[j];e.setAttribute("data-recordIndex",g)}else{delete a[g]}}h.count-=c;h.endIndex-=c},removeElement:function(k,c){var g=this,j,i,a=g.elements,d,e,b=0,f,h;if(Ext.isArray(k)){j=k;k=[];e=j.length;for(b=0;b<e;b++){i=j[b];if(typeof i!=="number"){i=g.indexOf(i)}if(i>=g.startIndex&&i<=g.endIndex){k[k.length]=i}}Ext.Array.sort(k);e=k.length}else{if(k<g.startIndex||k>g.endIndex){return}e=1;k=[k]}for(f=h=k[0],b=0;f<=g.endIndex;f++,h++){if(b<e&&f===k[b]){h++;b++;if(c){Ext.removeNode(a[f])}}if(h<=g.endIndex&&h>=g.startIndex){d=a[f]=a[h];d.setAttribute("data-recordIndex",f)}else{delete a[f]}}g.endIndex-=e;g.count-=e},scroll:function(f,o,c){var m=this,n=m.view,p=n.store,a=m.elements,r=f.length,h,d,b,g,l=n.getNodeContainer(),q=document.createDocumentFragment(),e=n.hasListeners.itemremove,k=n.hasListeners.itemadd,j=m.statics().range;if(o===-1){if(c){if(j){j.setStartBefore(a[(m.endIndex-c)+1]);j.setEndAfter(a[m.endIndex]);j.deleteContents();for(h=(m.endIndex-c)+1;h<=m.endIndex;h++){d=a[h];delete a[h];if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}else{for(h=(m.endIndex-c)+1;h<=m.endIndex;h++){d=a[h];delete a[h];d.parentNode.removeChild(d);if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}m.endIndex-=c}if(f.length){g=n.bufferRender(f,m.startIndex-=r);for(h=0;h<r;h++){a[m.startIndex+h]=g[h];q.appendChild(g[h])}l.insertBefore(q,l.firstChild);if(k){n.fireEvent("itemadd",f,m.startIndex,g)}}}else{if(c){b=m.startIndex+c;if(j){j.setStartBefore(a[m.startIndex]);j.setEndAfter(a[b-1]);j.deleteContents();for(h=m.startIndex;h<b;h++){d=a[h];delete a[h];if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}else{for(h=m.startIndex;h<b;h++){d=a[h];delete a[h];d.parentNode.removeChild(d);if(e){n.fireEvent("itemremove",p.getByInternalId(d.getAttribute("data-recordId")),h,d,n)}}}m.startIndex=b}g=n.bufferRender(f,m.endIndex+1);for(h=0;h<r;h++){a[m.endIndex+=1]=g[h];q.appendChild(g[h])}l.appendChild(q);if(k){n.fireEvent("itemadd",f,m.endIndex+1,g)}}m.count=m.endIndex-m.startIndex+1},sumHeights:function(){var a=0,c=this.elements,b;for(b=this.startIndex;b<=this.endIndex;b++){a+=c[b].offsetHeight}return a}},function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)});Ext.define("Ext.view.Table",{extend:Ext.view.View,alias:"widget.tableview",inheritableStatics:{events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","deselect","select","beforedeselect","beforeselect","selectionchange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand"]},componentLayout:"tableview",baseCls:Ext.baseCSSPrefix+"grid-view",unselectableCls:Ext.baseCSSPrefix+"unselectable",firstCls:Ext.baseCSSPrefix+"grid-cell-first",lastCls:Ext.baseCSSPrefix+"grid-cell-last",itemCls:Ext.baseCSSPrefix+"grid-item",selectedItemCls:Ext.baseCSSPrefix+"grid-item-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-item-focused",overItemCls:Ext.baseCSSPrefix+"grid-item-over",altRowCls:Ext.baseCSSPrefix+"grid-item-alt",dirtyCls:Ext.baseCSSPrefix+"grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)"+Ext.baseCSSPrefix+"grid-row-(first|last|alt)(?:\\s+|$)","g"),cellRe:new RegExp(Ext.baseCSSPrefix+"grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:true,positionCells:false,stripeOnUpdate:null,trackOver:true,focusable:false,getRowClass:null,stripeRows:true,markDirty:true,ariaRole:"grid",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="'+Ext.baseCSSPrefix+'grid-item-container" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellPadding="0" cellSpacing="0" {ariaTableAttr} style="width:100%;{itemStyle}">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}" {rowAttr:attributes} {ariaRowAttr}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>" tabindex="-1" {ariaCellAttr} data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0}],refreshSelmodelOnRefresh:false,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-td"]},renderBuffer:document.createElement("div"),constructor:function(a){if(a.grid.isTree){a.baseCls=Ext.baseCSSPrefix+"tree-view"}this.callParent([a])},hasVariableRowHeight:function(a){var b=this;return b.variableRowHeight||b.store.isGrouped()||b.getVisibleColumnManager().hasVariableRowHeight()||(!a&&b.lockingPartner&&b.lockingPartner.hasVariableRowHeight(true))},initComponent:function(){var b=this,a=b.scroll;if(b.columnLines){b.addCls(b.grid.colLinesCls)}if(b.rowLines){b.addCls(b.grid.rowLinesCls)}b.body=new Ext.dom.Fly();b.body.id=b.id+"gridBody";b.autoScroll=undefined;if(!b.trackOver){b.overItemCls=null}if(a===true||a==="both"){b.autoScroll=true}else{if(a==="horizontal"){b.overflowX="auto"}else{if(a==="vertical"){b.overflowY="auto"}}}b.selModel.view=b.headerCt.view=b;b.grid.view=b;b.initFeatures(b.grid);b.itemSelector=b.getItemSelector();b.all=new Ext.view.NodeCache(b);b.callParent()},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},beforeLayout:function(){var b=this,a=!b.firstRefreshDone&&b.headerCt.layout.running;b.callParent(arguments);if(a&&b.body.dom){b.headerCt.layout.injectViewContext(b.headerCt.layout.ownerContext,b)}},moveColumn:function(a,t,h){var s=this,q=h>1,l=q&&document.createRange?document.createRange():null,b=q&&!l?document.createDocumentFragment():null,k=t,m=s.getGridColumns().length,r=m-1,e=(s.firstCls||s.lastCls)&&(t===0||t===m||a===0||a===r),o,n,g,p,c,d,f;if(s.rendered&&t!==a){g=s.el.query(s.rowSelector);if(t>a&&b){k-=1}for(o=0,p=g.length;o<p;o++){c=g[o];d=c.childNodes;if(e){if(d.length===1){Ext.fly(d[0]).addCls(s.firstCls);Ext.fly(d[0]).addCls(s.lastCls);continue}if(a===0){Ext.fly(d[0]).removeCls(s.firstCls);Ext.fly(d[1]).addCls(s.firstCls)}else{if(a===r){Ext.fly(d[r]).removeCls(s.lastCls);Ext.fly(d[r-1]).addCls(s.lastCls)}}if(t===0){Ext.fly(d[0]).removeCls(s.firstCls);Ext.fly(d[a]).addCls(s.firstCls)}else{if(t===m){Ext.fly(d[r]).removeCls(s.lastCls);Ext.fly(d[a]).addCls(s.lastCls)}}}if(q){if(l){l.setStartBefore(d[a]);l.setEndAfter(d[a+h-1]);b=l.extractContents()}else{for(n=0;n<h;n++){b.appendChild(d[a])}}c.insertBefore(b,d[k]||null)}else{c.insertBefore(d[a],d[k]||null)}}f=s.el.query("colgroup");for(o=0,p=f.length;o<p;o++){c=f[o];if(q){if(l){l.setStartBefore(c.childNodes[a]);l.setEndAfter(c.childNodes[a+h-1]);b=l.extractContents()}else{for(n=0;n<h;n++){b.appendChild(c.childNodes[a])}}c.insertBefore(b,c.childNodes[k]||null)}else{c.insertBefore(c.childNodes[a],c.childNodes[k]||null)}}}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getRow(a);return Ext.fly(c).down(b.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a){return a.get(b)}},findFeature:function(a){if(this.features){return Ext.Array.findBy(this.features,function(b){if(b.ftype===a){return true}})}},initFeatures:function(d){var f=this,c,e,b,a;f.tpl=Ext.XTemplate.getTpl(this,"tpl");f.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl");f.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl"));f.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl");f.featuresMC=new Ext.util.MixedCollection();e=f.features=f.constructFeatures();a=e?e.length:0;for(c=0;c<a;c++){b=e[c];b.view=f;b.grid=d;f.featuresMC.add(b);b.init(d)}},renderTHead:function(b,c,e){var f=b.view.headerFns,a,d;if(f){for(d=0,a=f.length;d<a;++d){f[d].call(this,b,c,e)}}},addHeaderFn:function(a){var b=this.headerFns;if(!b){b=this.headerFns=[]}b.push(a)},renderTFoot:function(b,c,e){var f=b.view.footerFns,a,d;if(f){for(d=0,a=f.length;d<a;++d){f[d].call(this,b,c,e)}}},addFooterFn:function(a){var b=this.footerFns;if(!b){b=this.footerFns=[]}b.push(a)},addTpl:function(a){return this.insertTpl("tpl",a)},addRowTpl:function(a){return this.insertTpl("rowTpl",a)},addCellTpl:function(a){return this.insertTpl("cellTpl",a)},insertTpl:function(e,d){var c=this,a,b;if(d.isTemplate){d=Ext.Object.chain(d)}else{d=new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",d)}for(a=c[e];d.priority<a.priority;a=a.nextTpl){b=a}if(b){b.nextTpl=d}else{c[e]=d}d.nextTpl=a;return d},tplApplyOut:function(a,b,c){if(this.before){if(this.before(a,b,c)===false){return}}this.nextTpl.applyOut(a,b,c);if(this.after){this.after(a,b,c)}},constructFeatures:function(){var f=this,e=f.features,d,b,c=0,a;if(e){b=[];a=e.length;for(;c<a;c++){d=e[c];if(!d.isFeature){d=Ext.create("feature."+d.ftype,d)}b[c]=d}}return b},beforeRender:function(){var a=this;a.callParent();if(!a.enableTextSelection){a.protoEl.unselectable()}},onBindStore:function(){var a=this;if(a.all&&a.all.getCount()){if(a.bufferedRenderer){a.bufferedRenderer.setBodyTop(0)}a.clearViewEl()}a.callParent(arguments)},onViewScroll:function(b,a){if(!this.ignoreScroll){this.callParent(arguments);this.fireEvent("bodyscroll",b,a)}},createRowElement:function(b,c,d){var e=this,f=e.renderBuffer,a=e.collectData([b],c);a.columns=d;e.tpl.overwrite(f,a);return Ext.fly(f).down(e.getNodeContainerSelector(),true).firstChild},bufferRender:function(a,b){var c=this,d=c.renderBuffer;c.tpl.overwrite(d,c.collectData(a,b));return Ext.Array.toArray(Ext.fly(d).down(c.getNodeContainerSelector(),true).childNodes)},collectData:function(a,c){var b=this;b.rowValues.view=b;b.tableValues.view=b;b.tableValues.rows=a;b.tableValues.columns=null;b.tableValues.viewStartIndex=c;b.tableValues.touchScroll=b.touchScroll;b.tableValues.tableStyle="width:"+b.headerCt.getTableWidth()+"px";return b.tableValues},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},refreshSize:function(c){var b=this,a=b.getBodySelector();if(a){b.body.attach(b.el.down(a,true))}if(!b.hasLoadingHeight){Ext.suspendLayouts();b.callParent(arguments);if(c||(b.hasVariableRowHeight()&&b.dataSource.getCount())){b.grid.updateLayout()}Ext.resumeLayouts(true)}},clearViewEl:function(h){var e=this,c=e.all,a=e.getStore(),b,d,f,g;for(b=c.startIndex;b<=c.endIndex;b++){d=c.item(b,true);e.fireEvent("itemremove",a.getByInternalId(d.getAttribute("data-recordId")),b,d,e)}e.callParent();f=Ext.fly(e.getNodeContainer());if(f&&!h){g=e.getTargetEl();if(g.dom!==f.dom){f.destroy()}}},getMaskTarget:function(){var a=this.ownerCt;if(a.ownerLockable){a=a.ownerLockable}return a.getMaskTarget()},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},getRecord:function(c){var b=this,a;if(b.store.isDestroyed){return}if(c.isModel){return c}c=b.getNode(c);if(c){if(!b.hasActiveFeature()){a=c.getAttribute("data-recordIndex");if(a){a=parseInt(a,10);if(a>-1){return b.store.data.getAt(a)}}}return b.dataSource.getByInternalId(c.getAttribute("data-recordId"))}},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}return this.all.indexOf(a)},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},renderRows:function(f,e,d,b){var g=this.rowValues,a=f.length,c;g.view=this;g.columns=e;for(c=0;c<a;c++,d++){g.itemClasses.length=g.rowClasses.length=0;this.renderRow(f[c],d,b)}g.view=g.columns=g.record=null},renderColumnSizer:function(b,c){var e=b.columns||this.getGridColumns(),a=e.length,d,g,f;c.push('<colgroup role="presentation">');for(d=0;d<a;d++){g=e[d];f=g.cellWidth?g.cellWidth:Ext.grid.header.Container.prototype.defaultWidth;c.push('<col role="presentation" class="',Ext.baseCSSPrefix,"grid-cell-",e[d].getItemId(),'" style="width:'+f+'px">')}c.push("</colgroup>")},renderRow:function(g,a,f){var i=this,e=a===-1,h=i.selModel,l=i.rowValues,d=l.itemClasses,c=l.rowClasses,b=i.itemCls,k,j=i.rowTpl;l.rowAttr={};l.record=g;l.recordId=g.internalId;l.recordIndex=i.store.indexOf(g);l.rowIndex=a;l.rowId=i.getRowId(g);l.itemCls=l.rowCls="";if(!l.columns){l.columns=i.ownerCt.getVisibleColumnManager().getColumns()}d.length=c.length=0;if(!e){d[0]=b;if(!i.ownerCt.disableSelection&&h.isRowSelected){if(h.isRowSelected(g)){d.push(i.selectedItemCls)}}if(i.stripeRows&&a%2!==0){d.push(i.altRowCls)}if(i.getRowClass){k=i.getRowClass(g,a,null,i.dataSource);if(k){c.push(k)}}}if(f){j.applyOut(l,f,i.tableValues)}else{return j.apply(l,i.tableValues)}},renderCell:function(d,g,f,m,i,e){var k=this,b,h=k.selModel,j=k.cellValues,c=j.classes,a=g.data[d.dataIndex],n=k.cellTpl,o,l;j.record=g;j.column=d;j.recordIndex=f;j.rowIndex=m;j.columnIndex=i;j.cellIndex=i;j.align=d.align;j.innerCls=d.innerCls;j.tdCls=j.tdStyle=j.tdAttr=j.style="";j.unselectableAttr=k.enableTextSelection?"":'unselectable="on"';c[1]=d.getCellId();l=2;if(d.renderer&&d.renderer.call){b=k.ownerCt.columnManager.getHeaderIndex(d);o=d.renderer.call(d.usingDefaultRenderer?d:d.scope||k.ownerCt,a,j,g,f,b,k.dataSource,k);if(j.css){g.cssWarning=true;j.tdCls+=" "+j.css;j.css=null}if(j.tdCls){c[l++]=j.tdCls}}else{o=a}j.value=(o==null||o==="")?d.emptyCellText:o;if(d.tdCls){c[l++]=d.tdCls}if(k.markDirty&&g.isModified(d.dataIndex)){c[l++]=k.dirtyCls}if(d.isFirstVisible){c[l++]=k.firstCls}if(d.isLastVisible){c[l++]=k.lastCls}if(!k.enableTextSelection){c[l++]=k.unselectableCls}if(h&&h.isCellModel&&h.isCellSelected(k,f,d)){c[l++]=(k.selectedCellCls)}c.length=l;j.tdCls=c.join(" ");n.applyOut(j,e);j.column=null},getRow:function(a){var b;if((!a&&a!==0)||!this.rendered){return null}if(a.target){a=a.target}if(Ext.isString(a)){return Ext.fly(a).down(this.rowSelector,true)}if(Ext.isNumber(a)){b=this.all.item(a);return b&&b.down(this.rowSelector,true)}if(a.isModel){return this.getRowByRecord(a)}b=Ext.fly(a);if(b.is(this.itemSelector)){return this.getRowFromItem(b)}return b.findParent(this.rowSelector,this.getTargetEl())},getRowId:function(a){return this.id+"-record-"+a.internalId},constructRowId:function(a){return this.id+"-record-"+a},getNodeById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,false)},getRowById:function(a){a=this.constructRowId(a);return this.retrieveNode(a,true)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),false)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),true)},getRowFromItem:function(c){var d=Ext.getDom(c).tBodies[0].childNodes,a=d.length,b;for(b=0;b<a;b++){if(Ext.fly(d[b]).is(this.rowSelector)){return d[b]}}},retrieveNode:function(c,b){var a=this.el.getById(c,true);if(b&&a){return Ext.fly(a).down(this.rowSelector,true)}return a},updateIndexes:Ext.emptyFn,bodySelector:"div."+Ext.baseCSSPrefix+"grid-item-container",nodeContainerSelector:"div."+Ext.baseCSSPrefix+"grid-item-container",itemSelector:"table."+Ext.baseCSSPrefix+"grid-item",rowSelector:"tr."+Ext.baseCSSPrefix+"grid-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+"-"+b.getItemId();return"td"+a+",col"+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+" "+this.innerSelector},addRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).addCls(a)}},removeRowCls:function(b,a){var c=this.getRow(b);if(c){Ext.fly(c).removeCls(a)}},onRowSelect:function(b){var a=this;a.addItemCls(b,a.selectedItemCls);if(Ext.isIE8){a.repaintBorder(b+1)}},onRowDeselect:function(b){var a=this;a.removeItemCls(b,a.selectedItemCls);if(Ext.isIE8){a.repaintBorder(b+1)}},onCellSelect:function(b){var a=this.getCellByPosition(b);if(a){a.addCls(this.selectedCellCls)}},onCellDeselect:function(b){var a=this.getCellByPosition(b,true);if(a){Ext.fly(a).removeCls(this.selectedCellCls)}},getCellInclusive:function(a,b){if(a){var c=this.getRow(a.row),d=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(d&&c){return Ext.fly(c).down(this.getCellSelector(d),b)}}return false},getCellByPosition:function(a,c){if(a){var b=a.view||this,d=b.getRow(a.record||a.row),e=a.column.isColumn?a.column:b.getVisibleColumnManager().getHeaderAtIndex(a.column);if(e&&d){return Ext.fly(d).down(b.getCellSelector(e),c)}}return false},onRowFocus:function(d,b,a){var c=this;if(b){c.addItemCls(d,c.focusedItemCls);if(!a){c.focusRow(d)}}else{c.removeItemCls(d,c.focusedItemCls)}if(Ext.isIE8){c.repaintBorder(d+1)}},focusRow:function(d,a){var c=this,b=c.getFocusTask();if(a){b.delay(Ext.isNumber(a)?a:10,c.focusRow,c,[d,false]);return}b.cancel();if(c.isVisible(true)){c.getNavigationModel().setPosition(c.getRecord(d))}},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(b,a){b=this.getRow(b);if(b){this.scrollElIntoView(b,false,a)}},focusCell:function(b,c){var e=this,a,d=e.getFocusTask();if(c){d.delay(Ext.isNumber(c)?c:10,e.focusCell,e,[b,false]);return}d.cancel();if(e.isVisible(true)&&(a=e.getCellByPosition(b))){e.getNavigationModel().setPosition(b)}},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column){if(b.dataSource.indexOf(a.record)!==-1&&b.getVisibleColumnManager().indexOf(a.column)!==-1){return a}}},scrollCellIntoView:function(a,b){if(a.isCellContext){a=this.getCellByPosition(a)}if(a){this.scrollElIntoView(a,null,b)}},scrollElIntoView:function(b,d,a){var c=this,e=c.scrollManager;if(e){e.scrollIntoView(b,d,a)}else{Ext.fly(b).scrollIntoView(c.el,d,a)}},syncRowHeights:function(e,b){e.style.height=b.style.height="";var d=this,f=d.rowTpl,c=e.offsetHeight,a=b.offsetHeight;if(c!==a){while(f){if(f.syncRowHeights){if(f.syncRowHeights(e,b)===false){break}}f=f.nextTpl}c=e.offsetHeight;a=b.offsetHeight;if(c!==a){e=Ext.fly(e).down(d.rowSelector,true)||e;b=Ext.fly(b).down(d.rowSelector,true)||b;if(e&&b){e.style.height=b.style.height="";c=e.offsetHeight;a=b.offsetHeight;if(c>a){Ext.fly(e).setHeight(c);Ext.fly(b).setHeight(c)}else{if(a>c){Ext.fly(e).setHeight(a);Ext.fly(b).setHeight(a)}}}}}},handleUpdate:function(k,f,n,w){var E=this,q=E.rowTpl,C,p,m,g,o,y,B,h,t,l,F,c,e,s=[],A,x,u=E.variableRowHeight,j,r=0,b,d,v,D,a,z=E.ownerCt;if(E.viewReady){p=E.getNodeByRecord(f);if(p){t=E.overItemCls;l=E.focusedItemCls;F=E.selectedItemCls;c=E.ownerCt.getVisibleColumnManager().getColumns();for(x=0,A=c.length;x<A;x++){e=c[x];j=E.shouldUpdateCell(f,e,w);if(j){r=r|j;s[s.length]=e;u=u||e.variableRowHeight}}if(!E.getRowFromItem(p)||(r&1)||(p.tBodies[0].childNodes.length>1)){C=Ext.fly(p,"_internal");g=E.createRowElement(f,E.dataSource.indexOf(f),s);if(C.hasCls(t)){Ext.fly(g).addCls(t)}if(C.hasCls(l)){Ext.fly(g).addCls(l)}if(C.hasCls(F)){Ext.fly(g).addCls(F)}if(Ext.isIE9m&&p.mergeAttributes){p.mergeAttributes(g,true)}else{o=g.attributes;y=o.length;for(h=0;h<y;h++){B=o[h].name;if(B!=="id"){p.setAttribute(B,o[h].value)}}}if(c.length&&(m=E.getRow(p))){E.updateColumns(m,Ext.fly(g).down(E.rowSelector,true),s)}while(q){if(q.syncContent){if(q.syncContent(p,g,w?s:null)===false){break}}q=q.nextTpl}}else{if(!E.cellFly){E.cellFly=new Ext.dom.Fly()}for(x=0,A=s.length;x<A;x++){e=s[x];d=e.dataIndex;v=f.get(d);b=p.firstChild.firstChild.childNodes[e.getVisibleIndex()];if(E.markDirty){E.cellFly.attach(b);if(f.isModified(e.dataIndex)){E.cellFly.addCls(E.dirtyCls)}else{E.cellFly.removeCls(E.dirtyCls)}}D=e.usingDefaultRenderer;a=D?e:e.scope;if(e.updater){Ext.callback(e.updater,a,[b,v,f,E,E.dataSource],0,e,z)}else{if(e.renderer){v=Ext.callback(e.renderer,a,[v,null,f,0,0,E.dataSource,E],0,e,z)}if(e.producesHTML){b.childNodes[0].innerHTML=v}else{b.childNodes[0].childNodes[0].data=v}}if(E.highlightClass){Ext.fly(b).addCls(E.highlightClass);if(!E.changedCells){E.self.prototype.changedCells=[];E.prototype.clearChangedTask=new Ext.util.DelayedTask(E.clearChangedCells,E.prototype);E.clearChangedTask.delay(E.unhighlightDelay)}E.changedCells.push({cell:b,cls:E.highlightClass,expires:Ext.Date.now()+1000})}}}if(u){Ext.suspendLayouts()}E.fireEvent("itemupdate",f,E.store.indexOf(f),p);if(u){E.refreshSize();Ext.resumeLayouts(true)}}}},clearChangedCells:function(){var d=this,b=Ext.Date.now(),e;for(var c=0,a=d.changedCells.length;c<a;){e=d.changedCells[c];if(e.expires<=b){Ext.fly(e.cell).removeCls(e.highlightClass);Ext.Array.erase(d.changedCells,c,1);a--}else{break}}if(a){d.clearChangedTask.delay(d.unhighlightDelay)}},updateColumns:function(i,j,k){var h=this,b,a,g,c,m=k.length,l,d,n,f,e=h.getCellSelector();if(i.mergeAttributes){i.mergeAttributes(j,true)}else{b=j.attributes;a=b.length;for(c=0;c<a;c++){g=b[c].name;if(g!=="id"){i.setAttribute(g,b[c].value)}}}for(l=0;l<m;l++){d=k[l];e=h.getCellSelector(d);n=Ext.fly(i).selectNode(e);f=Ext.fly(j).selectNode(e);Ext.fly(n).syncContent(f)}},shouldUpdateCell:function(b,e,d){if(!e.preventUpdate){if(e.hasCustomRenderer){return 1}if(d){var a=d.length,c,f;for(c=0;c<a;++c){f=d[c];if(f===e.dataIndex||f===b.idProperty){return 2}}}else{return 2}}return 0},refresh:function(){var c=this,d,b=c.grid.containsFocus,a=c.getNavigationModel();c.callParent(arguments);if(b){a.setPosition(a.getLastFocused(),null,null,null,true)}c.headerCt.setSortState();if(c.touchScroll&&c.el&&!c.all.getCount()&&c.headerCt&&c.headerCt.tooNarrow){d=c.scrollManager.scroller.getSize();d.x=c.headerCt.getTableWidth();c.scrollManager.scroller.setSize(d);c.scrollManager.refresh()}},processItemEvent:function(d,s,l,r){var w=this,n=w.self,v=n.EventMap,f=r.type,j,a,o,h=w.features,q=h.length,p,k,m,g,c,b=w.getNavigationModel(),u,t=r.position=w.eventPosition||(w.eventPosition=new Ext.grid.CellContext());if(Ext.isIE&&f==="mouseup"&&!r.within(w.el)){return false}if(w.indexInStore(s)!==-1){j=t.rowElement=Ext.fly(s).down(w.rowSelector,true);if(Ext.String.startsWith(r.type,"key")&&(u=b.getPosition())){a=(a=b.getCell())&&a.dom;c=u.column}if(!a){a=r.getTarget(w.getCellSelector(),j)}f=n.TouchEventMap[f]||f;if(a){if(!a.parentNode){return false}if(!c){c=w.getHeaderByCell(a)}k=w.ownerCt.getColumnManager().getHeaderIndex(c)}else{k=-1}t.setAll(w,l,c?w.getVisibleColumnManager().getHeaderIndex(c):-1,d,c);t.cellElement=a;m=w.fireEvent("uievent",f,w,a,l,k,r,d,j);if((m===false||w.callParent(arguments)===false)){o=w.getSelectionModel();if(o.onVetoUIEvent){o.onVetoUIEvent(f,w,a,l,k,r,d,j)}return false}for(p=0;p<q;++p){g=h[p];if(g.wrapsItem){if(g.vetoEvent(d,j,l,r)===false){w.processSpecialEvent(r);return false}}}if(a&&f!=="mouseover"&&f!=="mouseout"){m=!((w["onBeforeCell"+v[f]](a,k,d,j,l,r)===false)||(w.fireEvent("beforecell"+f,w,a,k,d,j,l,r)===false)||(w["onCell"+v[f]](a,k,d,j,l,r)===false)||(w.fireEvent("cell"+f,w,a,k,d,j,l,r)===false))}if(m!==false){m=w.fireEvent("row"+f,w,d,j,l,r)}return m}else{this.processSpecialEvent(r);return false}},processSpecialEvent:function(h){var l=this,c=l.features,k=c.length,m=h.type,d,n,f,g,b,j,a=l.ownerCt;l.callParent(arguments);if(m=="mouseover"||m=="mouseout"){return}m=l.self.TouchEventMap[m]||m;for(d=0;d<k;d++){n=c[d];if(n.hasFeatureEvent){g=h.getTarget(n.eventSelector,l.getTargetEl());if(g){f=n.eventPrefix;b=n.getFireEventArgs("before"+f+m,l,g,h);j=n.getFireEventArgs(f+m,l,g,h);if((l.fireEvent.apply(l,b)===false)||(a.fireEvent.apply(a,b)===false)||(l.fireEvent.apply(l,j)===false)||(a.fireEvent.apply(a,j)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)){a=this.getGridColumns[a]}if(a){if(a.isGroupHeader){a.autoSize();return}delete a.flex;a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(d){var f=this,k=f.el.query(d.getCellInnerSelector()),b=d.getWidth(),c=0,e=k.length,a=f.body.select(f.getColumnSizerSelector(d)),h=Math.max,g=0,j;if(e>0){if(Ext.supports.ScrollWidthInlinePaddingBug){g+=f.getCellPaddingAfter(k[0])}if(f.columnLines){g+=Ext.fly(k[0].parentNode).getBorderWidth("lr")}}a.setWidth(1);d.titleEl.setStyle("text-overflow","clip");j=d.textEl.dom.offsetWidth+d.titleEl.getPadding("lr");d.titleEl.setStyle("text-overflow","");for(;c<e;c++){j=h(j,k[c].scrollWidth)}j+=g;j=h(j,40);a.setWidth(b);return j},getPositionByEvent:function(f){var d=this,b=f.getTarget(d.cellSelector),c=f.getTarget(d.itemSelector),a=d.getRecord(c),g=d.getHeaderByCell(b);return d.getPosition(a,g)},getHeaderByCell:function(a){if(a){return this.ownerCt.getVisibleColumnManager().getHeaderById(a.getAttribute("data-columnId"))}return false},walkCells:function(l,m,i,n,b,p){if(!l){return false}var j=this,q=typeof l.row==="number"?l.row:l.rowIdx,f=typeof l.column==="number"?l.column:l.colIdx,k=j.dataSource.getCount(),d=j.ownerCt.getVisibleColumnManager(),a=d.getHeaderIndex(d.getFirst()),h=d.getHeaderIndex(d.getLast()),o=q,g=f,c=d.getHeaderAtIndex(f);if(!c||c.hidden||!k){return false}i=i||{};m=m.toLowerCase();switch(m){case"right":if(f===h){if(n||q===k-1){return false}if(!i.ctrlKey){o=j.walkRows(q,1);if(o!==q){g=a}}}else{if(!i.ctrlKey){g=d.getHeaderIndex(d.getNextSibling(c))}else{g=h}}break;case"left":if(f===a){if(n||q===0){return false}if(!i.ctrlKey){o=j.walkRows(q,-1);if(o!==q){g=h}}}else{if(!i.ctrlKey){g=d.getHeaderIndex(d.getPreviousSibling(c))}else{g=a}}break;case"up":if(q===0){return false}else{if(!i.ctrlKey){o=j.walkRows(q,-1)}else{o=j.walkRows(-1,1)}}break;case"down":if(q===k-1){return false}else{if(!i.ctrlKey){o=j.walkRows(q,1)}else{o=j.walkRows(k,-1)}}break}if(b&&b.call(p||j,{row:o,column:g})!==true){return false}g=d.getHeaderAtIndex(g);return new Ext.grid.CellContext(j).setPosition(o,g)},walkRows:function(h,a){var d=this,g=d.dataSource,e=0,j=h,b,c=(a<0)?0:(g.isBufferedStore?g.getTotalCount():g.getCount())-1,f=c?1:-1,i=h;do{if(c?i>=c:i<=c){return j||c}i+=f;if((b=Ext.fly(d.getRow(i)))&&b.isVisible(true)){e+=f;j=i}}while(e!==a);return i},walkRecs:function(b,a){var g=this,j=g.dataSource,h=0,k=b,c,e=(a<0)?0:(j.isBufferedStore?j.getTotalCount():j.getCount())-1,i=e?1:-1,f=j.indexOf(b),d;do{if(e?f>=e:f<=e){return k}f+=i;d=j.getAt(f);if(!d.isCollapsedPlaceholder&&(c=Ext.fly(g.getNodeByRecord(d)))&&c.isVisible(true)){h+=i;k=d}}while(h!==a);return k},getFirstVisibleRowIndex:function(){var c=this,b=(c.dataSource.isBufferedStore?c.dataSource.getTotalCount():c.dataSource.getCount()),a=c.indexOf(c.all.first())-1;do{a+=1;if(a===b){return}}while(!Ext.fly(c.getRow(a)).isVisible(true));return a},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{a-=1;if(a===-1){return}}while(!Ext.fly(b.getRow(a)).isVisible(true));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(a,b){return new Ext.grid.CellContext(this).setPosition(a,b)},beforeDestroy:function(){var a=this;if(a.rendered){a.el.clearListeners()}a.callParent(arguments)},onDestroy:function(){var d=this,c=d.featuresMC,a,b;if(c){for(b=0,a=c.getCount();b<a;++b){c.getAt(b).destroy()}}d.featuresMC=null;this.callParent(arguments)},onReplace:function(b,e,a,d){var c=this,f=c.bufferedRenderer;if(c.rendered&&f){f.onReplace(b,e,a,d)}else{c.callParent(arguments);c.doStripeRows(e)}},onAdd:function(b,a,c){var d=this,e=d.bufferedRenderer;if(d.rendered&&e){e.onReplace(b,c,[],a)}else{d.callParent(arguments);d.setPendingStripe(c)}},onRemove:function(b,a,c){var d=this,e=d.bufferedRenderer;if(d.rendered&&e){e.onReplace(b,c,a,[])}else{d.callParent(arguments);d.setPendingStripe(c)}},onDataRefresh:function(){var b=this,a=b.ownerCt;if(a&&a.isCollapsingOrExpanding===2){a.on("expand",b.onDataRefresh,b,{single:true});return}if(b.bufferedRenderer){b.all.clear();b.bufferedRenderer.onStoreClear()}b.callParent()},getViewRange:function(){var a=this;if(a.bufferedRenderer){return a.bufferedRenderer.getViewRange()}return a.callParent()},setPendingStripe:function(a){var b=this.stripeOnUpdate;if(b===null){b=a}else{b=Math.min(b,a)}this.stripeOnUpdate=b},onEndUpdate:function(){var a=this,b=a.stripeOnUpdate;if(b||b===0){a.doStripeRows(b);a.stripeOnUpdate=null}a.callParent(arguments)},doStripeRows:function(b,a){var d=this,e,g,c,f;if(d.rendered&&d.stripeRows){e=d.getNodes(b,a);for(c=0,g=e.length;c<g;c++){f=e[c];f.className=f.className.replace(d.rowClsRe," ");b++;if(b%2===0){f.className+=(" "+d.altRowCls)}}}},hasActiveFeature:function(){return(this.isGrouping&&this.store.isGrouped())||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding("r")},privates:{refreshScroll:function(){var a=this,b=a.bufferedRenderer;if(b){b.stretchView(a,b.getScrollHeight(true))}else{a.callParent()}}}});Ext.define("Ext.grid.View",{extend:Ext.view.Table,alias:"widget.gridview",autoScroll:true});Ext.define("Ext.grid.Panel",{extend:Ext.panel.Table,alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:false,rowLines:true});Ext.define("Ext.form.CheckboxManager",{extend:Ext.util.MixedCollection,singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name==a&&c.getFormId()==b})}});Ext.define("Ext.form.field.Checkbox",{extend:Ext.form.field.Base,alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl"],fieldSubTpl:['<div class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" data-ref="inputEl" role="{role}" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}" autocomplete="off" hidefocus="true" />','<tpl if="boxLabel && !labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:false,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",afterLabelCls:Ext.baseCSSPrefix+"form-cb-after",wrapInnerCls:Ext.baseCSSPrefix+"form-cb-wrap-inner",noBoxLabelCls:Ext.baseCSSPrefix+"form-cb-wrap-inner-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:Ext.baseCSSPrefix+"form-cb",initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}a.callParent(arguments);a.getManager().add(a)},initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return a.callParent()},getSubTplData:function(a){var c=this,b=c.boxLabel,e=c.boxLabelAlign,d=b&&e==="before";return Ext.apply(c.callParent(arguments),{disabled:c.readOnly||c.disabled,wrapInnerCls:c.wrapInnerCls,boxLabel:b,boxLabelCls:c.boxLabelCls,boxLabelAlign:e,labelAlignedBefore:d,afterLabelCls:d?c.afterLabelCls:"",noBoxLabelCls:!b?c.noBoxLabelCls:"",role:c.ariaRole})},initEvents:function(){var a=this;a.callParent();a.mon(a.inputEl,"click",a.onBoxClick,a,{translate:false})},setBoxLabel:function(a){var b=this;b.boxLabel=a;if(b.rendered){b.boxLabelEl.setHtml(a)}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){this.setValue(!this.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(b,a){return(b===true||b==="true"||b==="1"||b===1||(((Ext.isString(b)||Ext.isNumber(b))&&a)?b==a:this.onRe.test(b)))},setRawValue:function(c){var b=this,d=b.inputEl,a=b.isChecked(c,b.inputValue);if(d){b[a?"addCls":"removeCls"](b.checkedCls)}b.checked=b.rawValue=a;if(!b.duringSetValue){b.lastValue=a}return a},setValue:function(f){var e=this,c,b,a,d;if(Ext.isArray(f)){c=e.getManager().getByName(e.name,e.getFormId()).items;a=c.length;for(b=0;b<a;++b){d=c[b];d.setValue(Ext.Array.contains(f,d.inputValue))}}else{e.duringSetValue=true;e.callParent(arguments);delete e.duringSetValue}return e},valueToRaw:Ext.identityFn,onChange:function(b,a){var d=this,c=d.handler;Ext.callback(d.handler,d.scope,[d,b],0,d);d.callParent(arguments);if(d.reference&&d.publishState){d.publishState("checked",b)}},resetOriginalValue:function(b){var f=this,d,e,a,c;if(!b){d=f.getManager().getByName(f.name,f.getFormId()).items;a=d.length;for(c=0;c<a;++c){e=d[c];if(e!==f){d[c].resetOriginalValue(true)}}}f.callParent()},beforeDestroy:function(){this.callParent();this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;a.callParent();if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=!!c||a.disabled}a.callParent(arguments)},getFormId:function(){var b=this,a;if(!b.formId){a=b.up("form");if(a){b.formId=a.id}}return b.formId}});Ext.define("Ext.selection.RowModel",{extend:Ext.selection.DataViewModel,alias:"selection.rowmodel",enableKeyNav:true,isRowModel:true,onUpdate:function(b){var d=this,a=d.view,c;if(a&&d.isSelected(b)){c=a.indexOf(b);a.onRowSelect(c);if(b===d.lastFocused){a.onRowFocus(c,true)}}},getRowsVisible:function(){var e=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();e=Math.floor(c/b)}return e},onSelectChange:function(f,c,k,a){var h=this,l=h.views||[h.view],d=l.length,b,g=c?"select":"deselect",e,j;if((k||h.fireEvent("before"+g,h,f,b))!==false&&a()!==false){for(e=0;e<d;e++){j=l[e];b=j.indexOf(f);if(b!==-1){if(c){j.onRowSelect(b,k)}else{j.onRowDeselect(b,k)}}}if(!k){h.fireEvent(g,h,f,b)}}},onLastFocusChanged:function(g,c,b){var a=this.views||[this.view],f=a.length,e,d=0;if(g&&f){e=a[0].indexOf(g);if(e!==-1){for(;d<f;d++){a[d].onRowFocus(e,false,true)}}}if(c&&f){e=a[0].indexOf(c);if(e!==-1){for(d=0;d<f;d++){a[d].onRowFocus(e,true,b)}}}},onEditorTab:function(d,i){var f=this,c=d.context.view,b=d.getActiveRecord(),a=d.context,h=i.shiftKey?"left":"right",g;do{g=a;a=c.walkCells(a,h,i,f.preventWrap);if(g&&g.isEqual(a)){return}}while(a&&(!a.column.getEditor(b)||!d.startEditByPosition(a)))},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a){return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(a),0)}},selectByPosition:function(a,c){var b=new Ext.grid.CellContext(this.view);b.setPosition(a.row,a.column);this.select(b.record,c)},selectNext:function(g,c){var f=this,b=f.store,e=f.getSelection(),a=e[e.length-1],d=f.view.indexOf(a)+1,h;if(d===b.getCount()||d===0){h=false}else{f.doSelect(d,g,c);h=true}return h},selectPrevious:function(f,b){var e=this,d=e.getSelection(),a=d[0],c=e.view.indexOf(a)-1,g;if(c<0){g=false}else{e.doSelect(c,f,b);g=true}return g},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(b,a,c){return this.isSelected(a)}});Ext.define("Ext.grid.ColumnLayout",{extend:Ext.layout.container.HBox,alias:"layout.gridcolumn",type:"gridcolumn",reserveOffset:false,firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){var a=this;if(a.scrollbarWidth===undefined){a.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}a.grid=a.owner.up("tablepanel");a.controllingGrid=a.owner.up("[scrollerOwner]");a.callParent()},beginLayout:function(c){var h=this,b=h.owner,a=h.controllingGrid,k=h.grid.view,g=h.getVisibleItems(),f=g.length,d=h.firstHeaderCls,m=h.lastHeaderCls,j=[d,m],e,l;if(!k.scrollFlags.y){h.scrollbarWidth=0}else{delete h.scrollbarWidth}for(e=0;e<f;e++){l=g[e];l.margin=null;l.removeCls(j);if(e===0){l.addCls(d)}if(e===f-1){l.addCls(m)}}h.scrollbarAdjustment=h.scrollbarWidth;h.callParent(arguments);if(!b.isColumn&&!a.collapsed&&k&&k.rendered&&(c.viewTable=k.body.dom)&&h.scrollbarWidth){c.viewContext=c.context.getCmp(k)}},injectViewContext:function(b,a){if(!this.controllingGrid.collapsed&&a.rendered&&(b.viewTable=a.body.dom)&&this.scrollbarWidth){b.viewContext=b.context.getCmp(a)}},roundFlex:function(a){return Math.floor(a)},calculate:function(h){var g=this,b=g.grid.view,d,a,c,f,e=false;g.viewScrollX=b.getScrollX();g.callParent(arguments);if(h.state.parallelDone&&g.owner.isRootHeader){d=h.target.getVisibleGridColumns();a=d.length;for(c=0;c<a;c++){f=h.context.getItem(null,d[c].el);if(!f.lastBox||f.props.width!==f.lastBox.width){(e||(e=[])).push(c)}}h.setProp("columnsChanged",e)}if(h.viewContext&&!h.state.tableHeight){h.state.tableHeight=h.viewTable?h.viewTable.offsetHeight:b.all.sumHeights()}},completeLayout:function(d){var b=this,a=b.owner,c=d.state;b.callParent(arguments);if(d.viewTable&&!c.flexesCalculated&&!d.flexedItems.length&&a.forceFit&&b.convertWidthsToFlexes(d)){b.cacheFlexes(d);d.invalidate({state:{flexesCalculated:true,tableHeight:d.viewTable.offsetHeight}})}else{delete d.props.columnChanged}},finishedLayout:function(b){var a=this.grid.getView();this.callParent(arguments);if(this.viewScrollX&&!this.owner.isColumn&&a.scrollFlags.x&&this.owner.tooNarrow&&this.owner.componentLayoutCounter){this.owner.setScrollX(this.viewScrollX)}},convertWidthsToFlexes:function(a){var f=this,d=0,g=f.sizeModels.calculated,c,e,b,j,h;c=a.childItems;e=c.length;for(b=0;b<e;b++){j=c[b];h=j.target;d+=j.props.width;if(!(h.fixed||h.resizable===false)){h.flex=a.childItems[b].flex=j.props.width;h.width=null;j.widthModel=g}}return d!==a.props.width},getContainerSize:function(f){var e=this,a,d=f.viewContext,c,g,b=d&&d.heightModel.shrinkWrap;if(e.owner.isColumn){a=e.getColumnContainerSize(f)}else{a=e.callParent(arguments);if(!a.gotAll){e.done=false;return a}if(e.scrollbarWidth&&!e.controllingGrid.reserveScrollbar&&d){g=d.target.componentLayout.ownerContext;if(!b&&d.target.scrollFlags.y&&(f.flexedItems&&f.flexedItems.length||e.owner.forceFit)&&g){c=d.getProp("height");if(isNaN(c)){e.done=false}else{if(f.state.tableHeight<=c&&d.target.scrollFlags.y){f.state.parallelDone=false;g.invalidate();return a}}}}}if(!b){a.width-=e.scrollbarWidth}return a},getColumnContainerSize:function(f){var h=f.paddingContext.getPaddingInfo(),b=0,e=0,g,d,c,a;if(!f.widthModel.shrinkWrap){++e;c=f.getProp("innerWidth");g=(typeof c=="number");if(g){++b;c-=h.width;if(c<0){c=0}}}if(!f.heightModel.shrinkWrap){++e;a=f.getProp("innerHeight");d=(typeof a=="number");if(d){++b;a-=h.height;if(a<0){a=0}}}return{width:c,height:a,needed:e,got:b,gotAll:b==e,gotWidth:g,gotHeight:d}},publishInnerCtSize:function(e){var d=this,a=d.owner,c=e.state.boxPlan.targetSize,b=e.peek("contentWidth");if((b!=null)&&!a.isColumn){c.width=b;if(a.ownerCt.view.scrollFlags.y){c.width+=d.scrollbarAdjustment}}return d.callParent(arguments)}});Ext.define("Ext.plugin.Abstract",{alternateClassName:"Ext.AbstractPlugin",disabled:false,isPlugin:true,stateEvents:undefined,constructor:function(a){if(a){this.pluginConfig=a;Ext.apply(this,a)}},clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},setCmp:function(a){this.cmp=a},getCmp:function(){return this.cmp},init:Ext.emptyFn,getState:null,applyState:null,destroy:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true},onClassExtended:function(b,d,a){var c=d.alias;if(c&&!d.ptype){if(Ext.isArray(c)){c=c[0]}b.prototype.ptype=c.split("plugin.")[1]}}});Ext.define("Ext.grid.plugin.HeaderResizer",{extend:Ext.plugin.Abstract,alias:"plugin.gridheaderresizer",disabled:false,config:{dynamic:false},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1000,eResizeCursor:"col-resize",init:function(b){var a=this;a.headerCt=b;b.on("render",a.afterHeaderRender,a,{single:a});if(!a.minColWidth){a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth}},destroy:function(){var a=this.tracker;if(a){delete a.onBeforeStart;delete a.onStart;delete a.onDrag;delete a.onEnd;a.destroy();this.tracker=null}},afterHeaderRender:function(){var b=this,c=b.headerCt,a=c.el;c.mon(a,"mousemove",b.onHeaderCtMouseMove,b);b.markerOwner=b.ownerGrid=b.headerCt.up("tablepanel");if(b.markerOwner.ownerLockable){b.markerOwner=b.markerOwner.ownerLockable}b.tracker=new Ext.dd.DragTracker({disabled:b.disabled,onBeforeStart:b.onBeforeStart.bind(b),onStart:b.onStart.bind(b),onDrag:b.onDrag.bind(b),onEnd:b.onEnd.bind(b),tolerance:3,autoStart:300,el:a})},onHeaderCtMouseMove:function(b){var a=this;if(a.headerCt.dragging||a.disabled){if(a.activeHd){a.activeHd.el.dom.style.cursor="";delete a.activeHd}}else{a.findActiveHeader(b)}},findActiveHeader:function(c){var b=this,g=c.getTarget("."+b.colHeaderCls,3,true),a,f,d;if(g){a=Ext.getCmp(g.id);if(a.isOnRightEdge(c)){if(b.headerCt.visibleColumnManager.getColumns().length===1&&b.headerCt.forceFit){return}f=a}else{if(a.isOnLeftEdge(c)){d=b.headerCt.visibleColumnManager.getColumns();f=d[Ext.Array.indexOf(d,a)-1];if(!f&&b.ownerGrid.ownerLockable&&!b.ownerGrid.isLocked){d=b.ownerGrid.ownerLockable.lockedGrid.headerCt.visibleColumnManager.getColumns();f=d[d.length-1]}}}if(f){if(f.isGroupHeader){d=f.getGridColumns();f=d[d.length-1]}if(f&&!(f.fixed||(f.resizable===false))){b.activeHd=f;a.el.dom.style.cursor=b.eResizeCursor;if(a.triggerEl){a.triggerEl.dom.style.cursor=b.eResizeCursor}}}else{a.el.dom.style.cursor="";if(a.triggerEl){a.triggerEl.dom.style.cursor=""}b.activeHd=null}}return b.activeHd},onBeforeStart:function(b){var a=this;a.dragHd=Ext.supports.Touch?a.findActiveHeader(b):a.activeHd;if(!!a.dragHd&&!a.headerCt.dragging){a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0];a.tracker.constrainTo=a.getConstrainRegion();return true}else{a.headerCt.dragging=false;return false}},getConstrainRegion:function(){var f=this,b=f.dragHd.el,e,g=f.ownerGrid,d=g.getSizeModel().width,c=d.shrinkWrap?f.headerCt.getWidth()-f.headerCt.visibleColumnManager.getColumns().length*f.minColWidth:f.maxColWidth,a;if(f.headerCt.forceFit){e=f.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(e&&f.headerInSameGrid(e)){c=b.getWidth()+(e.getWidth()-f.minColWidth)}}else{if(g.isLocked&&d.shrinkWrap){c=f.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(true)-g.getWidth()-(g.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*f.minColWidth+Ext.getScrollbarSize().width)}}a=f.adjustConstrainRegion(b.getRegion(),0,0,0,f.minColWidth);a.right=b.getX()+c;return a},onStart:function(g){var h=this,f=h.dragHd,b=f.el.getWidth(),d=f.getOwnerHeaderCt(),k,j,c,a,i,l;h.headerCt.dragging=true;h.origWidth=b;if(!h.dynamic){c=h.markerOwner;if(c.frame&&c.resizable){h.gridOverflowSetting=c.el.dom.style.overflow;c.el.dom.style.overflow="hidden"}k=h.getLeftMarkerX(c);a=c.getLhsMarker();i=c.getRhsMarker();l=h.ownerGrid.body.getHeight()+d.getHeight();j=d.getOffsetsTo(c)[1]-c.el.getBorderWidth("t");a.setLocalY(j);i.setLocalY(j);a.setHeight(l);i.setHeight(l);h.setMarkerX(a,k);h.setMarkerX(i,k+b)}},onDrag:function(b){var a=this;if(a.dynamic){a.doResize()}else{a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))}},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(b){var a=this,c;a.headerCt.dragging=false;if(a.dragHd){if(!a.dynamic){c=a.headerCt.up("tablepanel");if(c.ownerLockable){c=c.ownerLockable}if("gridOverflowSetting" in a){c.el.dom.style.overflow=a.gridOverflowSetting}a.setMarkerX(c.getLhsMarker(),-9999);a.setMarkerX(c.getRhsMarker(),-9999)}a.doResize()}a.onHeaderCtMouseMove(b)},doResize:function(){var c=this,b=c.dragHd,a,d=c.tracker.getOffset("point");if(b&&d[0]){if(b.flex){delete b.flex}Ext.suspendLayouts();c.adjustColumnWidth(d[0]-c.xDelta);if(c.headerCt.forceFit){a=b.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(a&&!c.headerInSameGrid(a)){a=null}if(a){delete a.flex;a.setWidth(a.getWidth()-d[0])}}Ext.resumeLayouts(true)}},headerInSameGrid:function(b){var a=this.dragHd.up("tablepanel");return !!b.up(a)},disable:function(){var a=this.tracker;this.disabled=true;if(a){a.disable()}},enable:function(){var a=this.tracker;this.disabled=false;if(a){a.enable()}},calculateDragX:function(a){return this.tracker.getXY("point")[0]+this.xDelta-a.getX()-a.el.getBorderWidth("l")},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth("l")-1},setMarkerX:function(b,a){b.setLocalX(a)},adjustConstrainRegion:function(f,d,e,a,c){return f.adjust(d,e,a,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}});Ext.define("Ext.dd.DragZone",{extend:Ext.dd.DragSource,constructor:function(c,b){var d=this,a=d.containerScroll;d.callParent([c,b]);if(a){c=d.scrollEl||c;c=Ext.get(c);if(Ext.isObject(a)){c.ddScrollConfig=a}Ext.dd.ScrollManager.register(c)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}});Ext.define("Ext.grid.header.DragZone",{extend:Ext.dd.DragZone,colHeaderSelector:"."+Ext.baseCSSPrefix+"column-header",colInnerSelector:"."+Ext.baseCSSPrefix+"column-header-inner",maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;a.callParent([b.el]);a.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(b){if(b.getTarget(this.colInnerSelector)){var d=b.getTarget(this.colHeaderSelector),a,c;if(d){a=Ext.getCmp(d.id);if(!this.headerCt.dragging&&a.draggable&&!(a.isOnLeftEdge(b)||a.isOnRightEdge(b))){c=document.createElement("div");c.role="presentation";c.innerHTML=a.text;return{ddel:c,header:a}}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.headerCt.hideMenu();this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=false;this.callParent(arguments)},afterRepair:function(){this.callParent();this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}});Ext.define("Ext.dd.ScrollManager",{singleton:true,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this);a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this);this.doScroll=this.doScroll.bind(this);this.ddmInstance=a;this.els={};this.dragEl=null;this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null;b.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){var f=this;if(f.ddmInstance.dragCurrent){var a=f.proc,e=a.el,c=a.component,g=a.el.ddScrollConfig,h=g&&g.increment?g.increment:f.increment,b=g&&"animate" in g?g.animate:f.animate,d=function(){f.triggerRefresh()};if(b){if(b===true){b={callback:d}}else{b.callback=b.callback?Ext.Function.createSequence(b.callback,d):d}}if(c){h=h*f.dirTrans[a.dir];if(a.dir==="up"||a.dir==="down"){c.scrollBy(0,h,b)}else{c.scrollBy(h,0,b)}}else{e.scroll(a.dir,h,b)}if(!b){d()}}},clearProc:function(){var a=this.proc;if(a.id){clearInterval(a.id)}if(a.scroller){a.scroller.setSnapToBoundary(true);a.scroller.snapToBoundary()}a.id=0;a.el=a.component=a.scroller=null;a.dir=""},startProc:function(d,b){var e=this,g,f,c,a=e.proc;e.clearProc();a.el=d;a.dir=b;if(Ext.supports.touchScroll===2&&(c=d.component)&&d===c.getOverflowEl()){a.component=c;a.scroller=c.scrollManager.scroller;a.scroller.setSnapToBoundary(false)}g=d.ddScrollConfig?d.ddScrollConfig.ddGroup:undefined;f=(d.ddScrollConfig&&d.ddScrollConfig.frequency)?d.ddScrollConfig.frequency:e.frequency;if(g===undefined||e.ddmInstance.dragCurrent.ddGroup===g){a.id=Ext.interval(e.doScroll,f)}},onFire:function(g,j){var i=this,k,h,d,a,b,f,c;if(j||!i.ddmInstance.dragCurrent){return}if(!i.dragEl||i.dragEl!==i.ddmInstance.dragCurrent){i.dragEl=i.ddmInstance.dragCurrent;i.refreshCache()}k=g.getPoint();h=i.proc;d=i.els;for(a in d){b=d[a];f=b._region;c=b.ddScrollConfig||i;if(f&&f.contains(k)&&b.isScrollable()){if(f.bottom-k.y<=c.vthresh){if(h.el!==b){i.startProc(b,"down")}return}else{if(f.right-k.x<=c.hthresh){if(h.el!==b){i.startProc(b,"right")}return}else{if(k.y-f.top<=c.vthresh){if(h.el!==b){i.startProc(b,"up")}return}else{if(k.x-f.left<=c.hthresh){if(h.el!==b){i.startProc(b,"left")}return}}}}}}i.clearProc()},register:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.register(c[b])}}else{c=Ext.get(c);this.els[c.id]=c}},unregister:function(c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.unregister(c[b])}}else{c=Ext.get(c);delete this.els[c.id]}},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a){if(typeof a[b]=="object"){a[b]._region=a[b].getRegion()}}}});Ext.define("Ext.dd.DropTarget",{extend:Ext.dd.DDTarget,constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:true}])},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(a,c,b){if(this.overClass){this.el.removeCls(this.overClass)}return false},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.dd.Registry",{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(b,a){if(typeof b=="string"){return b}var c=b.id;if(!c&&a!==false){c="extdd-"+(++this.autoIdSeed);b.id=c}return c},register:function(d,e){e=e||{};if(typeof d=="string"){d=document.getElementById(d)}e.ddel=d;this.elements[this.getId(d)]=e;if(e.isHandle!==false){this.handles[e.ddel.id]=e}if(e.handles){var c=e.handles,b,a;for(b=0,a=c.length;b<a;b++){this.handles[this.getId(c[b])]=e}}},unregister:function(d){var f=this.getId(d,false),e=this.elements[f],c,b,a;if(e){delete this.elements[f];if(e.handles){c=e.handles;for(b=0,a=c.length;b<a;b++){delete this.handles[this.getId(c[b],false)]}}}},getHandle:function(a){if(typeof a!="string"){a=a.id}return this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){if(typeof a!="string"){a=a.id}return this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}});Ext.define("Ext.dd.DropZone",{extend:Ext.dd.DropTarget,getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var d=this.getTargetFromEvent(c);if(!d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(d,a,c,b);this.lastOverNode=d}return this.onNodeOver(d,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(b,f,d){var c=this,g=c.getTargetFromEvent(f),a=g?c.onNodeDrop(g,b,f,d):c.onContainerDrop(b,f,d);if(c.lastOverNode){c.onNodeOut(c.lastOverNode,b,f,d);c.lastOverNode=null}return a},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.define("Ext.grid.header.DropZone",{extend:Ext.dd.DropZone,colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b;a.ddGroup=a.getDDGroup();a.autoGroup=true;a.callParent([b.el])},destroy:function(){this.callParent();Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-top","data-sticky":true,html:"&#160;"});this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-bottom","data-sticky":true,html:"&#160;"})}return this.bottomIndicator},getLocation:function(d,b){var a=d.getXY()[0],c=Ext.fly(b).getRegion(),f;if((c.right-a)<=(c.right-c.left)/2){f="after"}else{f="before"}return{pos:f,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(y,o,u){var x=this,p=y.header,f=x.getLocation(u,o),j=f.header,d=f.pos,c,t,l,r,s,a,b,k,m,w,v,n,h,q,g;if(j===x.lastTargetHeader&&d===x.lastDropPos){return}c=p.nextSibling("gridcolumn:not([hidden])");t=p.previousSibling("gridcolumn:not([hidden])");x.lastTargetHeader=j;x.lastDropPos=d;if(!j.draggable&&d==="before"&&j.getIndex()===0){return false}y.dropLocation=f;if((p!==j)&&((d==="before"&&c!==j)||(d==="after"&&t!==j))&&!j.isDescendantOf(p)){n=Ext.dd.DragDropManager.getRelated(x);h=n.length;q=0;for(;q<h;q++){g=n[q];if(g!==x&&g.invalidateDrop){g.invalidateDrop()}}x.valid=true;l=x.getTopIndicator();r=x.getBottomIndicator();if(d==="before"){s="bc-tl";a="tc-bl"}else{s="bc-tr";a="tc-br"}b=l.getAlignToXY(j.el,s);k=r.getAlignToXY(j.el,a);m=x.headerCt.el;w=m.getX()-x.indicatorXOffset;v=m.getX()+m.getWidth();b[0]=Ext.Number.constrain(b[0],w,v);k[0]=Ext.Number.constrain(k[0],w,v);l.setXY(b);r.setXY(k);l.show();r.show()}else{x.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(c,g,f,d){var h=this,j=d.header,a,k,b,i;if(d.header.el.dom===c){a=false}else{d.isLock=d.isUnlock=d.crossPanel=false;k=h.getLocation(f,c).header;a=(j.ownerCt===k.ownerCt);if(!a&&(!j.ownerCt.sealed&&!k.ownerCt.sealed)){a=true;b=j.up("tablepanel");i=k.up("tablepanel");if(b!==i){d.crossPanel=true;d.isLock=i.isLocked&&!b.isLocked;d.isUnlock=!i.isLocked&&b.isLocked;if((d.isUnlock&&j.lockable===false)||(d.isLock&&!j.isLockable())){a=false}}}}if(a){h.positionIndicator(d,c,f)}else{h.valid=false}return h.valid?h.dropAllowed:h.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide();a.getBottomIndicator().hide();a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(n,c,r,u){if(this.valid){var p=u.header,h=u.dropLocation,k=h.header,t=p.ownerCt,a=k.ownerCt,j=t===a,l=t.items.indexOf(u.header),o=a.items.indexOf(k),i=this.headerCt,d=i.visibleColumnManager,q=d.getHeaderIndex(p),b=k.isGroupHeader?a.items.indexOf(k):d.getHeaderIndex(k),m=p.isGroupHeader?p.query(":not([hidden]):not([isGroupHeader])").length:1,s=k.isGroupHeader?(h.pos==="after"):d.getHeaderIndex(k)>d.getHeaderIndex(p),g,f;if(h.pos==="after"){o++;b+=k.isGroupHeader?k.query(":not([hidden]):not([isGroupHeader])").length:1}if(u.isLock){g=t.up("[scrollerOwner]");g.lock(p,o,a)}else{if(u.isUnlock){g=t.up("[scrollerOwner]");g.unlock(p,o,a)}else{this.invalidateDrop();f=p.getWidth();if(j){if(o>l){o-=1}if(o===l){i.onHeaderMoved(p,m,q,b);return}}Ext.suspendLayouts();if(j){a.move(l,o)}else{if(s&&(b===o)){o-=1}t.isDDMoveInGrid=a.isDDMoveInGrid=!u.crossPanel;t.remove(p,false);a.insert(o,p);t.isDDMoveInGrid=a.isDDMoveInGrid=false}if(a.isGroupHeader){if(!j){p.savedFlex=p.flex;delete p.flex;p.width=f}}else{if(p.savedFlex){p.flex=p.savedFlex;delete p.width}}Ext.resumeLayouts(true);if(!j){i.onHeaderMoved(p,m,q,b)}}}}}});Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:Ext.plugin.Abstract,alias:"plugin.gridheaderreorderer",init:function(a){this.headerCt=a;a.on({render:this.onHeaderCtRender,single:true,scope:this})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt);a.dropZone=new Ext.grid.header.DropZone(a.headerCt);if(a.disabled){a.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}});Ext.define("Ext.grid.header.Container",{extend:Ext.container.Container,mixins:[Ext.util.FocusableContainer],border:true,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:false,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",menuSortAscCls:Ext.baseCSSPrefix+"hmenu-sort-asc",menuSortDescCls:Ext.baseCSSPrefix+"hmenu-sort-desc",menuColsIcon:Ext.baseCSSPrefix+"cols-icon",ddLock:false,dragging:false,enableFocusableContainer:false,sortable:true,enableColumnHide:true,initComponent:function(){var a=this;a.headerCounter=0;a.plugins=a.plugins||[];a.defaults=a.defaults||{};if(!a.isColumn){if(a.enableColumnResize){a.resizer=new Ext.grid.plugin.HeaderResizer();a.plugins.push(a.resizer)}if(a.enableColumnMove){a.reorderer=new Ext.grid.plugin.HeaderReorderer();a.plugins.push(a.reorderer)}}if(a.isColumn&&!a.isGroupHeader){if(!a.items||a.items.length===0){a.isContainer=false;a.focusable=true;a.layout={type:"container",calculate:Ext.emptyFn}}}else{a.layout=Ext.apply({type:"gridcolumn",align:"stretch"},a.initialConfig.layout);a.defaults.columnLines=a.columnLines;if(!a.isGroupHeader){a.isRootHeader=true;if(!a.hiddenHeaders){a.enableFocusableContainer=true;a.ariaRole="row"}a.columnManager=new Ext.grid.ColumnManager(false,a);a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);if(a.grid){a.grid.columnManager=a.columnManager;a.grid.visibleColumnManager=a.visibleColumnManager}}else{a.visibleColumnManager=new Ext.grid.ColumnManager(true,a);a.columnManager=new Ext.grid.ColumnManager(false,a)}}a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a);a.callParent()},initEvents:function(){var c=this,a=c.onHeaderCtEvent,b={click:a,dblclick:a,contextmenu:a,mouseover:c.onHeaderCtMouseOver,mouseout:c.onHeaderCtMouseOut,scope:c};if(Ext.supports.Touch){b.longpress=c.onHeaderCtLongPress}c.callParent();if(!c.isColumn&&!c.isGroupHeader){c.mon(c.el,b)}},onHeaderCtEvent:function(d,b){var c=this,h=c.getHeaderElByEvent(d),g,f,a;if(c.longPressFired){c.longPressFired=false;return}if(h&&!c.ddLock){g=Ext.getCmp(h.id);if(g){f=g[g.clickTargetName];if(d.within(f)){if(d.type==="click"||d.type==="tap"){a=g.onTitleElClick(d,f);if(a){c.onHeaderTriggerClick(a,d,Ext.supports.Touch?a.el:a.triggerEl)}else{c.onHeaderClick(g,d,b)}}else{if(d.type==="contextmenu"){c.onHeaderContextMenu(g,d,b)}else{if(d.type==="dblclick"&&g.resizable){g.onTitleElDblClick(d,f.dom)}}}}}}},onHeaderCtMouseOver:function(b,a){var f,d,c;if(!b.within(this.el,true)){f=b.getTarget("."+Ext.grid.column.Column.prototype.baseCls);d=f&&Ext.getCmp(f.id);if(d){c=d[d.clickTargetName];if(b.within(c)){d.onTitleMouseOver(b,c.dom)}}}},onHeaderCtMouseOut:function(f,c){var d="."+Ext.grid.column.Column.prototype.baseCls,b=f.getTarget(d),a=f.getRelatedTarget(d),h,g;if(b!==a){if(b){h=Ext.getCmp(b.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOut(f,g.dom)}}if(a){h=Ext.getCmp(a.id);if(h){g=h[h.clickTargetName];h.onTitleMouseOver(f,g.dom)}}}},onHeaderCtLongPress:function(b){var a=this,d=a.getHeaderElByEvent(b),c=Ext.getCmp(d.id);if(!c.menuDisabled){a.longPressFired=true;a.showMenuBy(d,c)}},getHeaderElByEvent:function(a){return a.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){if(this.hiddenHeaders){return false}return this.callParent()},getOwnerHeaderCt:function(){var a=this;return a.isRootHeader?a:a.up("[isRootHeader]")},onDestroy:function(){var a=this;if(a.menu){a.menu.un("hide",a.onMenuHide,a)}a.menuTask.cancel();a.callParent();Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu);a.columnManager=a.visibleColumnManager=null},applyColumnsState:function(e){if(!e||!e.length){return}var l=this,j=l.items.items,h=j.length,f=0,b=e.length,k,d,a,g,m=false;for(k=0;k<b;k++){a=e[k];for(g=h;g--;){d=j[g];if(d.getStateId&&d.getStateId()==a.id){if(f!==g){this.items.insert(f,this.items.getAt(g));m=true}if(d.applyColumnState){d.applyColumnState(a)}++f;break}}}if(m){l.purgeCache()}},getColumnsState:function(){var b=this,a=[],c;b.items.each(function(d){c=d.getColumnState&&d.getColumnState();if(c){a.push(c)}});return a},onAdd:function(b){var a=this;if(!b.headerId){b.headerId=b.initialConfig.id||Ext.id(null,"header-")}if(b.sortable===undefined){b.sortable=a.sortable}if(!b.getStateId()){b.stateId=b.initialConfig.id||("h"+(++a.headerCounter))}if(!a._usedIDs){a._usedIDs={}}if(a._usedIDs[b.headerId]){Ext.log.warn(this.$className+" attempted to reuse an existing id: "+b.headerId)}a._usedIDs[b.headerId]=true;a.callParent(arguments);a.onHeadersChanged(b,a.isDDMoveInGrid)},move:function(b,d){var c=this,a=c.items.items[b];a.visibleFromIdx=c.getOwnerHeaderCt().visibleColumnManager.indexOf(a);c.callParent(arguments)},onMove:function(a,d,g){var f=this,e=f.getOwnerHeaderCt(),b=e.visibleColumnManager,h=1,c;f.onHeadersChanged(a,true);c=b.indexOf(a);if(c>=a.visibleFromIdx){c++}f.callParent(arguments);if(a.isGroupHeader){h=a.visibleColumnManager.getColumns().length}e.onHeaderMoved(a,h,a.visibleFromIdx,c)},onRemove:function(d){var b=this,a=b.ownerCt;b.callParent(arguments);if(!b._usedIDs){b._usedIDs={}}delete b._usedIDs[d.headerId];if(!b.destroying){if(!b.isDDMoveInGrid){b.onHeadersChanged(d,false)}if(b.isGroupHeader&&!b.items.getCount()&&a){if(d.rendered){b.detachComponent(d)}Ext.suspendLayouts();a.remove(b);Ext.resumeLayouts(true)}}},onHeadersChanged:function(e,a){var b,d=this.getOwnerHeaderCt();this.purgeHeaderCtCache(this);if(d){d.onColumnsChanged();if(!e.isGroupHeader){b=d.ownerCt;if(b&&!a){b.onHeadersChanged(d,e)}}}},onHeaderMoved:function(f,a,c,e){var d=this,b=d.ownerCt;if(d.rendered){if(b&&b.onHeaderMove){b.onHeaderMove(d,f,a,c,e)}d.fireEvent("columnmove",d,f,c,e)}},onColumnsChanged:function(){var c=this,d=c.menu,a,b;if(c.rendered){c.fireEvent("columnschanged",c);if(d&&(a=d.child("#columnItemSeparator"))){b=d.child("#columnItem");a.destroy();b.destroy()}}},lookupComponent:function(b){var a=this.callParent(arguments);if(!a.isGroupHeader&&a.width===undefined&&!a.flex){a.width=this.defaultWidth}return a},setSortState:function(){var b=this.up("[store]").store,d=this.visibleColumnManager.getColumns(),a=d.length,c,f,e;for(c=0;c<a;c++){f=d[c];e=b.getSorters().get(f.getSortParam());f.setSortState(e)}},getHeaderMenu:function(){var b=this.getMenu(),a;if(b){a=b.child("#columnItem");if(a){return a.menu}}return null},onHeaderVisibilityChange:function(e,d){var b=this,c=b.getHeaderMenu(),a;b.purgeHeaderCtCache(e.ownerCt);if(c){a=b.getMenuItemForHeader(c,e);if(a){a.setChecked(d,true)}if(c.isVisible()){b.menuTask.delay(50)}}},updateMenuDisabledState:function(g){var f=this,d=f.query(":not([hidden])"),c,a=d.length,e,b,h;if(!g){g=f.getMenu()}for(c=0;c<a;++c){e=d[c];b=f.getMenuItemForHeader(g,e);if(b){h=e.isHideable()?"enable":"disable";if(b.menu){h+="CheckChange"}b[h]()}}},getMenuItemForHeader:function(a,b){return b?a.down("menucheckitem[headerId="+b.id+"]"):null},onHeaderShow:function(c){var b=this,a=b.ownerCt;if(b.forceFit){delete b.flex}b.onHeaderVisibilityChange(c,true);if(!c.isGroupHeader){if(a){a.onHeaderShow(b,c)}}b.fireEvent("columnshow",b,c);b.fireEvent("columnschanged",this)},onHeaderHide:function(c){var b=this,a=b.ownerCt;b.onHeaderVisibilityChange(c,false);if(!c.isGroupHeader){if(a){a.onHeaderHide(b,c)}}b.fireEvent("columnhide",b,c);b.fireEvent("columnschanged",this)},tempLock:function(){this.ddLock=true;Ext.Function.defer(function(){this.ddLock=false},200,this)},onHeaderResize:function(d,a){var c=this,b=c.ownerCt;if(b){b.onHeaderResize(c,d,a)}c.fireEvent("columnresize",c,d,a)},onHeaderClick:function(c,b,a){c.fireEvent("headerclick",this,c,b,a);this.fireEvent("headerclick",this,c,b,a)},onHeaderContextMenu:function(c,b,a){c.fireEvent("headercontextmenu",this,c,b,a);this.fireEvent("headercontextmenu",this,c,b,a)},onHeaderTriggerClick:function(d,c,a){var b=this;if(d.fireEvent("headertriggerclick",b,d,c,a)!==false&&b.fireEvent("headertriggerclick",b,d,c,a)!==false){b.showMenuBy(a,d)}},showMenuBy:function(b,f){var d=this.getMenu(),e=d.down("#ascItem"),c=d.down("#descItem"),a;d.activeHeader=d.ownerCmp=f;f.setMenuActive(true);a=f.sortable?"enable":"disable";if(e){e[a]()}if(c){c[a]()}d.showBy(b,"tl-bl?")},hideMenu:function(){if(this.menu){this.menu.hide()}},onMenuHide:function(a){a.activeHeader.setMenuActive(false)},moveHeader:function(a,b){this.tempLock();this.move(a,b)},purgeHeaderCtCache:function(a){while(a){a.purgeCache();if(a.isRootHeader){return}a=a.ownerCt}},purgeCache:function(){var c=this,b=c.visibleColumnManager,a=c.columnManager;c.gridVisibleColumns=c.gridDataColumns=c.hideableColumns=null;if(b){b.invalidate();a.invalidate()}},getMenu:function(){var a=this;if(!a.menu){a.menu=new Ext.menu.Menu({hideOnParentHide:false,items:a.getMenuItems(),listeners:{beforeshow:a.beforeMenuShow,hide:a.onMenuHide,scope:a}});a.fireEvent("menucreate",a,a.menu)}return a.menu},beforeMenuShow:function(e){var c=this,b=e.child("#columnItem"),a,d,e;if(!b){a=c.enableColumnHide?c.getColumnMenu(c):null;d=c.sortable?2:0;if(a&&a.length){e.insert(d,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:{items:a},hideOnClick:false}])}}c.updateMenuDisabledState(c.menu)},getMenuItems:function(){var c=this,b=[],a=c.enableColumnHide?c.getColumnMenu(c):null;if(c.sortable){b=[{itemId:"ascItem",text:c.sortAscText,iconCls:c.menuSortAscCls,handler:c.onSortAscClick,scope:c},{itemId:"descItem",text:c.sortDescText,iconCls:c.menuSortDescCls,handler:c.onSortDescClick,scope:c}]}if(a&&a.length){if(c.sortable){b.push({itemId:"columnItemSeparator",xtype:"menuseparator"})}b.push({itemId:"columnItem",text:c.columnsText,iconCls:c.menuColsIcon,menu:a,hideOnClick:false})}return b},onSortAscClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("ASC")},onSortDescClick:function(){var b=this.getMenu(),a=b.activeHeader;a.sort("DESC")},getColumnMenu:function(f){var c=[],b=0,e,a=f.query(">gridcolumn[hideable]"),g=a.length,d;for(;b<g;b++){e=a[b];d=new Ext.menu.CheckItem({text:e.menuText||e.text,checked:!e.hidden,hideOnClick:false,headerId:e.id,menu:e.isGroupHeader?this.getColumnMenu(e):undefined,checkHandler:this.onColumnCheckChange,scope:this});c.push(d)}return c},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);if(c.rendered){c[b?"show":"hide"]()}else{c.hidden=!b}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var c=0,b=this.getVisibleGridColumns(),d=b.length,a;for(a=0;a<d;a++){c+=b[a].getCellWidth()||0}return c},getVisibleGridColumns:function(){if(this.gridVisibleColumns){return this.gridVisibleColumns}var c=this.getGridColumns(),e,b=[],a=c.length,d;for(d=0;d<a;d++){if(!c[d].hidden){e=c[d];e.visibleIndex=b.length;b[b.length]=e}}this.gridVisibleColumns=b;return b},getGridColumns:function(g,a){if(!g&&this.gridDataColumns){return this.gridDataColumns}var f=this,j=g||[],e,b,d,h,c;a=a||f.hidden;if(f.items){e=f.items.items;for(b=0,d=e.length;b<d;b++){h=e[b];if(h.isGroupHeader){h.getGridColumns(j,a)}else{h.hiddenAncestor=a;j.push(h)}}}if(!g){f.gridDataColumns=j}if(!g&&d){for(b=0,d=j.length;b<d;b++){h=j[b];h.fullColumnIndex=b;h.isFirstVisible=h.isLastVisible=false;if(!(h.hidden||h.hiddenAncestor)){if(!c){h.isFirstVisible=true}c=h}}if(c){c.isLastVisible=true}}return j},getHideableColumns:function(){var b=this,a=b.hideableColumns;if(!a){a=b.hideableColumns=b.query("[hideable]")}return a},getHeaderIndex:function(a){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){if(!this.visibleColumnManager){this.visibleColumnManager=this.getOwnerHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(g){var m=this,n=m.view,b=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,d=false,r=Ext.grid.header.Container.prototype.defaultWidth,a=m.el.dom.clientWidth-(n.el.dom.scrollHeight>n.el.dom.clientHeight?Ext.getScrollbarSize().width:0),e=0,l=m.getVisibleGridColumns(),h=g.hidden,k,f,q,j,c;function o(){for(f=0,k=l.length;f<k;f++){q=l[f];if(q===g){continue}q.flex=q.flex||q.width||q.getWidth();e+=q.flex;q.width=null}}function p(){var i;for(f=0,k=l.length;f<k;f++){q=l[f];i=(q===g);if(d&&!i){q.flex=b;q.width=null}else{if(!i){c=q.flex||r;q.flex=Math.max(Math.ceil((c/e)*a),b);q.width=null}}q.setWidth(q.width||q.flex)}}Ext.suspendLayouts();j=(a-((l.length+1)*b));g.flex=null;if(h){c=g.width||g.savedWidth;g.savedWidth=null}else{c=n.getMaxContentWidth(g)}if(c>j){g.width=j;d=true}else{g.width=c;a-=c+r;o()}p();Ext.resumeLayouts(true)},autoSizeColumn:function(b){var a=this.view;if(a){a.autoSizeColumn(b);if(this.forceFit){this.applyForceFit(b)}}},privates:{getFocusables:function(){return this.getVisibleGridColumns()},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{scope:b,down:b.showHeaderMenu,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey,space:b.toggleColumnSort,enter:b.toggleColumnSort})},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.triggerEl){this.onHeaderTriggerClick(a,b,a.triggerEl)}},toggleColumnSort:function(b){var a=this.getFocusableFromEvent(b);if(a&&a.sortable){a.toggleSortState();this.onHeaderClick(a,b,a.el)}},onFocusableContainerMousedown:Ext.privateFn}});Ext.define("Ext.grid.ColumnComponentLayout",{extend:Ext.layout.component.Auto,alias:"layout.columncomponent",type:"columncomponent",setWidthInDom:true,beginLayout:function(a){this.callParent(arguments);a.titleContext=a.getEl("titleEl");a.triggerContext=a.getEl("triggerEl")},beginLayoutCycle:function(b){var a=this.owner;this.callParent(arguments);if(b.widthModel.shrinkWrap){a.el.setWidth("")}a.titleEl.setStyle({paddingTop:"",paddingBottom:""})},publishInnerHeight:function(e,i){var g=this,b=g.owner,a,d,h,f,j,c;if(b.getOwnerHeaderCt().hiddenHeaders){e.setProp("innerHeight",0);return}a=i-e.getBorderInfo().height;d=a;if(b.headerWrap&&!e.hasDomProp("width")){g.done=false;return}if(e.hasRawContent){h=b.textEl.getHeight();if(h){d-=h;if(d>0){j=Math.floor(d/2);c=d-j;e.titleContext.setProp("padding-top",j);e.titleContext.setProp("padding-bottom",c)}}}else{e.setProp("innerHeight",a-b.titleEl.getHeight(),false)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){if(!a.hasRawContent){a.setProp("innerWidth",b-a.getBorderInfo().width,false)}},calculateOwnerHeightFromContentHeight:function(d,c){var b=this.callParent(arguments),a=this.owner;if(!d.hasRawContent){if(!a.headerWrap||d.hasDomProp("width")){return c+a.titleEl.getHeight()+d.getBorderInfo().height}return null}return b},calculateOwnerWidthFromContentWidth:function(f,b){var a=this.owner,e=f.getPaddingInfo().width,d=this.getTriggerOffset(a,f),c;if(a.isGroupHeader){c=b}else{c=Math.max(b,a.textEl.getWidth()+f.titleContext.getPaddingInfo().width)}return c+e+d},getTriggerOffset:function(a,c){var b=0;if(c.widthModel.shrinkWrap&&!a.menuDisabled){if(a.query(">:not([hidden])").length===0){b=a.self.triggerElWidth}}return b}});Ext.define("Ext.grid.column.Column",{extend:Ext.grid.header.Container,xtype:"gridcolumn",alternateClassName:"Ext.grid.Column",config:{triggerVisible:false},baseCls:Ext.baseCSSPrefix+"column-header",hoverCls:Ext.baseCSSPrefix+"column-header-over",handleWidth:Ext.supports.Touch?10:4,ariaRole:"columnheader",enableFocusableContainer:false,sortState:null,possibleSortStates:["ASC","DESC"],childEls:["titleEl","triggerEl","textEl"],headerWrap:false,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" {tipMarkup}class="',Ext.baseCSSPrefix,"column-header-inner",'<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<span id="{id}-textEl" data-ref="textEl" class="',Ext.baseCSSPrefix,"column-header-text",'{childElCls}">',"{text}","</span>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:true,resizable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",isHeader:true,isColumn:true,producesHTML:true,tabIndex:-1,ascSortCls:Ext.baseCSSPrefix+"column-header-sort-ASC",descSortCls:Ext.baseCSSPrefix+"column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:Ext.baseCSSPrefix+"group-sub-header",groupHeaderCls:Ext.baseCSSPrefix+"group-header",clickTargetName:"titleEl",detachOnRemove:true,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var a=this;if(a.header!=null){a.text=a.header;a.header=null}if(a.cellWrap){a.tdCls=(a.tdCls||"")+" "+Ext.baseCSSPrefix+"wrap-cell"}if(a.columns!=null){a.isGroupHeader=true;if(a.dataIndex){Ext.Error.raise("Ext.grid.column.Column: Group header may not accept a dataIndex")}if((a.width&&a.width!==Ext.grid.header.Container.prototype.defaultWidth)||a.flex){Ext.Error.raise("Ext.grid.column.Column: Group header does not support setting explicit widths or flexs. The group header width is calculated by the sum of its children.")}a.items=a.columns;a.columns=a.flex=a.width=null;a.cls=(a.cls||"")+" "+a.groupHeaderCls;a.sortable=a.resizable=false;a.align="center"}else{if(a.flex){a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}a.addCls(Ext.baseCSSPrefix+"column-header-align-"+a.align);a.setupRenderer();a.setupRenderer("edit");a.setupRenderer("summary");a.callParent(arguments)},bindFormatter:function(b){var a=this;return function(c){return b.format(c,b.scope||a.scope||a.resolveListenerScope())}},bindRenderer:function(b){var a=this;if(b in Ext.util.Format){Ext.log.warn('Use "formatter" config instead of "renderer" to use Ext.util.Format to format cell values')}a.hasCustomRenderer=true;return function(){return Ext.callback(b,a.scope,arguments,0,a)}},setupRenderer:function(b){b=b||"column";var c=this,e=c[c.formatterNames[b]],d=c[c.rendererNames[b]],a=b==="column",f;if(!e){if(d){if(typeof d==="string"){d=c[c.rendererNames[b]]=c.bindRenderer(d)}if(a){c.hasCustomRenderer=d.length>1}}else{if(a&&c.defaultRenderer){c.renderer=c.defaultRenderer;c.usingDefaultRenderer=true}}}else{f=e.indexOf("this.")===0;if(f){e=e.substring(5)}e=Ext.app.bind.Template.prototype.parseFormat(e);c[c.formatterNames[b]]=null;if(f){e.scope=null}else{if(!Ext.util.Format[e.fmt]){Ext.Error.raise('Invalid formatter specified: "'+e.fmt+'"')}}c[c.rendererNames[b]]=c.bindFormatter(e)}},getView:function(){var a=this.getOwnerHeaderCt();if(a){return a.view}},onResize:function(d,a,c,g){var e=this,b,f;e.callParent(arguments);if(c&&e.cellWrap){b=e.getView();if(b){f=b.bufferedRenderer;if(f){f.onWrappedColumnWidthChange(c,d)}}}},initItems:function(){var a=this;a.callParent(arguments);if(a.isGroupHeader){if(!a.hasVisibleChildColumns()){a.hide()}}},hasVisibleChildColumns:function(){var b=this.items.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.isColumn&&!d.hidden){return true}}return false},onAdd:function(b){var a=this;if(b.isColumn){b.isSubHeader=true;b.addCls(this.groupSubHeaderCls)}if(a.hidden&&b.isColumn){if(a.constructing){b.hide()}else{if(!b.hidden){a.show()}}}a.callParent(arguments)},onRemove:function(b){var a=this;if(b.isSubHeader){b.isSubHeader=false;b.removeCls(a.groupSubHeaderCls)}a.callParent(arguments);if(!(a.isDestroyed||a.destroying)&&a.isGroupHeader&&!a.hasVisibleChildColumns()){a.hide()}},initRenderData:function(){var b=this,e="",c=b.tooltip,d=b.text,a=b.tooltipType=="qtip"?"data-qtip":"title";if(!Ext.isEmpty(c)){e=a+'="'+c+'" '}return Ext.applyIf(b.callParent(arguments),{text:d,empty:d==="&#160;"||d===" "||d==="",menuDisabled:b.menuDisabled,tipMarkup:e,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(b){var a=this;a.applyColumnsState(b.columns);if(b.hidden!=null){a.hidden=b.hidden}if(b.locked!=null){a.locked=b.locked}if(b.sortable!=null){a.sortable=b.sortable}if(b.width!=null){a.flex=null;a.width=b.width}else{if(b.flex!=null){a.width=null;a.flex=b.flex}}},getColumnState:function(){var e=this,b=e.items.items,a=b?b.length:0,d,c=[],f={id:e.getStateId()};e.savePropsToState(["hidden","sortable","locked","flex","width"],f);if(e.isGroupHeader){for(d=0;d<a;d++){c.push(b[d].getColumnState())}if(c.length){f.columns=c}}else{if(e.isSubHeader&&e.ownerCt.hidden){delete e.hidden}}if("width" in f){delete f.flex}return f},getStateId:function(){return this.stateId||this.headerId},setText:function(a){this.text=a;if(this.rendered){this.textEl.setHtml(a)}},getIndex:function(){return this.isGroupColumn?false:this.getOwnerHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.visibleIndex!=null?this.visibleIndex:this.isGroupColumn?false:Ext.Array.indexOf(this.getOwnerHeaderCt().getVisibleGridColumns(),this)},beforeRender:function(){var b=this,a=b.up("tablepanel");b.callParent();if(a){if((!b.sortable||a.sortableColumns===false)&&!b.groupable&&!b.lockable&&(a.enableColumnHide===false||!b.getOwnerHeaderCt().getHideableColumns().length)){b.menuDisabled=true}}if(b.cellWrap){b.variableRowHeight=true}b.protoEl.unselectable()},afterRender:function(){var b=this,a=b.triggerEl;b.callParent(arguments);if(a&&b.self.triggerElWidth===undefined){a.setStyle("display","block");b.self.triggerElWidth=a.getWidth();a.setStyle("display","")}},afterComponentLayout:function(d,a,c,f){var e=this,b=e.getOwnerHeaderCt();e.callParent(arguments);if(b&&(c!=null||e.flex)&&d!==c){b.onHeaderResize(e,d)}},onDestroy:function(){var a=this;Ext.destroy(a.field);a.field=null;a.callParent(arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){if(this.triggerEl){this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(f,a){var c=this,b,d,g;if(c.isOnLeftEdge(f)){b=c.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(b&&b.getOwnerHeaderCt()===c.getOwnerHeaderCt()){b.autoSize()}}else{if(c.isOnRightEdge(f)){if(c.isGroupHeader&&f.getPoint().isContainedBy(c.layout.innerCt)){d=c.query("gridcolumn:not([hidden]):not([isGroupHeader])");c.getOwnerHeaderCt().autoSizeColumn(d[d.length-1]);return}else{g=c.getOwnerHeaderCt();if(g.visibleColumnManager.getColumns().length===1&&g.forceFit){return}}c.autoSize()}}},autoSize:function(){var b=this,c,e,a,d;if(b.isGroupHeader){c=b.query("gridcolumn:not([hidden]):not([isGroupHeader])");e=c.length;d=this.getOwnerHeaderCt();Ext.suspendLayouts();for(a=0;a<e;a++){d.autoSizeColumn(c[a])}Ext.resumeLayouts(true);return}this.getOwnerHeaderCt().autoSizeColumn(this)},onTitleElClick:function(f,c){var d=this,a,b;if(Ext.supports.Touch){b=d.previousSibling(":not([hidden])");if(!d.menuDisabled&&d.isOnRightEdge(f,parseInt(d.triggerEl.getStyle("width")))){if(!d.menuDisabled){a=d}}else{if(b&&!b.menuDisabled&&d.isOnLeftEdge(f)){a=b}}}else{a=d.triggerEl&&(f.target===d.triggerEl.dom||c===d.triggerEl.dom||f.within(d.triggerEl))?d:null}if(!a&&!d.isOnLeftEdge(f)&&!d.isOnRightEdge(f)||f.getKey()){d.toggleSortState()}return a},processEvent:function(f,b,a,c,d,g){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var b=this,a,c;if(b.sortable){a=Ext.Array.indexOf(b.possibleSortStates,b.sortState);c=(a+1)%b.possibleSortStates.length;b.sort()}},sort:function(d){var c=this,b=c.up("tablepanel"),a=b.store;Ext.suspendLayouts();c.sorting=true;a.sort(c.getSortParam(),d,b.multiColumnSort?"multi":"replace");delete c.sorting;Ext.resumeLayouts(true)},getSortParam:function(){return this.dataIndex},setSortState:function(g){var c=this,d=g&&g.getDirection(),f=c.ascSortCls,b=c.descSortCls,a=c.getOwnerHeaderCt(),e;switch(d){case"DESC":if(!c.hasCls(b)){c.addCls(b);c.sortState="DESC";e=true}c.removeCls(f);break;case"ASC":if(!c.hasCls(f)){c.addCls(f);c.sortState="ASC";e=true}c.removeCls(b);break;default:c.removeCls([f,b]);c.sortState=null;break}if(e){a.fireEvent("sortchange",a,c,d)}},isHideable:function(){var a={hideCandidate:this,result:this.hideable};if(a.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a])}return a.result},hasOtherMenuEnabledChildren:function(a){var b,c;if(!this.isXType("headercontainer")){a.result=false;return false}b=this.query(">:not([hidden]):not([menuDisabled])");c=b.length;if(Ext.Array.contains(b,a.hideCandidate)){c--}if(c){return false}a.hideCandidate=this},isLockable:function(){var a={result:this.lockable!==false};if(a.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a])}return a.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(a){if(!this.isXType("headercontainer")){a.result=false;return false}if(this.query(">:not([hidden])").length>1){return false}},hide:function(c){var h=this,e=h.getOwnerHeaderCt(),b=h.getRefOwner(),a,j,g,f,d;if(b.constructing){h.callParent();return h}if(h.rendered&&!h.isVisible()){return h}if(e.forceFit){h.visibleSiblingCount=e.getVisibleGridColumns().length-1;if(h.flex){h.savedWidth=h.getWidth();h.flex=null}}a=b.isGroupHeader;if(a&&!c){g=b.query(">:not([hidden])");if(g.length===1&&g[0]===h){h.ownerCt.hide();return}}Ext.suspendLayouts();if(h.isGroupHeader){g=h.items.items;for(d=0,f=g.length;d<f;d++){j=g[d];if(!j.hidden){j.hide(true)}}}h.callParent();e.onHeaderHide(h);Ext.resumeLayouts(true);return h},show:function(b,c){var h=this,e=h.getOwnerHeaderCt(),a=h.ownerCt,g,f,d,j;if(h.isVisible()){return h}if(h.rendered){if(e.forceFit){e.applyForceFit(h)}}Ext.suspendLayouts();if(h.isSubHeader&&a.hidden){a.show(false,true)}h.callParent(arguments);if(h.isGroupHeader&&c!==true&&!h.query(":not([hidden])").length){g=h.items.items;for(d=0,f=g.length;d<f;d++){j=g[d];if(j.hidden){j.show(true)}}}a=h.getOwnerHeaderCt();if(a){a.onHeaderShow(h)}Ext.resumeLayouts(true);return h},getCellWidth:function(){var b=this,a;if(b.rendered&&b.componentLayout&&b.componentLayout.lastComponentSize){a=b.componentLayout.lastComponentSize.width}else{if(b.width){a=b.width}else{if(!b.isColumn){a=b.getTableWidth()}}}return a},getCellId:function(){return Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellSelector:function(){return"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(a){return(a.getXY()[0]-this.getX()<this.handleWidth)},isOnRightEdge:function(b,a){return(this.getX()+this.getWidth()-b.getXY()[0]<=(a||this.handleWidth))},setMenuActive:function(a){this.titleEl[a?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}});Ext.define("Ext.grid.NavigationModel",{extend:Ext.view.NavigationModel,alias:"view.navigation.grid",focusCls:Ext.baseCSSPrefix+"grid-item-focused",getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,refresh:a.onViewRefresh,scope:a}},initKeyNav:function(a){var b=this;b.position=new Ext.grid.CellContext(a);b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"cellkeydown",processEvent:function(e,c,g,d,i,f,h){return h},up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},onCellMouseDown:function(c,a,f,b,h,e,d){var g=d.parentEvent;if(!g||g.type!=="touchstart"){this.setPosition(d.position,null,d)}},onCellClick:function(d,b,f,c,g,e,a){if(this.position.isEqual(a.position)){this.fireNavigateEvent(a)}else{this.setPosition(a.position,null,a)}},onItemMouseDown:function(l,f,o,h,a){var j=this,m,d,g,e,c,k,n=a.parentEvent;if(!n||n.type!=="touchstart"){if(!a.position.cellElement){m=a.getX();d=l.getVisibleColumnManager().getColumns();g=d.length;for(e=0;e<g;e++){c=d[e];k=d[e].getBox();if(m>=k.left&&m<k.right){j.setPosition(f,d[e],a);return}}}}},onItemClick:function(c,b,e,d,a){if(!a.position.cellElement){this.fireNavigateEvent(a)}},deferSetPosition:function(c,b,d,f,a,g){var e=this.view.getFocusTask();e.delay(c,this.setPosition,this,[b,d,f,a,g]);return e},setPosition:function(e,i,j,o,k){var l=this,n,g,a,b,c,h,f,m=e==null&&i==null,d=l.record==null&&l.recordIndex==null&&l.item==null;if(e&&e.isCellContext){n=e.view}else{if(j&&j.view){n=j.view}else{if(l.lastFocused){n=l.lastFocused.view}else{n=l.view}}}g=n.getSelectionModel();a=n.dataSource;n.getFocusTask().cancel();if(n.isDestroyed||!n.refreshCounter||m&&d){return}if(e&&e.isCellContext){h=e.record;b=e.rowIdx;c=e.colIdx;f=e.column}else{if(m){h=b=null}else{if(i==null){i=l.lastFocused?l.lastFocused.column:0}if(typeof e==="number"){b=Math.max(Math.min(e,a.getCount()-1),0);h=a.getAt(e)}else{if(e.isEntity){h=e;b=a.indexOf(h);if(b===-1){h=null}}else{if(e.tagName){h=n.getRecord(e);b=a.indexOf(h);if(b===-1){h=null}}else{if(d){return}m=true;h=b=null}}}}if(h){if(i==null){if(!(f=l.column)){c=0;f=n.getVisibleColumnManager().getColumns()[c]}}else{if(typeof i==="number"){f=n.getVisibleColumnManager().getColumns()[i];c=i}else{f=i;c=n.getVisibleColumnManager().indexOf(i)}}}else{m=true;f=c=null}}if(b===l.recordIndex&&c===l.columnIndex){return}if(l.cell){l.cell.removeCls(l.focusCls)}l.previousRecordIndex=l.recordIndex;l.previousRecord=l.record;l.previousItem=l.item;l.previousCell=l.cell;l.previousColumn=l.column;l.previousColumnIndex=l.columnIndex;l.previousPosition=l.position.clone();l.position.setAll(n,l.recordIndex=b,l.columnIndex=c,l.record=h,l.column=f);if(m){l.item=l.cell=null}else{l.focusPosition(l.position)}if(!o){g.fireEvent("focuschange",g,l.previousRecord,l.record);n.fireEvent("rowfocus",l.record,l.item,l.recordIndex);n.fireEvent("cellfocus",l.record,l.cell,l.position)}if(!k&&l.cell!==l.previousCell){l.fireNavigateEvent(j)}},focusPosition:function(a){var c=this,b,d;c.item=c.cell=null;if(a&&a.record&&a.column){b=a.view;if(a.rowElement){d=c.item=a.rowElement}else{d=b.getRowByRecord(a.record)}if(d){c.cell=a.cellElement||Ext.fly(d).down(a.column.getCellSelector(),true);if(c.cell){c.cell=new Ext.dom.Fly(c.cell);b.lastFocused=c.lastFocused=c.position.clone();c.focusItem(c.cell);b.focusEl=c.cell}else{c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}}else{d=a.rowIdx;c.position.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null;if(b.bufferedRenderer){b.bufferedRenderer.scrollTo(d,false,c.afterBufferedScrollTo,c)}}}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getCell:function(){return this.cell},getPosition:function(){var c=this,a=c.position,b;if(a.record&&a.column){b=a.view;if(b.dataSource.indexOf(a.record)===-1||b.getVisibleColumnManager().indexOf(a.column)==-1){a.setAll();c.record=c.column=c.recordIndex=c.columnIndex=null}else{return a}}},getLastFocused:function(){var c=this,a,b=c.lastFocused;if(b&&b.record&&b.column){a=b.view;if(a.dataSource.indexOf(b.record)!==-1&&a.getVisibleColumnManager().indexOf(b.column)!==-1){return b}}},onKeyUp:function(b){var a=b.view.walkRecs(b.record,-1);if(a){this.setPosition(a,this.columnIndex,b)}},onKeyDown:function(b){var a=b.record.isExpandingOrCollapsing?null:b.view.walkRecs(b.record,1);if(a){this.setPosition(a,this.columnIndex,b)}},onKeyRight:function(b){var a=this.move("right",b);if(a){this.setPosition(a,null,b)}},onKeyLeft:function(b){var a=this.move("left",b);if(a){this.setPosition(a,null,b)}},move:function(b,d){var c=this,a=c.getPosition();if(a&&a.record){return a.view.walkCells(a,b,null,c.preventWrap)}return null},onKeyPageDown:function(e){var d=this,a=e.view,f=d.getRowsVisible(),c,b;if(f){if(a.bufferedRenderer){c=Math.min(e.recordIndex+f,a.dataSource.getCount()-1);d.lastKeyEvent=e;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(e.record,f);d.setPosition(b,null,e)}}},onKeyPageUp:function(e){var d=this,a=e.view,f=d.getRowsVisible(),c,b;if(f){if(a.bufferedRenderer){c=Math.max(e.recordIndex-f,0);d.lastKeyEvent=e;a.bufferedRenderer.scrollTo(c,false,d.afterBufferedScrollTo,d)}else{b=a.walkRecs(e.record,-f);d.setPosition(b,null,e)}}},onKeyHome:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(0,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,0,c)}},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent)},onKeyEnd:function(c){var b=this,a=c.view;if(c.altKey){if(a.bufferedRenderer){b.lastKeyEvent=c;a.bufferedRenderer.scrollTo(a.store.getCount()-1,false,b.afterBufferedScrollTo,b)}else{b.setPosition(a.walkRecs(c.record,a.dataSource.getCount()-1-a.dataSource.indexOf(c.record)),null,c)}}else{b.setPosition(c.record,c.view.getVisibleColumnManager().getColumns().length-1,c)}},getRowsVisible:function(){var e=false,a=this.view,d=a.all.first(),b,c;if(d){b=d.getHeight();c=a.el.getHeight();e=Math.floor(c/b)}return e},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})}});Ext.define("Ext.form.field.VTypes",(function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(e){return b.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return a.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(e){return c.test(e)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return d.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()));Ext.define("Ext.form.trigger.Trigger",{alias:"trigger.trigger",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,baseCls:Ext.baseCSSPrefix+"form-trigger",focusCls:Ext.baseCSSPrefix+"form-trigger-focus",overCls:Ext.baseCSSPrefix+"form-trigger-over",clickCls:Ext.baseCSSPrefix+"form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(b){var c=this,a;Ext.apply(c,b);if(c.compat4Mode){a=c.cls;c.focusCls=[c.focusCls,a+"-focus"];c.overCls=[c.overCls,a+"-over"];c.clickCls=[c.clickCls,a+"-click"]}if(!c.validIdRe.test(c.id)){Ext.Error.raise('Invalid trigger "id": "'+c.id+'"')}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this,b=a.clickRepeater;if(b){b.destroy()}if(a.el){a.el.destroy()}a.el=null;a.isDestroyed=true},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=true;if(a){a.hide()}},initEvents:function(){var d=this,a=d.isFieldEnabled,c=d.getStateEl(),b=d.el;c.addClsOnOver(d.overCls,a,d);c.addClsOnClick(d.clickCls,a,d);if(d.repeatClick){d.clickRepeater=new Ext.util.ClickRepeater(b,{preventDefault:true,handler:d.onClick,listeners:{mousedown:d.onClickRepeaterMouseDown,scope:d},scope:d})}else{d.field.mon(b,{click:d.onClick,mousedown:d.onMouseDown,scope:d})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=false;if(a.hidden||!c||!a.rendered||a.isDestroyed){b=true}return !b},onClick:function(){var c=this,a=arguments,f=c.clickRepeater?a[1]:a[0],b=c.handler,d=c.field;if(b&&!d.readOnly&&c.isFieldEnabled()){Ext.callback(c.handler,c.scope,[d,c,f],0,d)}},resolveListenerScope:function(a){return this.field.resolveListenerScope(a)},onMouseDown:function(a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var b=this,a=b.el=b.field.triggerWrap.selectNode("#"+b.domId,false);a.setVisibilityMode(Ext.Element.DISPLAY);b.rendered=true},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,"bodyTpl").apply(b):""},renderTrigger:function(a){var c=this,b=c.width,d=c.hidden?"display:none;":"";if(b){d+="width:"+b}return Ext.XTemplate.getTpl(c,"renderTpl").apply({$trigger:c,fieldData:a,ui:a.ui,childElCls:a.childElCls,triggerId:c.domId=c.field.id+"-trigger-"+c.id,cls:c.cls,triggerStyle:d,extraCls:c.extraCls,baseCls:c.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?"hide":"show"]()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=false;if(a){a.show()}}});Ext.define("Ext.form.field.Text",{extend:Ext.form.field.Base,alias:"widget.textfield",alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",requiredCls:Ext.baseCSSPrefix+"form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",editable:true,repeatTriggerClick:false,triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",triggerWrapFocusCls:Ext.baseCSSPrefix+"form-trigger-wrap-focus",triggerWrapInvalidCls:Ext.baseCSSPrefix+"form-trigger-wrap-invalid",fieldBodyCls:Ext.baseCSSPrefix+"form-text-field-body",inputWrapCls:Ext.baseCSSPrefix+"form-text-wrap",inputWrapFocusCls:Ext.baseCSSPrefix+"form-text-wrap-focus",inputWrapInvalidCls:Ext.baseCSSPrefix+"form-text-wrap-invalid",growCls:Ext.baseCSSPrefix+"form-text-grow",monitorTab:true,mimicing:false,needArrowKeys:true,childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var b=this,a=b.emptyCls;if(b.allowOnlyWhitespace===false){b.allowBlank=false}if(b.size){Ext.log.warn('Ext.form.field.Text "size" config was deprecated in Ext 5.0. Please specify a "width" or use a layout instead.')}if(b.size){b.defaultBodyWidth=b.size*6.5+20}if(!b.onTrigger1Click){b.onTrigger1Click=b.onTriggerClick}b.callParent();b.setReadOnly(b.readOnly);b.fieldFocusCls=b.baseCls+"-focus";b.emptyUICls=a+" "+a+"-"+b.ui;b.addStateEvents("change")},initEvents:function(){var b=this,a=b.inputEl;b.callParent();if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(b,a){this.callParent(arguments);this.autoSize()},getSubTplData:function(b){var c=this,d=c.getRawValue(),f=c.emptyText&&d.length<1,a=c.maxLength,e;if(c.enforceMaxLength){if(a===Number.MAX_VALUE){a=undefined}}else{a=undefined}if(f){if(Ext.supports.Placeholder){e=c.emptyText}else{d=c.emptyText;c.valueContainsPlaceholder=true}}return Ext.apply(c.callParent(arguments),{triggerWrapCls:c.triggerWrapCls,inputWrapCls:c.inputWrapCls,triggers:c.orderedTriggers,maxLength:a,readOnly:!c.editable||c.readOnly,placeholder:e,value:d,fieldCls:c.fieldCls+((f&&(e||d))?" "+c.emptyUICls:"")+(c.allowBlank?"":" "+c.requiredCls)})},onRender:function(){var c=this,b=c.getTriggers(),d=[],e,a;if(Ext.supports.FixedTableWidthBug){c.el._needsTableWidthFix=true}c.callParent();if(b){this.invokeTriggers("onFieldRender");for(e in b){d.push(b[e].el)}a=c.triggerEl=c.triggerCell=new Ext.CompositeElement(d,true)}c.inputCell=c.inputWrap},afterRender:function(){var a=this;a.autoSize();a.callParent();this.invokeTriggers("afterFieldRender")},onMouseDown:function(){var a=this;if(!a.hasFocus){a.mon(a.inputEl,"mouseup",Ext.emptyFn,a,{single:true,preventDefault:true})}},applyTriggers:function(g){var h=this,c=h.getHideTrigger(),k=h.readOnly,l=h.orderedTriggers=[],j=h.repeatTriggerClick,b,f,d,a,e;if(h.rendered){Ext.Error.raise("Cannot set triggers after field has already been rendered.")}if((h.triggerCls&&!g)||h.trigger1Cls){Ext.log.warn("Ext.form.field.Text: 'triggerCls' and 'trigger<n>Cls' are deprecated.  Use 'triggers' instead.")}if(!g){g={};if(h.triggerCls&&!h.trigger1Cls){h.trigger1Cls=h.triggerCls}for(e=1;a=h["trigger"+e+"Cls"];e++){g["trigger"+e]={cls:a,extraCls:Ext.baseCSSPrefix+"trigger-index-"+e,handler:"onTrigger"+e+"Click",compat4Mode:true,scope:h}}}for(b in g){if(g.hasOwnProperty(b)){f=g[b];f.field=h;f.id=b;if((k&&f.hideOnReadOnly!==false)||(c&&f.hidden!==false)){f.hidden=true}if(j&&(f.repeatClick!==false)){f.repeatClick=true}d=g[b]=Ext.form.trigger.Trigger.create(f);l.push(d)}}Ext.Array.sort(l,Ext.form.trigger.Trigger.weightComparator);return g},invokeTriggers:function(a,c){var e=this,d=e.getTriggers(),f,b;if(d){for(f in d){if(d.hasOwnProperty(f)){b=d[f];b[a].apply(b,c||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){if(this.rendered){this.invokeTriggers(a?"hide":"show")}},setEditable:function(a){var b=this;b.editable=a;if(b.rendered){b.setReadOnlyAttr(!a||b.readOnly)}},setReadOnly:function(f){var d=this,c=d.getTriggers(),b=d.getHideTrigger(),a,e;f=!!f;d.callParent([f]);if(d.rendered){d.setReadOnlyAttr(f||!d.editable);if(c){for(e in c){a=c[e];if(a.hideOnReadOnly===true||(a.hideOnReadOnly!==false&&!b)){a[f?"hide":"show"].call(a)}}}}},setReadOnlyAttr:function(d){var b=this,a="readonly",c=b.inputEl.dom;if(d){c.setAttribute(a,a)}else{c.removeAttribute(a)}},processRawValue:function(b){var a=this,d=a.stripCharsRe,c;if(d){c=b.replace(d,"");if(c!==b){a.setRawValue(c);b=c}}return b},onDisable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){this.callParent();this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a);b.valueContainsPlaceholder=true}}if(c){b.inputEl.addCls(b.emptyUICls)}b.autoSize()}},afterFirstLayout:function(){this.callParent();if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable="on"}}},toggleInvalidCls:function(a){var b=a?"addCls":"removeCls";this.callParent();this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},beforeFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;b.callParent(arguments);if((a&&!Ext.supports.Placeholder)&&(c.dom.value===b.emptyText&&b.valueContainsPlaceholder)){b.setRawValue("");d=true;c.removeCls(b.emptyUICls);b.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){c.removeCls(b.emptyUICls)}}if(b.selectOnFocus||d){if(Ext.isWebKit){if(!b.inputFocusTask){b.inputFocusTask=new Ext.util.DelayedTask(b.focusInput,b)}b.inputFocusTask.delay(1)}else{b.focusInput()}}},focusInput:function(){var a=this.inputEl;if(a){a=a.dom;if(a){a.select()}}},onFocus:function(b){var a=this;a.callParent(arguments);if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;a.callParent(arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldBlur",[b]);a.postBlur()},postBlur:function(){var a=this.inputFocusTask;this.callParent(arguments);this.applyEmptyText();if(a){a.cancel()}},filterKeys:function(c){if(c.ctrlKey&&!c.altKey){return}var b=c.getKey(),a=String.fromCharCode(c.getCharCode());if((Ext.isGecko||Ext.isOpera)&&(c.isNavKeyPress()||b===c.BACKSPACE||(b===c.DELETE&&c.button===-1))){return}if((!Ext.isGecko&&!Ext.isOpera)&&c.isSpecialKey()&&!a){return}if(!this.maskRe.test(a)){c.stopEvent()}},getState:function(){return this.addPropertyToState(this.callParent(),"value")},applyState:function(a){this.callParent(arguments);if(a.hasOwnProperty("value")){this.setValue(a.value)}},getRawValue:function(){var b=this,a=b.callParent();if(a===b.emptyText&&b.valueContainsPlaceholder){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyUICls);a.valueContainsPlaceholder=false}a.callParent(arguments);a.applyEmptyText();return a},getErrors:function(k){k=arguments.length?(k==null?"":k):this.processRawValue(this.getRawValue());var f=this,i=f.callParent([k]),a=f.validator,d=f.vtype,g=Ext.form.field.VTypes,h=f.regex,j=Ext.String.format,b,e,c;if(Ext.isFunction(a)){b=a.call(f,k);if(b!==true){i.push(b)}}e=f.allowOnlyWhitespace?k:Ext.String.trim(k);if(e.length<1||(k===f.emptyText&&f.valueContainsPlaceholder)){if(!f.allowBlank){i.push(f.blankText)}if(!f.validateBlank){return i}c=true}if(!c&&k.length<f.minLength){i.push(j(f.minLengthText,f.minLength))}if(k.length>f.maxLength){i.push(j(f.maxLengthText,f.maxLength))}if(d){if(!g[d](k,f)){i.push(f.vtypeText||g[d+"Text"])}}if(h&&!h.test(k)){i.push(f.regexText||f.invalidText)}return i},selectText:function(h,a){var g=this,c=g.getRawValue(),d=true,f=g.inputEl.dom,e,b;if(c.length>0){h=h===e?0:h;a=a===e?c.length:a;if(f.setSelectionRange){f.setSelectionRange(h,a)}else{if(f.createTextRange){b=f.createTextRange();b.moveStart("character",h);b.moveEnd("character",a-c.length);b.select()}}d=Ext.isGecko||Ext.isOpera}if(d){g.focus()}},autoSize:function(){var e=this,d,i,b,g,h,c,a,f;if(e.grow&&e.rendered&&e.getSizeModel().width.auto){h=e.inputEl;d=e.getTriggers();g=0;f=Ext.util.Format.htmlEncode(h.dom.value||(e.hasFocus?"":e.emptyText)||"");f+=e.growAppend;for(i in d){g+=d[i].el.getWidth()}a=h.getTextWidth(f)+g+e.inputWrap.getBorderWidth("lr")+e.triggerWrap.getBorderWidth("lr");a=Math.min(Math.max(a,e.growMin),e.growMax);e.bodyEl.setWidth(a);e.updateLayout();e.fireEvent("autosize",e,a)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy");Ext.destroy(a.triggerRepeater);a.callParent();if(a.inputFocusTask){a.inputFocusTask.cancel();a.inputFocusTask=null}},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var b=this.getTriggers(),a=0,c;if(b&&this.rendered){for(c in b){if(b.hasOwnProperty(c)){a+=b[c].el.getWidth()}}}return a}}}}});Ext.define("Ext.resizer.BorderSplitter",{extend:Ext.resizer.Splitter,alias:"widget.bordersplitter",collapseTarget:null,getTrackerConfig:function(){var a=this.callParent();a.xclass="Ext.resizer.BorderSplitterTracker";return a}});Ext.define("Ext.layout.container.Border",{extend:Ext.layout.container.Container,alias:"layout.border",alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:[Ext.baseCSSPrefix+"border-item",Ext.baseCSSPrefix+"box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(l,b,v){var t=this,c=t.axisProps[v],q=!c.horizontal,k=c.sizeProp,o=0,a=l.childItems,f=a.length,s,p,n,g,r,e,j,m,d,u,h;for(p=0;p<f;++p){n=a[p];r=n.target;n.layoutPos={};if(r.region){n.region=e=r.region;n.isCenter=r.isCenter;n.isHorz=r.isHorz;n.isVert=r.isVert;n.weight=r.weight||t.regionWeights[e]||0;r.weight=n.weight;b[r.id]=n;if(r.isCenter){s=n;g=r.flex;l.centerRegion=s;continue}if(q!==n.isVert){continue}n.reverseWeighting=(e==c.borderEnd);m=r[k];d=typeof m;if(!r.collapsed){if(d=="string"&&(j=t.percentageRe.exec(m))){n.percentage=parseInt(j[1],10)}else{if(r.flex){o+=n.flex=r.flex}}}}}if(s){u=s.target;if((h=u.placeholderFor)){if(!g&&q===h.collapsedVertical()){g=0;s.collapseAxis=v}}else{if(u.collapsed&&(q===u.collapsedVertical())){g=0;s.collapseAxis=v}}}if(g==null){g=1}o+=g;return Ext.apply({before:q?"top":"left",totalFlex:o},c)},beginLayout:function(d){var k=this,j=k.getLayoutItems(),e=k.padding,l=typeof e,o=false,p,n,b,g,f,a,c,h,m;if(d.heightModel.shrinkWrap){Ext.Error.raise("Border layout does not currently support shrinkWrap height. Please specify a height on component: "+k.owner.id+", or use a container layout that sets the component's height.")}if(d.widthModel.shrinkWrap){Ext.Error.raise("Border layout does not currently support shrinkWrap width. Please specify a width on component: "+k.owner.id+", or use a container layout that sets the component's width.")}if(e){if(l=="string"||l=="number"){e=Ext.util.Format.parseBox(e)}}else{e=d.getEl("getTargetEl").getPaddingInfo();o=true}d.outerPad=e;d.padOnContainer=o;for(g=0,b=j.length;g<b;++g){n=j[g];a=k.getSplitterTarget(n);if(a){c=undefined;h=!!n.hidden;if(!a.split){if(a.isCollapsingOrExpanding){c=!!a.collapsed}}else{if(h!==a.hidden){c=!a.hidden}}if(c){n.show()}else{if(c===false){n.hide()}}}}k.callParent(arguments);j=d.childItems;b=j.length;f={};d.borderAxisHorz=k.beginAxis(d,f,"horz");d.borderAxisVert=k.beginAxis(d,f,"vert");for(g=0;g<b;++g){p=j[g];a=k.getSplitterTarget(p.target);if(a){m=f[a.id];if(!m){m=d.getEl(a.el,k);m.region=a.region}p.collapseTarget=a=m;p.weight=a.weight;p.reverseWeighting=a.reverseWeighting;a.splitter=p;p.isHorz=a.isHorz;p.isVert=a.isVert}}k.sortWeightedItems(j,"reverseWeighting");k.setupSplitterNeighbors(j)},calculate:function(d){var l=this,a=l.getContainerSize(d),h=d.childItems,c=h.length,b=d.borderAxisHorz,j=d.borderAxisVert,e=d.outerPad,n=d.padOnContainer,g,p,k,o,m,f;b.begin=e[l.padOnContainerProp];j.begin=e.top;m=b.end=b.flexSpace=a.width+(n?e[l.padOnContainerProp]:-e[l.padNotOnContainerProp]);f=j.end=j.flexSpace=a.height+(n?e.top:-e.bottom);for(g=0;g<c;++g){p=h[g];k=p.getMarginInfo();if(p.isHorz||p.isCenter){b.addUnflexed(k.width);m-=k.width}if(p.isVert||p.isCenter){j.addUnflexed(k.height);f-=k.height}if(!p.flex&&!p.percentage){if(p.isHorz||(p.isCenter&&p.collapseAxis==="horz")){o=p.getProp("width");b.addUnflexed(o);if(p.collapseTarget){m-=o}}else{if(p.isVert||(p.isCenter&&p.collapseAxis==="vert")){o=p.getProp("height");j.addUnflexed(o);if(p.collapseTarget){f-=o}}}}}for(g=0;g<c;++g){p=h[g];k=p.getMarginInfo();if(p.percentage){if(p.isHorz){o=Math.ceil(m*p.percentage/100);o=p.setWidth(o);b.addUnflexed(o)}else{if(p.isVert){o=Math.ceil(f*p.percentage/100);o=p.setHeight(o);j.addUnflexed(o)}}}}for(g=0;g<c;++g){p=h[g];if(!p.isCenter){l.calculateChildAxis(p,b);l.calculateChildAxis(p,j)}}if(l.finishAxis(d,j)+l.finishAxis(d,b)<2){l.done=false}else{l.finishPositions(h)}},calculateChildAxis:function(k,c){var a=k.collapseTarget,g="set"+c.sizePropCap,e=c.sizeProp,d=k.getMarginInfo()[e],i,b,f,h,j;if(a){i=a.region}else{i=k.region;f=k.flex}b=i==c.borderBegin;if(!b&&i!=c.borderEnd){k[g](c.end-c.begin-d);h=c.begin}else{if(f){j=Math.ceil(c.flexSpace*(f/c.totalFlex));j=k[g](j)}else{if(k.percentage){j=k.peek(e)}else{j=k.getProp(e)}}j+=d;if(b){h=c.begin;c.begin+=j}else{c.end=h=c.end-j}}k.layoutPos[c.posProp]=h},eachItem:function(g,d,c){var f=this,a=f.getLayoutItems(),b=0,e;if(Ext.isFunction(g)){d=g;c=d}for(b;b<a.length;b++){e=a[b];if(!g||e.region===g){if(d.call(c,e)===false){break}}}},finishAxis:function(d,c){var b=c.end-c.begin,a=d.centerRegion;if(a){a["set"+c.sizePropCap](b-a.getMarginInfo()[c.sizeProp]);a.layoutPos[c.posProp]=c.begin}return Ext.isNumber(b)?1:0},finishPositions:function(e){var c=e.length,b,a,d=this.horzPositionProp;for(b=0;b<c;++b){a=e[b];a.setProp("x",a.layoutPos.x+a.marginInfo[d]);a.setProp("y",a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var a=this.owner,e=(a&&a.items&&a.items.items)||[],d=e.length,b=[],c=0,f,g;for(;c<d;c++){f=e[c];g=f.placeholderFor;if(f.hidden||((!f.floated||f.isCollapsingOrExpanding===2)&&!(g&&g.isCollapsingOrExpanding===2))){b.push(f)}}return b},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,true)},getMinMaxWeight:function(d,a){var b=this,c=null;b.eachItem(d,function(e){if(e.hasOwnProperty("weight")){if(c===null){c=e.weight;return}if((a&&e.weight<c)||e.weight>c){c=e.weight}}},this);return c},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},insertSplitter:function(d,c,f,b){var g=d.region,e=Ext.apply({xtype:"bordersplitter",collapseTarget:d,id:d.id+"-splitter",hidden:f,canResize:d.splitterResize!==false,splitterFor:d,synthetic:true},b),a=c+((g==="south"||g==="east")?0:1);if(d.collapseMode==="mini"){e.collapsedCls=d.collapsedCls}d.splitter=this.owner.add(a,e)},getMoveAfterIndex:function(b){var a=this.callParent(arguments);if(b.splitter){a++}return a},moveItemBefore:function(b,d){var a=this.owner,c;if(d&&d.splitter){c=d.region;if(c==="south"||c==="east"){d=d.splitter}}return this.callParent([b,d])},onAdd:function(i,d){var f=this,c=i.placeholderFor,h=i.region,e,g,a,b;f.callParent(arguments);if(h){Ext.apply(i,f.regionFlags[h]);if(i.initBorderRegion){i.initBorderRegion()}e=h==="center";if(e){if(f.centerRegion){Ext.Error.raise("Cannot have multiple center regions in a BorderLayout.")}f.centerRegion=i}else{g=i.split;a=!!i.hidden;if(typeof g==="object"){b=g;g=true}if((i.isHorz||i.isVert)&&(g||i.collapseMode=="mini")){f.insertSplitter(i,d,a||!g,b)}}if(!e&&!i.hasOwnProperty("collapseMode")){i.collapseMode=f.panelCollapseMode}if(!i.hasOwnProperty("animCollapse")){if(i.collapseMode!=="placeholder"){i.animCollapse=false}else{i.animCollapse=f.panelCollapseAnimate}}}else{if(c){Ext.apply(i,f.regionFlags[c.region]);i.region=c.region;i.weight=c.weight}}},onDestroy:function(){this.centerRegion=null;this.callParent()},onRemove:function(b,d){var e=this,h=b.region,f=b.splitter,a=e.owner,g=a.destroying,c;if(h){if(b.isCenter){e.centerRegion=null}delete b.isCenter;delete b.isHorz;delete b.isVert;if(f&&!a.destroying){a.doRemove(f,true)}delete b.splitter}e.callParent(arguments);if(!g&&!d&&b.rendered){c=b.getEl();if(c){c.setStyle("top","");c.setStyle(e.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(l){var o={},e=l.length,n=this.touchedRegions,g,f,a,k,d,h,m,b,c;for(g=0;g<e;++g){h=l[g].target;m=h.region;if(h.isCenter){a=h}else{if(m){c=n[m];for(f=0,k=c.length;f<k;++f){d=o[c[f]];if(d){d.neighbors.push(h)}}if(h.placeholderFor){b=h.placeholderFor.splitter}else{b=h.splitter}if(b){b.neighbors=[]}o[m]=b}}}if(a){c=n.center;for(f=0,k=c.length;f<k;++f){d=o[c[f]];if(d){d.neighbors.push(a)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e){var d=this,a=this.sizePolicies,c,b,f,g;if(e.isCenter){g=e.placeholderFor;if(g){if(g.collapsedVertical()){return a.vert}return a.horz}if(e.collapsed){if(e.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}c=e.collapseTarget;if(c){return c.isVert?a.vert:a.horz}if(e.region){if(e.isVert){b=e.height;f=a.vert}else{b=e.width;f=a.horz}if(e.flex||(typeof b=="string"&&d.percentageRe.test(b))){return a.flexAll}return f}return d.autoSizePolicy}},function(){var a={addUnflexed:function(c){this.flexSpace=Math.max(this.flexSpace-c,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)});Ext.define("Ext.layout.component.Body",{alias:["layout.body"],extend:Ext.layout.component.Auto,type:"body",beginLayout:function(a){this.callParent(arguments);a.bodyContext=a.getEl("body")},beginLayoutCycle:function(d,b){var c=this,f=c.lastWidthModel,e=c.lastHeightModel,a=c.owner.body;c.callParent(arguments);if(f&&f.fixed&&d.widthModel.shrinkWrap){a.setWidth(null)}if(e&&e.fixed&&d.heightModel.shrinkWrap){a.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(c,b){var a=this.callParent(arguments);if(c.targetContext!=c){a+=c.getPaddingInfo().height}return a},calculateOwnerWidthFromContentWidth:function(c,a){var b=this.callParent(arguments);if(c.targetContext!=c){b+=c.getPaddingInfo().width}return b},measureContentWidth:function(a){return a.bodyContext.setWidth(a.bodyContext.el.dom.offsetWidth,false)},measureContentHeight:function(a){return a.bodyContext.setHeight(a.bodyContext.el.dom.offsetHeight,false)},publishInnerHeight:function(c,a){var d=a-c.getFrameInfo().height,b=c.targetContext;if(b!=c){d-=c.getPaddingInfo().height}return c.bodyContext.setHeight(d,!c.heightModel.natural)},publishInnerWidth:function(d,c){var a=c-d.getFrameInfo().width,b=d.targetContext;if(b!=d){a-=d.getPaddingInfo().width}d.bodyContext.setWidth(a,!d.widthModel.natural)}});Ext.define("Ext.window.Window",{extend:Ext.panel.Panel,alternateClassName:"Ext.Window",alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:Ext.baseCSSPrefix+"window-item",initialAlphaNum:/^[a-z0-9]/,overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=false;a.callParent();if(a.plain){a.addClsWithUI("plain")}a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var b=this,a;a=b.callParent();a.tabIndex=-1;return a},getState:function(){var b=this,d=b.callParent()||{},a=!!b.maximized,c=b.ghostBox,e;d.maximized=a;if(a){e=b.restorePos}else{if(c){e=[c.x,c.y]}else{e=b.getPosition()}}Ext.apply(d,{size:a?b.restoreSize:b.getSize(),pos:e});return d},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onRender:function(b,a){var c=this;c.callParent(arguments);c.focusable=!!c.getFocusEl();if(c.maximizable){c.header.on({scope:c,dblclick:c.toggleMaximize})}},afterRender:function(){var a=this,c=a.header,b;if(a.maximized){a.maximized=false;a.maximize();if(c){c.removeCls(c.indicateDragCls)}}a.callParent();if(a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a)}else{b=a.keyMap}if(b&&a.hidden){b.disable()}},onEsc:function(a,c){var b=Ext.FocusManager;if(!Ext.enableFocusManager||b.focusedCmp===this){c.stopEvent();this.close()}},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un("resize",a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}a.callParent()},addTools:function(){var a=this,c=[],b=[];a.callParent();if(a.minimizable){c.push({type:"minimize",handler:"minimize",scope:a})}if(a.maximizable){c.push({type:"maximize",handler:"toggleMaximize",scope:a})}if(c.length){a.addTool(c)}},getDefaultFocus:function(){var c=this,b,d=c.defaultButton||c.defaultFocus,a;if(d!==undefined){if(Ext.isNumber(d)){b=c.query("button")[d]}else{if(Ext.isString(d)){a=d;if(a.match(c.initialAlphaNum)){b=c.down(Ext.makeIdSelector(a))}if(!b){b=c.down(a)}}else{if(d.focus){b=d}}}}return b||c.el},onFocus:function(){var b=this,a;if(Ext.enableFocusManager||((a=b.getDefaultFocus())===b)){b.callParent(arguments)}else{a.focus()}},onShow:function(){var a=this;a.callParent(arguments);if(a.expandOnShow){a.expand(false)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction=="destroy"){a.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}a.callParent(arguments)},onWindowResize:function(){var b=this,a;if(!b.isDestroyed){if(b.maximized){b.fitContainer()}else{a=b.getSizeModel();if(a.width.natural||a.height.natural){b.updateLayout()}b.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,c=a.header,b=a.tools;if(c&&a.maximizable){c.suspendLayouts();b.maximize.hide();this.resumeHeaderLayout(true)}if(a.resizer){a.resizer.disable()}a.callParent(arguments)},afterExpand:function(){var a=this,d=a.header,b=a.tools,c;if(d){d.suspendLayouts();if(a.maximizable){b.maximize.show();c=true}this.resumeHeaderLayout(c)}if(a.resizer){a.resizer.enable()}a.callParent(arguments)},maximize:function(b){var e=this,h=e.header,f=e.tools,d=e.width,a=e.height,c,g;if(!e.maximized){e.expand(false);if(!e.hasSavedRestore){c=e.restoreSize={width:Ext.isNumber(d)?d:null,height:Ext.isNumber(a)?a:null};e.restorePos=e.getPosition(true)}if(h){h.suspendLayouts();if(f.maximize){f.maximize.setType("restore")}if(e.collapseTool){e.collapseTool.hide();g=true}e.resumeHeaderLayout(g)}e.el.disableShadow();if(e.dd){e.dd.disable();if(h){h.removeCls(h.indicateDragCls)}}if(e.resizer){e.resizer.disable()}e.el.addCls(Ext.baseCSSPrefix+"window-maximized");e.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct");e.syncMonitorWindowResize();e.fitContainer(b=(b||!!e.animateTarget)?{callback:function(){e.maximized=true;e.fireEvent("maximize",e)}}:null);if(!b){e.maximized=true;e.fireEvent("maximize",e)}}return e},restore:function(b){var c=this,d=c.tools,f=c.header,a=c.restoreSize,e;if(c.maximized){c.hasSavedRestore=null;c.removeCls(Ext.baseCSSPrefix+"window-maximized");if(f){f.suspendLayouts();if(d.maximize){d.maximize.setType("maximize")}if(c.collapseTool){c.collapseTool.show();e=true}c.resumeHeaderLayout(e)}a.x=c.restorePos[0];a.y=c.restorePos[1];c.setBox(a,b=(b||!!c.animateTarget)?{callback:function(){c.el.enableShadow(true);c.maximized=false;c.fireEvent("restore",c)}}:null);c.restorePos=c.restoreSize=null;if(c.dd){c.dd.enable();if(f){f.addCls(f.indicateDragCls)}}if(c.resizer){c.resizer.enable()}c.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct");c.syncMonitorWindowResize();if(!b){c.el.enableShadow(true);c.maximized=false;c.fireEvent("restore",c)}}return c},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,d=b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.isDestroyed;if(d&&!a){if(!c){Ext.on("resize",b.onWindowResize,b,{buffer:1});b._monitoringResize=true}}else{if(c){Ext.un("resize",b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=this.callParent(arguments);a.xtype="window";return a},privates:{getFocusEl:function(){return this.getDefaultFocus()},initDraggable:function(){this.initSimpleDraggable()},initResizable:function(){this.callParent(arguments);if(this.maximized){this.resizer.disable()}}}});Ext.define("Ext.app.domain.Controller",{extend:Ext.app.EventDomain,singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(b==="#"){a=!!d.isApplication}else{if(this.idMatchRe.test(b)){a=d.getId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}}return a}});Ext.define("Ext.container.Monitor",{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on("beforedestroy",a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un("beforedestroy",a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(c,b){var e=this,a=e.items,d=e.addHandler;if(!e.disabled){if(d){d.call(e.scope||b,b)}if(a){a.add(b)}}},onItemRemove:function(c,b){var e=this,a=e.items,d=e.removeHandler;if(!e.disabled){if(d){d.call(e.scope||b,b)}if(a){a.remove(b)}}},onContainerAdd:function(f,b){var j=this,h,g,c=j.handleAdd,a=j.handleRemove,d,e;if(f.isContainer){f.on("add",c,j);f.on("dockedadd",c,j);f.on("remove",a,j);f.on("dockedremove",a,j)}if(b!==true){h=f.query(j.selector);for(d=0,g=h.length;d<g;++d){e=h[d];j.onItemAdd(e.ownerCt,e)}}h=f.query(">container");for(d=0,g=h.length;d<g;++d){j.onContainerAdd(h[d],true)}},handleRemove:function(b,a){var c=this;if(!c.disabled){if(a.is(c.selector)){c.onItemRemove(b,a)}if(a.isQueryable){c.onContainerRemove(b,a)}}},onContainerRemove:function(e,c){var g=this,b,d,a,f;if(!c.isDestroyed&&!c.destroying&&c.isContainer){g.removeCtListeners(c);b=c.query(g.selector);for(d=0,a=b.length;d<a;++d){f=b[d];g.onItemRemove(f.ownerCt,f)}b=c.query("container");for(d=0,a=b.length;d<a;++d){g.removeCtListeners(b[d])}}else{g.invalidateItems(true)}},removeCtListeners:function(a){var b=this;a.un("add",b.handleAdd,b);a.un("dockedadd",b.handleAdd,b);a.un("remove",b.handleRemove,b);a.un("dockedremove",b.handleRemove,b)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var b=this,a=b.invalidateHandler;if(c&&a){a.call(b.scope||b,b)}b.items=null}});Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:Ext.layout.container.Auto,alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(c){var h=this,a=0,f,j,e,d,b,g;h.callParent(arguments);e=c.childItems;b=e.length;for(d=0;d<b;++d){j=e[d];f=j.target.anchorSpec;if(f){if(j.widthModel.calculated&&f.right){a|=1}if(j.heightModel.calculated&&f.bottom){a|=2}if(a==3){break}}}c.anchorDimensions=a;h.sanityCheck(c)},calculateItems:function(g,a){var p=this,k=g.childItems,f=k.length,n=a.gotHeight,h=a.gotWidth,e=a.height,c=a.width,b=(h?1:0)|(n?2:0),o=g.anchorDimensions,l,r,m,q,j,d;if(!o){return true}for(j=0;j<f;j++){r=k[j];m=r.getMarginInfo();l=r.target.anchorSpec;if(h&&r.widthModel.calculated){d=l.right(c)-m.width;d=p.adjustWidthAnchor(d,r);r.setWidth(d)}if(n&&r.heightModel.calculated){q=l.bottom(e)-m.height;q=p.adjustHeightAnchor(q,r);r.setHeight(q)}}return(b&o)===o},sanityCheck:function(c){var h=c.widthModel.shrinkWrap,e=c.heightModel.shrinkWrap,b=c.childItems,f,g,j,d,a;for(d=0,a=b.length;d<a;++d){j=b[d];g=j.target;f=g.anchorSpec;if(f){if(j.widthModel.calculated&&f.right){if(h){Ext.log({level:"warn",msg:"Right anchor on "+g.id+" in shrinkWrap width container"})}}if(j.heightModel.calculated&&f.bottom){if(e){Ext.log({level:"warn",msg:"Bottom anchor on "+g.id+" in shrinkWrap height container"})}}}}},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(c,f,b){if(c&&c!="none"){var d=this.anchorFactory,e;if(this.parseAnchorRE.test(c)){return d.standard(b-f)}if(c.indexOf("%")!=-1){return d.ratio(parseFloat(c.replace("%",""))*0.01)}e=parseInt(c,10);if(!isNaN(e)){return d.offset(e)}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(f){var e=this,a=e.owner,d=f.anchor,b,c,g;e.callParent(arguments);if(!f.anchor&&f.items&&!Ext.isNumber(f.width)){f.anchor=d=e.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize=="number"){c=a.anchorSize}else{c=a.anchorSize.width;g=a.anchorSize.height}}else{c=a.initialConfig.width;g=a.initialConfig.height}if(d){b=d.split(" ");f.anchorSpec={right:e.parseAnchor(b[0],f.initialConfig.width,c),bottom:e.parseAnchor(b[1],f.initialConfig.height,g)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(c){var e=c.anchorSpec,a="$",d=this.sizePolicy,b;if(e){b=this.owner.getSizeModel();if(e.right&&!b.width.shrinkWrap){d=d.r}if(e.bottom&&!b.height.shrinkWrap){a="b"}}return d[a]}});Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var c=this,a,b=c.form;return{success:c.onSuccess,failure:c.onFailure,scope:c,timeout:(this.timeout*1000)||(b.timeout*1000),upload:b.fileUpload?c.onSuccess:a}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}});Ext.define("Ext.form.action.Load",{extend:Ext.form.action.Action,alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),c=this.form;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;c.afterAction(this,false);return}c.clearInvalid();c.setValues(a.data);c.afterAction(this,true)},handleResponse:function(c){var a=this.form.reader,b,d;if(a){b=a.read(c);d=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:d}}return Ext.decode(c.responseText)}});Ext.define("Ext.form.action.Submit",{extend:Ext.form.action.Action,alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var b=this,a=b.form;if(b.clientValidation===false||a.isValid()){b.doSubmit()}else{b.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(b,false)}},doSubmit:function(){var d=this,b=Ext.apply(d.createCallback(),{url:d.getUrl(),method:d.getMethod(),headers:d.headers}),c=d.form,e=d.jsonSubmit||c.jsonSubmit,a=e?"jsonData":"params",f;if(c.hasUpload()){f=d.buildForm();b.form=f.formEl;b.isUpload=true}else{b[a]=d.getParams(e)}Ext.Ajax.request(b);if(f){d.cleanup(f)}},cleanup:function(g){var e=g.formEl,d=g.uploadEls,b=g.uploadFields,a=b.length,c,f;for(c=0;c<a;++c){f=b[c];if(!f.clearOnSubmit){f.restoreInput(d[c])}}if(e){Ext.removeNode(e)}},getParams:function(d){var c=false,b=this.callParent(),a=this.form.getValues(c,c,this.submitEmptyText!==c,d,true);return Ext.apply({},a,b)},buildForm:function(){var j=this,m=[],k,r,g=j.form,d=j.getParams(),c=[],a=[],f=g.getFields().items,e,h=f.length,l,q,o,p,n,b;for(e=0;e<h;++e){l=f[e];if(l.isFileUpload()){c.push(l)}}for(q in d){if(d.hasOwnProperty(q)){o=d[q];if(Ext.isArray(o)){n=o.length;for(p=0;p<n;p++){m.push(j.getFieldConfig(q,o[p]))}}else{m.push(j.getFieldConfig(q,o))}}}k={tag:"form",role:"presentation",action:j.getUrl(),method:j.getMethod(),target:j.target||"_self",style:"display:none",cn:m};if(c.length){k.encoding=k.enctype="multipart/form-data"}r=Ext.DomHelper.append(Ext.getBody(),k);h=c.length;for(e=0;e<h;++e){b=c[e].extractFileInput();r.appendChild(b);a.push(b)}return{formEl:r,uploadFields:c,uploadEls:a}},getFieldConfig:function(a,b){return{tag:"input",type:"hidden",name:a,value:Ext.String.htmlEncode(b)}},onSuccess:function(b){var c=this.form,d=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors){c.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;d=false}c.afterAction(this,d)},handleResponse:function(d){var a=this.form,c=a.errorReader,f,k,g,h,b,l;if(c){f=c.read(d);b=f.records;k=[];if(b){for(g=0,h=b.length;g<h;g++){k[g]=b[g].data}}if(k.length<1){k=null}l={success:f.success,errors:k}}else{try{l=Ext.decode(d.responseText)}catch(j){l={success:false,errors:[]}}}return l}});Ext.define("Ext.form.field.TextArea",{extend:Ext.form.field.Text,alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" role="{role}" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+"form-textarea",extraFieldBodyCls:Ext.baseCSSPrefix+"form-textarea-body",constructor:function(a){this.callParent([a]);if(this.cols){Ext.log.warn('Ext.form.field.TextArea "cols" config was removed in Ext 5.0. Please specify a "width" or use a layout instead.')}if(this.rows){Ext.log.warn('Ext.form.field.TextArea "rows" config was removed in Ext 5.0. Please specify a "height" or use a layout instead.')}},getSubTplData:function(b){var d=this,c=d.getFieldStyle(),a=d.callParent(arguments);if(d.grow){if(d.preventScrollbars){a.fieldStyle=(c||"")+";overflow:hidden;height:"+d.growMin+"px"}}return a},afterRender:function(){var a=this;a.callParent(arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on("paste",a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(a){a=this.stripReturns(a);return this.callParent([a])},stripReturns:function(a){if(a&&typeof a==="string"){a=a.replace(this.returnRe,"")}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,c=b.getValue(),a=b.maxLength;if(c.length>a){c=c.substr(0,a);b.setValue(c)}},fireKey:function(d){var b=this,a=d.getKey(),c;if(d.isSpecialKey()&&(b.enterIsSpecial||(a!==d.ENTER||d.hasModifier()))){b.fireEvent("specialkey",b,d)}if(b.needsMaxCheck&&a!==d.BACKSPACE&&a!==d.DELETE&&!d.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(d,a)){c=b.getValue();if(c.length>=b.maxLength){d.stopEvent()}}},isCutCopyPasteSelectAll:function(b,a){if(b.ctrlKey){return a===b.A||a===b.C||a===b.V||a===b.X}return false},autoSize:function(){var d=this,f,c,a,b,e;if(d.grow&&d.rendered&&d.getSizeModel().height.auto){f=d.inputEl;b=f.getWidth(true);e=Ext.util.Format.htmlEncode(f.dom.value)||"&#160;";e+=d.growAppend;e=e.replace(/\n/g,"<br/>");a=Ext.util.TextMetrics.measure(f,e,b).height+f.getPadding("tb")+d.inputWrap.getBorderWidth("tb")+d.triggerWrap.getBorderWidth("tb");a=Math.min(Math.max(a,d.growMin),d.growMax);d.bodyEl.setHeight(a);d.updateLayout();d.fireEvent("autosize",d,a)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}this.callParent()}});Ext.define("Ext.window.MessageBox",{extend:Ext.window.Window,alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,autoScroll:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:Ext.baseCSSPrefix+"message-box-icon",ariaRole:"alertdialog",makeButton:function(a){var b=this.buttonIds[a];return new Ext.button.Button({handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a){var b=this,c,d;if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){d=b.textArea}else{d=b.textField}c=d.getValue();d.reset()}b.hide();b.userCallback(a.itemId,c,b.cfg)},hide:function(){var b=this,a=b.cfg?b.cfg.cls:"";b.progressBar.reset();if(a){b.removeCls(a)}b.callParent(arguments)},constructor:function(a){var b=this;b.callParent(arguments);b.minWidth=b.defaultMinWidth=(b.minWidth||b.defaultMinWidth);b.maxWidth=b.defaultMaxWidth=(b.maxWidth||b.defaultMaxWidth);b.minHeight=b.defaultMinHeight=(b.minHeight||b.defaultMinHeight);b.maxHeight=b.defaultMaxHeight=(b.maxHeight||b.defaultMaxHeight)},initComponent:function(a){var e=this,b=e.id,d,c;e.title=e.title||"&#160;";e.iconCls=e.iconCls||"";e.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[e.iconComponent=new Ext.Component({cls:e.baseIconCls}),e.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[e.msg=new Ext.form.field.Display({id:b+"-displayfield",cls:e.baseCls+"-text"}),e.textField=new Ext.form.field.Text({id:b+"-textfield",enableKeyEvents:true,listeners:{keydown:e.onPromptKey,scope:e}}),e.textArea=new Ext.form.field.TextArea({id:b+"-textarea",height:75})]})]});e.progressBar=new Ext.ProgressBar({id:b+"-progressbar",margin:"0 10 10 10"});e.items=[e.topContainer,e.progressBar];e.msgButtons=[];for(d=0;d<4;d++){c=e.makeButton(d);e.msgButtons[c.itemId]=c;e.msgButtons.push(c)}e.bottomTb=new Ext.toolbar.Toolbar({id:b+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[e.msgButtons[0],e.msgButtons[1],e.msgButtons[2],e.msgButtons[3]]});e.dockedItems=[e.bottomTb];e.on("close",e.onClose,e);e.callParent()},onClose:function(){var a=this.header.child("[type=close]");a.itemId="cancel";this.btnCallback(a);delete a.itemId},onPromptKey:function(a,c){var b=this;if(c.keyCode===c.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes)}}}},reconfigure:function(b){var r=this,o=0,e=true,s=r.buttonText,d=r.resizer,m=r.header,q=m&&!m.isHeader,c=b&&(b.message||b.msg),t,k,g,n,p,f,a,h,l,j;r.updateButtonText();r.cfg=b=b||{};if(b.width){k=b.width}if(b.height){g=b.height}r.minWidth=b.minWidth||r.defaultMinWidth;r.maxWidth=b.maxWidth||r.defaultMaxWidth;r.minHeight=b.minHeight||r.defaultMinHeight;r.maxHeight=b.maxHeight||r.defaultMaxHeight;if(d){t=d.resizeTracker;d.minWidth=t.minWidth=r.minWidth;d.maxWidth=t.maxWidth=r.maxWidth;d.minHeight=t.minHeight=r.minHeight;d.maxHeight=t.maxHeight=r.maxHeight}delete r.defaultFocus;if(b.defaultFocus){r.defaultFocus=b.defaultFocus}r.animateTarget=b.animateTarget||undefined;r.modal=b.modal!==false;r.setTitle(b.title||(q&&m.title)||r.title);r.setIconCls(b.iconCls||(q&&m.iconCls)||r.iconCls);if(Ext.isObject(b.buttons)){r.buttonText=b.buttons;o=0}else{r.buttonText=b.buttonText||r.buttonText;o=Ext.isNumber(b.buttons)?b.buttons:0}o=o|r.updateButtonText();r.buttonText=s;Ext.suspendLayouts();delete r.width;delete r.height;if(k||g){if(k){r.setWidth(k)}if(g){r.setHeight(g)}}r.hidden=false;if(!r.rendered){r.render(Ext.getBody())}r.closable=b.closable!==false&&!b.wait;m=r.header;if(m){m.child("[type=close]").setVisible(r.closable);if(!b.title&&!r.closable&&!b.iconCls){m.hide()}else{m.show()}}r.liveDrag=!b.proxyDrag;r.userCallback=Ext.Function.bindCallback(b.callback||b.fn||Ext.emptyFn,b.scope||Ext.global);r.setIcon(b.icon);a=r.msg;if(c){a.setValue(c);a.show()}else{a.hide()}p=r.textArea;f=r.textField;if(b.prompt||b.multiline){r.multiline=b.multiline;if(b.multiline){p.setValue(b.value);p.setHeight(b.defaultTextHeight||r.defaultTextHeight);p.show();f.hide();r.defaultFocus=p}else{f.setValue(b.value);p.hide();f.show();r.defaultFocus=f}}else{p.hide();f.hide()}h=r.progressBar;if(b.progress||b.wait){h.show();r.updateProgress(0,b.progressText);j=b.wait;if(j===true){b=b.waitConfig}if(j){h.wait(j)}}else{h.hide()}l=r.msgButtons;for(n=0;n<4;n++){if(o&Math.pow(2,n)){if(!r.defaultFocus){r.defaultFocus=l[n]}l[n].show();e=false}else{l[n].hide()}}if(e){r.bottomTb.hide()}else{r.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var d=this,c=d.buttonText,b=0,e,a;for(e in c){if(c.hasOwnProperty(e)){a=d.msgButtons[e];if(a){if(d.cfg&&d.cfg.buttonText){b=b|Math.pow(2,Ext.Array.indexOf(d.buttonIds,e))}if(a.text!=c[e]){a.setText(c[e])}}}}return b},show:function(a){var c=this,b;a=a||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){c.show(a)},single:true});return c}c.reconfigure(a);if(a.cls){c.addCls(a.cls)}b=c.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");c.preventFocusOnActivate=!b.length;c.hidden=true;c.callParent();return c},onShow:function(){this.callParent(arguments);this.center()},updateText:function(a){this.msg.setValue(a)},setIcon:function(d,c,a){var e=this,f=e.iconComponent,b=e.messageIconCls;if(b){f.removeCls(b)}if(d){f.show();if(c||a){f.setSize(c||f.getWidth(),a||f.getHeight())}f.addCls(Ext.baseCSSPrefix+"dlg-icon");f.addCls(e.messageIconCls=d)}else{f.removeCls(Ext.baseCSSPrefix+"dlg-icon");f.hide()}return e},updateProgress:function(c,a,b){this.progressBar.updateProgress(c,a);if(b){this.updateText(b)}return this},onEsc:function(){if(this.closable!==false){this.callParent(arguments)}},confirm:function(a,d,c,b){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:d,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(f,d,c,b,a,e){if(Ext.isString(f)){f={prompt:true,title:f,minWidth:this.minPromptWidth,message:d,buttons:this.OKCANCEL,callback:c,scope:b,multiline:a,value:e}}return this.show(f)},wait:function(b,c,a){if(Ext.isString(b)){b={title:c,message:b,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:a}}return this.show(b)},alert:function(d,c,b,a){if(Ext.isString(d)){d={title:d,message:c,buttons:this.OK,fn:b,scope:a,minWidth:this.minWidth}}return this.show(d)},progress:function(c,b,a){if(Ext.isString(c)){c={title:c,message:b,progress:true,progressText:a}}return this.show(c)}},function(){Ext.MessageBox=Ext.Msg=new this()});Ext.define("Ext.form.Basic",{extend:Ext.util.Observable,alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(b,c){var d=this,a;d.owner=b;d.checkValidityTask=new Ext.util.DelayedTask(d.checkValidity,d);d.checkDirtyTask=new Ext.util.DelayedTask(d.checkDirty,d);d.checkErrorTask=new Ext.util.DelayedTask(d.checkError,d);d.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:d,addHandler:d.onFieldAdd,removeHandler:d.onFieldRemove,invalidateHandler:d.onMonitorInvalidate});d.monitor.bind(b);Ext.apply(d,c);if(Ext.isString(d.paramOrder)){d.paramOrder=d.paramOrder.split(/[\s,|]/)}a=d.reader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.reader=Ext.createByAlias("reader."+a.type,a)}a=d.errorReader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.errorReader=Ext.createByAlias("reader."+a.type,a)}d.callParent()},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var b=this,a=b.monitor;if(a){a.unbind();b.monitor=null}b.clearListeners();b.checkValidityTask.cancel();b.checkDirtyTask.cancel();b.checkErrorTask.cancel();b.checkValidityTask=b.checkDirtyTask=checkErrorTask=null;b.isDestroyed=true},onFieldAdd:function(b){var a=this;a.mon(b,"validitychange",a.checkValidityDelay,a);a.mon(b,"dirtychange",a.checkDirtyDelay,a);a.mon(b,"errorchange",a.checkErrorDelay,a);a.onMonitorInvalidate()},onFieldRemove:function(b){var a=this;a.mun(b,"validitychange",a.checkValidityDelay,a);a.mun(b,"dirtychange",a.checkDirtyDelay,a);a.mun(b,"errorchange",a.checkErrorDelay,a);a.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;Ext.suspendLayouts();b=a.getFields().filterBy(function(c){return !c.validate()});Ext.resumeLayouts(true);return b.length<1},checkValidity:function(){var b=this,a;if(b.isDestroyed){return}a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else{this.checkError()}},onValidityChange:function(f){var d=this.getBoundItems(),b,c,a,e;if(d){b=d.items;a=b.length;for(c=0;c<a;c++){e=b[c];if(e.disabled===f){e.setDisabled(!f)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else{this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.isDestroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){a=a||{};var b=this,c;if(a.standardSubmit||b.standardSubmit){c="standardsubmit"}else{c=b.api?"directsubmit":"submit"}return b.doAction(c,a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(c){c=c||this._record;if(!c){Ext.Error.raise("A record is required.");return this}var b=c.self.fields,d=this.getFieldValues(),g={},f=0,a=b.length,e;for(;f<a;++f){e=b[f].name;if(d.hasOwnProperty(e)){g[e]=d[e]}}c.beginEdit();c.set(g);c.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(c){var g=this,b=c.waitMsg,j=Ext.baseCSSPrefix+"mask-loading",d=g.getFields().items,e,i=d.length,h,a;for(e=0;e<i;e++){h=d[e];if(h.isFormField&&h.syncValue){h.syncValue()}}if(b){a=g.waitMsgTarget;if(a===true){g.owner.el.mask(b,j)}else{if(a){a=g.waitMsgTarget=Ext.get(a);a.mask(b,j)}else{g.floatingAncestor=g.owner.up("[floating]");if(g.floatingAncestor){g.savePreventFocusOnActivate=g.floatingAncestor.preventFocusOnActivate;g.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(b,c.waitTitle||g.waitTitle)}}}},afterAction:function(c,e){var a=this;if(c.waitMsg){var b=Ext.MessageBox,d=a.waitMsgTarget;if(d===true){a.owner.el.unmask()}else{if(d){d.unmask()}else{b.hide()}}}if(a.floatingAncestor){a.floatingAncestor.preventFocusOnActivate=a.savePreventFocusOnActivate}if(e){if(c.reset){a.reset()}Ext.callback(c.success,c.scope||c,[a,c]);a.fireEvent("actioncomplete",a,c)}else{Ext.callback(c.failure,c.scope||c,[a,c]);a.fireEvent("actionfailed",a,c)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(i){var d=this,g,a,b,f,c;function h(e,k){var j=d.findField(e);if(j){j.markInvalid(k)}}if(Ext.isArray(i)){a=i.length;for(g=0;g<a;g++){b=i[g];h(b.id,b.msg)}}else{if(i instanceof Ext.data.ErrorCollection){a=i.items.length;for(g=0;g<a;g++){b=i.items[g];h(b.field,b.message)}}else{for(c in i){if(i.hasOwnProperty(c)){f=i[c];h(c,f,i)}}}}return this},setValues:function(b){var d=this,a,c,f;function e(g,i){var h=d.findField(g);if(h){h.setValue(i);if(d.trackResetOnLoad){h.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(b)){c=b.length;for(a=0;a<c;a++){f=b[a];e(f.id,f.value)}}else{Ext.iterate(b,e)}Ext.resumeLayouts(true);return this},getValues:function(j,k,o,m,c){var n={},h=this.getFields().items,p=h.length,g=Ext.isArray,l,e,d,b,a,i;for(i=0;i<p;i++){l=h[i];if(!k||l.isDirty()){e=l[m?"getModelData":"getSubmitData"](o,c);if(Ext.isObject(e)){for(a in e){if(e.hasOwnProperty(a)){d=e[a];if(o&&d===""){d=l.emptyText||""}if(!l.isRadio){if(n.hasOwnProperty(a)){b=n[a];if(!g(b)){b=n[a]=[b]}if(g(d)){n[a]=b.concat(d)}else{b.push(d)}}else{n[a]=d}}else{n[a]=n[a]||d}}}}}}if(j){n=Ext.Object.toQueryString(n)}return n},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){Ext.suspendLayouts();var b=this,a=b.getFields().items,c,d=a.length;for(c=0;c<d;c++){a[c].clearInvalid()}Ext.resumeLayouts(true);return b},reset:function(b){Ext.suspendLayouts();var c=this,a=c.getFields().items,d,e=a.length;for(d=0;d<e;d++){a[d].reset()}Ext.resumeLayouts(true);if(b===true){delete c._record}return c},applyToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.apply(a[b],c)}return this},applyIfToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.applyIf(a[b],c)}return this}});Ext.define("Ext.form.FieldAncestor",{extend:Ext.Mixin,mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(b){var a=b.fieldDefaults,c=this.fieldDefaults;if(c){if(a){b.fieldDefaults=Ext.apply(Ext.Object.chain(a),c)}else{b.fieldDefaults=c}}},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a);a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a);a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(c,b){var a=this;if(c!==a){a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange(c,b)}},handleFieldErrorChange:function(b,a){var c=this;if(b!==c){c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange(b,a)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}});Ext.define("Ext.form.FieldSet",{extend:Ext.container.Container,mixins:{fieldAncestor:Ext.form.FieldAncestor},alias:"widget.fieldset",focusable:true,checkboxUI:"default",collapsed:false,toggleOnTitleClick:true,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,beforeDestroy:function(){var b=this,a=b.legend;if(a){delete a.ownerCt;a.destroy();b.legend=null}b.callParent()},initComponent:function(){var b=this,a=b.baseCls;b.initFieldAncestor();b.callParent();b.layout.managePadding=b.layout.manageOverflow=false;if(b.collapsed){b.addCls(a+"-collapsed");b.collapse()}if(b.title||b.checkboxToggle||b.collapsible){b.addTitleClasses();b.legend=Ext.widget(b.createLegendCt())}b.initMonitor()},initRenderData:function(){var a=this,b=a.callParent();b.bodyTargetCls=a.bodyTargetCls;a.protoBody.writeTo(b);delete a.protoBody;return b},getState:function(){var a=this.callParent();a=this.addPropertyToState(a,"collapsed");return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var c=this,a=[],b={xtype:"container",baseCls:c.baseCls+"-header",layout:"container",ui:c.ui,id:c.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+c.baseCls+"-header-text",items:a,ownerCt:c,shrinkWrap:true,ownerLayout:c.componentLayout};if(c.checkboxToggle){a.push(c.createCheckboxCmp())}else{if(c.collapsible){a.push(c.createToggleCmp())}}a.push(c.createTitleCmp());return b},createTitleCmp:function(){var b=this,a={xtype:"component",html:b.title,ui:b.ui,cls:b.baseCls+"-header-text",id:b.id+"-legendTitle"};if(b.collapsible&&b.toggleOnTitleClick){a.listeners={click:{element:"el",scope:b,fn:b.toggle}};a.cls+=" "+b.baseCls+"-header-text-collapsible"}return(b.titleCmp=Ext.widget(a))},createCheckboxCmp:function(){var b=this,c="-checkbox",a=b.baseCls+"-header"+c;a+=" "+a+"-"+b.ui;b.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:true,name:b.checkboxName||b.id+c,cls:a,id:b.id+"-legendChk",ui:b.checkboxUI,checked:!b.collapsed,msgTarget:"none",listeners:{change:b.onCheckChange,scope:b}});return b.checkboxCmp},createToggleCmp:function(){var a=this;a.toggleCmp=Ext.widget({xtype:"tool",cacheHeight:false,cls:a.baseCls+"-header-tool-"+a.ui,type:"toggle",handler:a.toggle,id:a.id+"-legendToggle",scope:a});return a.toggleCmp},doRenderLegend:function(b,e){var d=e.$comp,c=d.legend,a;if(c){c.ownerLayout.configureItem(c);a=c.getRenderTree();Ext.DomHelper.generateMarkup(a,b)}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var a=this.legend;return a?[a]:[]},setTitle:function(c){var b=this,a=b.legend;b.title=c;if(b.rendered){if(!a){b.legend=a=Ext.widget(b.createLegendCt());b.addTitleClasses();a.ownerLayout.configureItem(a);a.render(b.el,0)}b.titleCmp.update(c)}else{if(a){b.titleCmp.update(c)}else{b.addTitleClasses();b.legend=Ext.widget(b.createLegendCt())}}return b},addTitleClasses:function(){var b=this,c=b.title,a=b.baseCls;if(c){b.addCls(a+"-with-title")}if(c||b.checkboxToggle||b.collapsible){b.addCls(a+"-with-legend")}},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(b){var c=this,d=c.checkboxCmp,a=b?"expand":"collapse";if(!c.rendered||c.fireEvent("before"+a,c)!==false){b=!!b;if(d){d.setValue(b)}if(b){c.removeCls(c.baseCls+"-collapsed")}else{c.addCls(c.baseCls+"-collapsed")}c.collapsed=!b;if(b){delete c.getInherited().collapsed}else{c.getInherited().collapsed=true}if(c.rendered){c.updateLayout({isRoot:false});c.fireEvent(a,c)}}return c},getRefItems:function(a){var c=this.callParent(arguments),b=this.legend;if(b){c.unshift(b);if(a){c.unshift.apply(c,b.getRefItems(true))}}return c},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(a){this.bodyTargetCls=a},finishRender:function(){var a=this.legend;this.callParent();if(a){a.finishRender()}},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return a},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(e){var c=this,a=c.getProtoBody(),d=c.padding,b;if(d!==undefined){if(Ext.isIE8){d=c.parseBox(d);b=Ext.Element.parseBox(0);b.top=d.top;d.top=0;a.setStyle("padding",c.unitizeBox(b))}e.setStyle("padding",c.unitizeBox(d))}},onCheckChange:function(b,a){this.setExpanded(a)},setupRenderTpl:function(a){this.callParent(arguments);a.renderLegend=this.doRenderLegend}}});Ext.define("Ext.form.Panel",{extend:Ext.panel.Panel,mixins:{fieldAncestor:Ext.form.FieldAncestor},alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",ariaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();a.callParent();a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){this.callParent();this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){this.callParent(arguments);this.form.initialize()},createForm:function(){var b={},d=this.basicFormConfigs,a=d.length,c=0,e;for(;c<a;++c){e=d[c];b[e]=this[e]}return new Ext.form.Basic(this,b)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,b,c,a){return this.getForm().getValues(d,b,c,a)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();this.callParent()},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var a=this.form.getFields().items,b,c=a.length;for(b=0;b<c;b++){a[b].checkChange()}}});Ext.define("Ext.form.field.Picker",{extend:Ext.form.field.Text,alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",editable:true,applyTriggers:function(b){var c=this,a=b.picker;if(!a.cls){a.cls=c.triggerCls}return c.callParent([b])},initEvents:function(){var a=this;a.callParent();a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:false},scope:a,forceKeyDown:true});if(!a.editable){a.mon(a.inputEl,"click",a.onTriggerClick,a)}if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(){if(!this.isExpanded){this.onTriggerClick()}},expand:function(){var c=this,a,b,d;if(c.rendered&&!c.isExpanded&&!c.isDestroyed){c.expanding=true;a=c.bodyEl;b=c.getPicker();d=c.collapseIf;b.show();c.isExpanded=true;c.alignPicker();a.addCls(c.openCls);c.mon(Ext.getDoc(),{mousewheel:d,mousedown:d,scope:c});Ext.on("resize",c.alignPicker,c);c.fireEvent("expand",c);c.onExpand();delete c.expanding}},onExpand:Ext.emptyFn,alignPicker:function(){var c=this,b,a=c.getPicker();if(c.isExpanded){if(c.matchFieldWidth){b=c.bodyEl.getWidth();a.setWidth(b)}if(a.isFloating()){c.doAlign()}}},doAlign:function(){var d=this,c=d.picker,a="-above",b;d.picker.alignTo(d.triggerWrap,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){var d=this;if(d.isExpanded&&!d.isDestroyed&&!d.destroying){var c=d.openCls,b=d.picker,e=Ext.getDoc(),f=d.collapseIf,a="-above";b.hide();d.isExpanded=false;d.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);e.un("mousewheel",f,d);e.un("mousedown",f,d);Ext.un("resize",d.alignPicker,d);d.fireEvent("collapse",d);d.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.isDestroyed&&!b.within(a.bodyEl,false,true)&&!a.owns(b.target)){a.collapse()}},getPicker:function(){var b=this,a=b.picker;if(!a){b.picker=a=b.createPicker();a.ownerCmp=b}return b.picker},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}}},onOtherFocus:function(a){if(this.hasFocus&&!this.owns(a)){this.callParent([a])}},beforeDestroy:function(){var b=this,a=b.picker;b.collapse();b.callParent();Ext.un("resize",b.alignPicker,b);Ext.destroy(b.keyNav,a);if(a){delete b.picker;delete a.pickerField}}});Ext.define("Ext.layout.component.BoundList",{extend:Ext.layout.component.Auto,alias:"layout.boundlist",type:"component",beginLayout:function(d){var c=this,a=c.owner,b=a.pagingToolbar;c.scrollPos=a.listWrap.getScroll();c.callParent(arguments);if(a.floating){d.savedXY=a.getXY();a.setXY([0,-9999])}if(b){d.toolbarContext=d.context.getCmp(b)}d.listContext=d.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;this.callParent(arguments);if(b.heightModel.auto){a.el.setHeight("auto");a.listWrap.setHeight("auto")}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return true},finishedLayout:function(d){var c=this,e=d.savedXY,a=c.owner,b=a.listWrap,f=c.scrollPos;c.callParent(arguments);if(e){c.owner.setXY(e)}b.setScrollLeft(f.left);b.setScrollTop(f.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(c,a){var b=c.toolbarContext,d=0;if(b){d=b.getProp("height")}if(d===undefined){this.done=false}else{c.listContext.setHeight(a-c.getFrameInfo().height-d)}},calculateOwnerHeightFromContentHeight:function(c){var a=this.callParent(arguments),b=c.toolbarContext;if(b){a+=b.getProp("height")}return a}});Ext.define("Ext.form.trigger.Spinner",{extend:Ext.form.trigger.Trigger,alias:"trigger.spinner",cls:Ext.baseCSSPrefix+"form-trigger-spinner",spinnerCls:Ext.baseCSSPrefix+"form-spinner",spinnerUpCls:Ext.baseCSSPrefix+"form-spinner-up",spinnerDownCls:Ext.baseCSSPrefix+"form-spinner-down",focusCls:Ext.baseCSSPrefix+"form-spinner-focus",overCls:Ext.baseCSSPrefix+"form-spinner-over",clickCls:Ext.baseCSSPrefix+"form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":(a.spinnerUpCls+"-disabled"),downDisabledCls:a.downEnabled?"":(a.spinnerDownCls+"-disabled"),spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(d){var b=this,a=arguments,d=b.clickRepeater?a[1]:a[0],c=b.field;if(!c.readOnly&&!c.disabled){if(b.upEl.contains(d.target)){Ext.callback(b.upHandler,b.scope,[c,b,d],0,c)}else{if(b.downEl.contains(d.target)){Ext.callback(b.downHandler,b.scope,[c,b,d],0,c)}}}c.inputEl.focus()},onFieldRender:function(){var b=this,a=b.vertical,d,c;b.callParent();d=b.spinnerEl=b.el.select("."+b.spinnerCls,true);c=d.elements;b.upEl=a?c[0]:c[1];b.downEl=a?c[1]:c[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}});Ext.define("Ext.form.field.Spinner",{extend:Ext.form.field.Text,alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(b){var c=this,a=b.spinner;a.upEnabled=c.spinUpEnabled;a.downEnabled=c.spinDownEnabled;return c.callParent([b])},onRender:function(){var b=this,a=b.getTrigger("spinner");b.callParent();if(b.keyNavEnabled){b.spinnerKeyNav=new Ext.util.KeyNav(b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}b.spinUpEl=a.upEl;b.spinDownEl=a.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setUpEnabled(a)}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setDownEnabled(a)}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");this.callParent()}});Ext.define("Ext.form.field.Number",{extend:Ext.form.field.Spinner,alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}a.callParent();a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getErrors:function(c){c=arguments.length>0?c:this.processRawValue(this.getRawValue());var b=this,e=b.callParent([c]),d=Ext.String.format,a;if(c.length<1){return e}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){e.push(d(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){e.push(this.negativeText)}else{if(a<b.minValue){e.push(d(b.minText,b.minValue))}}if(a>b.maxValue){e.push(d(b.maxText,b.maxValue))}return e},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},getSubmitValue:function(){var a=this,b=a.callParent();if(!a.submitLocaleSeparator){b=b.replace(a.decimalSeparator,".")}return b},onChange:function(){this.toggleSpinners();this.callParent(arguments)},toggleSpinners:function(){var c=this,d=c.getValue(),b=d===null,a;if(c.spinUpEnabled||c.spinUpDisabledByToggle){a=b||d<c.maxValue;c.setSpinUpEnabled(a,true)}if(c.spinDownEnabled||c.spinDownDisabledByToggle){a=b||d>c.minValue;c.setSpinDownEnabled(a,true)}},setMinValue:function(b){var a=this,c;a.minValue=Ext.Number.from(b,Number.NEGATIVE_INFINITY);a.toggleSpinners();if(a.disableKeyFilter!==true){c=a.baseChars+"";if(a.allowExponential){c+=a.decimalSeparator+"e+-"}else{if(a.allowDecimals){c+=a.decimalSeparator}if(a.minValue<0){c+="-"}}c=Ext.String.escapeRegex(c);a.maskRe=new RegExp("["+c+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+c+"]","gi")}}},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE);this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(d),a))},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}b.callParent([c])},setSpinUpEnabled:function(b,a){this.callParent(arguments);if(!a){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){this.callParent(arguments);if(!a){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}});Ext.define("Ext.toolbar.Paging",{extend:Ext.toolbar.Toolbar,xtype:"pagingtoolbar",alternateClassName:"Ext.PagingToolbar",mixins:[Ext.util.StoreHolder],displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var b=this,a={scope:b,blur:b.onPagingBlur};a[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=b.onPagingKeyDown;return[{itemId:"first",tooltip:b.firstText,overflowText:b.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:true,handler:b.moveFirst,scope:b},{itemId:"prev",tooltip:b.prevText,overflowText:b.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:true,handler:b.movePrevious,scope:b},"-",b.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:b.inputItemWidth,margin:"-1 2 3 2",listeners:a},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(b.afterPageText,1)},"-",{itemId:"next",tooltip:b.nextText,overflowText:b.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:true,handler:b.moveNext,scope:b},{itemId:"last",tooltip:b.lastText,overflowText:b.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:true,handler:b.moveLast,scope:b},"-",{itemId:"refresh",tooltip:b.refreshText,overflowText:b.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",disabled:b.store.isLoading(),handler:b.doRefresh,scope:b}]},initComponent:function(){var b=this,a=b.items||b.buttons||[],c;b.bindStore(b.store||"ext-empty-store",true);c=b.getPagingItems();if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}b.callParent()},beforeRender:function(){var a=this;a.callParent(arguments);if(!a.store.isLoading()){a.calledFromRender=true;a.onLoad();delete a.calledFromRender}},updateInfo:function(){var e=this,c=e.child("#displayItem"),a=e.store,b=e.getPageData(),d,f;if(c){d=a.getCount();if(d===0){f=e.emptyMsg}else{f=Ext.String.format(e.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(f)}},onLoad:function(){var g=this,d,b,c,a,f,h,e;f=g.store.getCount();h=f===0;if(!h){d=g.getPageData();b=d.currentPage;c=d.pageCount;if(b>c){g.store.loadPage(c);return}a=Ext.String.format(g.afterPageText,isNaN(c)?1:c)}else{b=0;c=0;a=Ext.String.format(g.afterPageText,0)}Ext.suspendLayouts();e=g.child("#afterTextItem");if(e){e.setText(a)}e=g.getInputItem();if(e){e.setDisabled(h).setValue(b)}g.setChildDisabled("#first",b===1||h);g.setChildDisabled("#prev",b===1||h);g.setChildDisabled("#next",b===c||h);g.setChildDisabled("#last",b===c||h);g.setChildDisabled("#refresh",false);g.updateInfo();Ext.resumeLayouts(true);if(!g.calledFromRender){g.fireEvent("change",g,d)}},setChildDisabled:function(a,b){var c=this.child(a);if(c){c.setDisabled(b)}},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(b){var c=this.getInputItem(),d=false,a;if(c){a=c.getValue();d=parseInt(a,10);if(!a||isNaN(d)){c.setValue(b.currentPage);return false}}return d},onPagingBlur:function(c){var b=this.getInputItem(),a;if(b){a=this.getPageData().currentPage;b.setValue(a)}},onPagingKeyDown:function(b,a){this.processKeyEvent(b,a)},processKeyEvent:function(h,g){var d=this,b=g.getKey(),c=d.getPageData(),a=g.shiftKey?10:1,f;if(b==g.RETURN){g.stopEvent();f=d.readPageFromInput(c);if(f!==false){f=Math.min(Math.max(1,f),c.pageCount);if(f!==c.currentPage&&d.fireEvent("beforechange",d,f)!==false){d.store.loadPage(f)}}}else{if(b==g.HOME||b==g.END){g.stopEvent();f=b==g.HOME?1:c.pageCount;h.setValue(f)}else{if(b==g.UP||b==g.PAGE_UP||b==g.DOWN||b==g.PAGE_DOWN){g.stopEvent();f=d.readPageFromInput(c);if(f){if(b==g.DOWN||b==g.PAGE_DOWN){a*=-1}f+=a;if(f>=1&&f<=c.pageCount){h.setValue(f)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var c=this,a=c.store,b=a.currentPage-1;if(b>0){if(c.fireEvent("beforechange",c,b)!==false){a.previousPage();return true}}return false},moveNext:function(){var d=this,a=d.store,c=d.getPageData().pageCount,b=a.currentPage+1;if(b<=c){if(d.fireEvent("beforechange",d,b)!==false){a.nextPage();return true}}return false},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a);return true}return false},doRefresh:function(){var b=this,a=b.store,c=a.currentPage;if(b.fireEvent("beforechange",b,c)!==false){a.loadPage(c);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onDestroy:function(){this.bindStore(null);this.callParent()}});Ext.define("Ext.view.BoundList",{extend:Ext.view.View,alias:"widget.boundlist",alternateClassName:"Ext.BoundList",mixins:[Ext.mixin.Queryable],pageSize:0,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,componentLayout:"boundlist",navigationModel:"boundlist",autoScroll:true,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap" role="presentation" class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="'+Ext.plainListCls+'">',"</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusable:false,initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";if(b.trackOver){b.overItemCls=a+"-item-over"}b.itemSelector="."+c;b.scrollerSelector="ul."+Ext.plainListCls;if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl>")}else{if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}b.callParent();b.getSelectionModel().preventFocus=true},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var a=this.callParent(),b=this.pagingToolbar;if(b){a.push(b)}return a},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var c=this,a=c.tpl,b=c.pagingToolbar,d=c.rendered;a.field=c.pickerField;a.store=c.store;c.callParent();a.field=a.store=null;if(d&&b&&b.rendered&&!c.preserveScrollOnRefresh){c.el.appendChild(b.el,true)}},bindStore:function(a,b){var c=this.pagingToolbar;this.callParent(arguments);if(c){c.bindStore(a,b)}},getInnerTpl:function(a){return"{"+a+"}"},onDestroy:function(){this.callParent();Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;this.callParent(arguments);if(a){a.finishRender()}}}});Ext.define("Ext.view.BoundListKeyNav",{extend:Ext.view.NavigationModel,alias:"view.navigation.boundlist",initKeyNav:function(a){var b=this,c=b.view.pickerField;if(!a.pickerField){return}if(!c.rendered){c.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}b.keyNav=new Ext.util.KeyNav({target:c.inputEl,forceKeyDown:true,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,scope:b})},onItemMouseDown:function(b,a,e,c,d){this.callParent([b,a,e,c,d]);d.preventDefault()},onKeyUp:function(){var e=this,b=e.view,d=b.all,f=b.highlightedItem,c=f?b.indexOf(f):-1,a=c>0?c-1:d.getCount()-1;e.setPosition(a)},onKeyDown:function(){var e=this,b=e.view,d=b.all,f=b.highlightedItem,c=f?b.indexOf(f):-1,a=c<d.getCount()-1?c+1:0;e.setPosition(a)},onKeyLeft:Ext.emptyFn,onKeyRight:Ext.emptyFn,onKeyTab:function(c){var a=this.view,b=a.pickerField;if(a.isVisible()){if(b.selectOnTab){this.selectHighlighted(c)}b.collapse()}return true},onKeyEnter:function(d){var a=this.view.getSelectionModel(),c=this.view.pickerField,b=a.getCount();this.selectHighlighted(d);if(!c.multiSelect&&b===a.getCount()){c.collapse()}},onKeySpace:function(){this.callParent(arguments);return true},focusItem:function(c){var b=this,a=b.view;if(typeof c==="number"){c=a.all.item(c)}if(c){c=c.dom;a.highlightItem(c);a.getOverflowEl().scrollChildIntoView(c,false)}},selectHighlighted:function(d){var b=this.view,a=b.getSelectionModel(),c;c=b.getNavigationModel().getRecord();if(c){if(d.getKey()===d.ENTER||!a.isSelected(c)){a.selectWithEvent(c,d)}}}});Ext.define("Ext.form.field.ComboBox",{extend:Ext.form.field.Picker,alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],mixins:[Ext.util.StoreHolder],config:{filters:null,selection:null},publishes:["selection"],twoWayBindable:["selection"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenName:"",hiddenDataCls:Ext.baseCSSPrefix+"hidden-display "+Ext.baseCSSPrefix+"form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var a=this;a.callParent(arguments);a.setHiddenValue(a.value)},multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,ignoreSelection:0,removingRecords:null,resizeComboToGrow:function(){var a=this;return a.grow&&a.growToLongestValue},initComponent:function(){var e=this,c=Ext.isDefined,b=e.store,d=e.transform,g=e.displayTpl,a,f;if(e.typeAhead&&e.multiSelect){Ext.Error.raise("typeAhead and multiSelect are mutually exclusive options -- please remove one of them.")}if(e.typeAhead&&!e.editable){Ext.Error.raise("If typeAhead is enabled the combo must be editable: true -- please change one of those settings.")}if(e.selectOnFocus&&!e.editable){Ext.Error.raise("If selectOnFocus is enabled the combo must be editable: true -- please change one of those settings.")}if(d){a=Ext.getDom(d);if(a){if(!e.store){b=Ext.Array.map(Ext.Array.from(a.options),function(h){return[h.value,h.text]})}if(!e.name){e.name=a.name}if(!("value" in e)){e.value=a.value}}}e.bindStore(b||"ext-empty-store",true,true);b=e.store;if(b.autoCreated){e.queryMode="local";e.valueField=e.displayField="field1";if(!b.expanded){e.displayField="field2"}}if(!c(e.valueField)){e.valueField=e.displayField}f=e.queryMode==="local";if(!c(e.queryDelay)){e.queryDelay=f?10:500}if(!c(e.minChars)){e.minChars=f?0:4}if(!g){e.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+e.displayField+'"]]}<tpl if="xindex < xcount">'+e.delimiter+"</tpl></tpl>")}else{if(!g.isTemplate){e.displayTpl=new Ext.XTemplate(g)}}e.callParent();e.doQueryTask=new Ext.util.DelayedTask(e.doRawQuery,e);if(e.store.getCount()>0){e.setValue(e.value)}if(a){if(e.transformInPlace){e.render(a.parentNode,a);delete e.renderTo}Ext.removeNode(a)}},getSubTplMarkup:function(c){var d=this,a="",b=d.callParent(arguments);if(d.hiddenName){a='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+d.hiddenDataCls+'" role="presentation"></div>'}return a+b},applyFilters:function(b,c){var a=this;if(b===null||b.isFilterCollection){return b}if(b){if(!c){c=this.getFilters()}c.beginUpdate();c.splice(0,c.length,b);c.each(function(d){d.ownerId=a.id});c.endUpdate()}return c},getFilters:function(b){var a=this.filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c)}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(e){var d=this,f=d.filtered,c=!!e&&(e.length>0),a,b;if(f||c){d.filtered=c;a=[];b=d.store.getFilters();b.each(function(g){if(g.ownerId===d.id&&!e.contains(g)){a.push(g)}});b.splice(0,a,e.items)}},getStore:function(){return this.store},onBlur:function(c){var b=this,a=b.queryFilter;b.doQueryTask.cancel();b.assertValue();if(a&&b.queryMode==="local"&&b.clearFilterOnBlur){b.getStore().getFilters().remove(a)}b.callParent([c])},onFocus:function(b){var a=this;a.callParent([b]);if(!a.duringTriggerClick&&a.triggerAction!=="all"&&a.queryFilter&&a.queryMode==="local"&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var b=this,c=b.getRawValue(),d,a;if(b.forceSelection){if(b.multiSelect){if(c!==b.getDisplayValue()){b.setValue(b.lastSelection)}}else{d=b.findRecordByDisplay(c);if(d){a=b.value;if(!b.findRecordByValue(a)){b.select(d,true)}}else{b.setValue(b.lastSelection)}}}b.collapse()},onTypeAhead:function(){var e=this,d=e.displayField,b=e.store.findRecord(d,e.getRawValue()),c=e.getPicker(),f,a,g;if(b){f=b.get(d);a=f.length;g=e.getRawValue().length;c.highlightItem(c.getNode(b));if(g!==0&&g!==a){e.setRawValue(f);e.selectText(g,f.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;this.callParent();if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var c=this,a=c.picker,b=c.queryFilter;if(b&&!c.store.isDestroyed){c.getStore().getFilters().remove(b)}if(a){a.bindStore(null)}},onBindStore:function(a,c){var b=this.picker;if(!c){this.resetToDefault()}if(b){b.bindStore(a)}},bindStore:function(a,e,b){var d=this,c=d.queryFilter;d.mixins.storeholder.bindStore.call(d,a,b);a=d.getStore();if(a&&c&&!e){a.getFilters().add(c)}if(!b&&a){d.setValueOnData()}},getStoreListeners:function(){var a=this;return{beforeload:a.onBeforeLoad,clear:a.onClear,datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,remove:a.onRemove}},onBeforeLoad:function(){++this.ignoreSelection},onDataChanged:function(){var a=this;if(a.resizeComboToGrow()){a.updateLayout()}},onClear:function(){var a=this;if(a.resizeComboToGrow()){a.removingRecords=true;a.onDataChanged()}},onRemove:function(){var a=this;if(a.resizeComboToGrow()){a.removingRecords=true}},onException:function(){if(this.ignoreSelection>0){--this.ignoreSelection}this.collapse()},onLoad:function(b,a,c){if(this.ignoreSelection>0){--this.ignoreSelection}if(c&&!b.lastOptions.rawQuery){this.setValueOnData()}},setValueOnData:function(){var a=this;if(a.value==null){if(a.getStore().getCount()){a.doAutoSelect()}else{a.setValue(a.value)}}else{a.setValue(a.value)}},doRawQuery:function(){this.doQuery(this.getRawValue(),false,true)},doQuery:function(e,b,d){var c=this,a=c.beforeQuery({query:e||"",rawQuery:d,forceAll:b,combo:c,cancel:false});if(a===false||a.cancel){return false}if(c.queryCaching&&a.query===c.lastQuery){c.expand();if(c.queryMode==="local"){c.doAutoSelect()}}else{c.lastQuery=a.query;if(c.queryMode==="local"){c.doLocalQuery(a)}else{c.doRemoteQuery(a)}}return true},beforeQuery:function(a){var b=this;if(b.fireEvent("beforequery",a)===false){a.cancel=true}else{if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=true}}}return a},doLocalQuery:function(a){var d=this,e=a.query,c=d.getStore().getFilters(),b=d.queryFilter;d.queryFilter=null;c.beginUpdate();if(b){c.remove(b)}if(e){b=d.queryFilter=new Ext.util.Filter({id:d.id+"-filter",anyMatch:d.anyMatch,caseSensitive:d.caseSensitive,root:"data",property:d.displayField,value:d.enableRegEx?new RegExp(e):e});c.add(b)}c.endUpdate();if(d.store.getCount()||d.getPicker().emptyText){d.expand()}else{d.collapse()}d.afterQuery(a)},doRemoteQuery:function(b){var c=this,a=function(){c.afterQuery(b)};c.expand();if(c.pageSize){c.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{c.store.load({params:c.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var b=this;if(b.store.getCount()){if(b.typeAhead){b.doTypeAhead()}if(b.getRawValue()!==b.getDisplayValue()){b.ignoreSelection++;b.picker.getSelectionModel().deselectAll();b.ignoreSelection--}if(a.rawQuery){b.syncSelection();if(b.picker&&!b.picker.getSelectionModel().hasSelection()){b.doAutoSelect()}}else{b.doAutoSelect()}}},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var b=this,a=b.picker;if(a&&b.autoSelect&&b.store.getCount()>0){a.getNavigationModel().setPosition(b.picker.getSelectionModel().lastSelected||0)}},doTypeAhead:function(){var b=this,a=Ext.event.Event;if(!b.typeAheadTask){b.typeAheadTask=new Ext.util.DelayedTask(b.onTypeAhead,b)}if(b.lastKey!==a.BACKSPACE&&b.lastKey!==a.DELETE){b.typeAheadTask.delay(b.typeAheadDelay)}},onTriggerClick:function(){var a=this;a.duringTriggerClick=true;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.onFocus({});if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{if(a.triggerAction==="last"){a.doQuery(a.lastQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}}}delete a.duringTriggerClick},onPaste:function(){var a=this;if(!a.readOnly&&!a.disabled&&a.editable){a.doQueryTask.delay(a.queryDelay)}},onKeyUp:function(d,b){var c=this,a=d.getKey();if(!c.readOnly&&!c.disabled&&c.editable){c.lastKey=a;if(!d.isSpecialKey()||a===d.BACKSPACE||a===d.DELETE){c.doQueryTask.delay(c.queryDelay)}}if(c.enableKeyEvents){c.callParent(arguments)}},initEvents:function(){var a=this;a.callParent();if(!a.enableKeyEvents){a.mon(a.inputEl,"keyup",a.onKeyUp,a)}a.mon(a.inputEl,"paste",a.onPaste,a)},onDestroy:function(){var a=this;if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);a.callParent()},onAdded:function(){var a=this;a.callParent(arguments);if(a.picker){a.picker.ownerCt=a.up("[floating]");a.picker.registerWithOwnerCt()}},createPicker:function(){var c=this,b,a=Ext.apply({xtype:"boundlist",pickerField:c,selModel:{mode:c.multiSelect?"SIMPLE":"SINGLE",enableInitialSelection:false},floating:true,hidden:true,store:c.store,displayField:c.displayField,preserveScrollOnRefresh:true,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);b=c.picker=Ext.widget(a);if(c.pageSize){b.pagingToolbar.on("beforechange",c.onPageChange,c)}c.mon(b,{refresh:c.onListRefresh,scope:c});c.mon(b.getSelectionModel(),{beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,selectionchange:c.onListSelectionChange,scope:c});return b},alignPicker:function(){var d=this,c=d.getPicker(),g=d.getPosition()[1]-Ext.getBody().getScroll().top,f=Ext.Element.getViewportHeight()-g-d.getHeight(),e=Math.max(g,f),b=c.getTargetEl().dom,a=b.scrollTop;if(c.height){delete c.height;c.updateLayout()}if(c.getHeight()>e-5){c.setHeight(e-5)}d.callParent();b.scrollTop=a},onListRefresh:function(){if(!this.expanding){this.alignPicker()}this.syncSelection()},onBeforeSelect:function(b,a){return this.fireEvent("beforeselect",this,a,this.getStore().indexOf(a))},onBeforeDeselect:function(b,a){return this.fireEvent("beforedeselect",this,a,this.getStore().indexOf(a))},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getPicker().getSelectionModel();b.processSelectionChange=true;if(a){c.select(a)}else{c.deselectAll()}b.processSelectionChange=false;b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},onListSelectionChange:function(a,e){var b=this,f=b.multiSelect,d=e.length>0,c=b.processSelectionChange;b.updateBindSelection(a,e);if(!b.ignoreSelection&&(b.isExpanded||c)){if(!f){b.collapse()}if(f||d||c){b.setValue(e,false)}if(d){b.fireEvent("select",b,e)}}},onExpand:function(){var b=this,a;if(b.selectOnTab){b.ignoreMonitorTab=true}a=b.getPicker().getNavigationModel();Ext.defer(a.enable,1,a)},onCollapse:function(){var b=this,a=b.getPicker().getNavigationModel();if(a){a.disable();b.ignoreMonitorTab=false}},select:function(d,a){var c=this,b=c.picker,e;if(d&&d.isModel&&a===true&&b){e=!b.getSelectionModel().isSelected(d)}c.setValue(d,true);if(e){c.fireEvent("select",c,d)}},findRecord:function(d,c){var b=this.store,a=b.findExact(d,c);return a!==-1?b.getAt(a):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(a){return this.findRecord(this.valueField,a)},findRecordByDisplay:function(a){return this.findRecord(this.displayField,a)},setValue:function(n,e){var k=this,c=k.valueNotFoundText,o=k.getStore(),p=k.inputEl,m=[],b=[],d=[],j=k.autoLoadOnValue,l=o.hasPendingLoad(),q=j&&o.loadCount===0&&!l,f,h,g,a;if(n!=null&&(l||q||o.isEmptyStore)){k.value=n;k.setHiddenValue(k.value);if(q&&o.getProxy().isRemote){o.load()}return k}n=Ext.Array.from(n);for(f=0,h=n.length;f<h;f++){g=n[f];if(!g||!g.isModel){g=k.findRecordByValue(g)}if(g){m.push(g);b.push(g.data);d.push(g.get(k.valueField))}else{if(!k.forceSelection){d.push(n[f]);a={};a[k.displayField]=n[f];b.push(a)}else{if(Ext.isDefined(c)){b.push(c)}}}}k.setHiddenValue(d);k.value=k.multiSelect?d:d[0];if(!Ext.isDefined(k.value)){k.value=undefined}k.displayTplData=b;k.lastSelection=k.valueModels=m;if(p&&k.emptyText&&!Ext.isEmpty(n)){p.removeCls(k.emptyCls)}k.setRawValue(k.getDisplayValue());k.checkChange();if(e!==false){k.syncSelection()}k.applyEmptyText();return k},setHiddenValue:function(h){var e=this,a=e.hiddenName,d,b,j,g,f,c;if(!e.hiddenDataEl||!a){return}h=Ext.Array.from(h);b=e.hiddenDataEl.dom;j=b.childNodes;g=j[0];f=h.length;c=j.length;if(!g&&f>0){e.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:a}));c=1;g=b.firstChild}while(c>f){b.removeChild(j[0]);--c}while(c<f){b.appendChild(g.cloneNode(true));++c}for(d=0;d<f;d++){j[d].value=h[d]}},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var b=this,a=b.picker,d=b.getRawValue(),c=b.value;if(b.getDisplayValue()!==d){c=d;b.value=b.displayTplData=b.valueModels=undefined;if(a){b.ignoreSelection++;a.getSelectionModel().deselectAll();b.ignoreSelection--}}b.value=c==null?null:c;return b.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=""}return a},isEqual:function(e,d){var b=Ext.Array.from,c,a;e=b(e);d=b(d);a=e.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==e[c]){return false}}return true},clearValue:function(){this.setValue([])},syncSelection:function(){var g=this,d=g.getPicker(),f,c,b=g.valueModels||[],e=b.length,a,h;if(d){f=[];for(a=0;a<e;a++){h=b[a];if(h&&h.isModel&&g.store.indexOf(h)>=0){f.push(h)}}g.ignoreSelection++;c=d.getSelectionModel();if(f.length){c.select(f,false)}else{c.deselectAll()}g.ignoreSelection--}},onEditorTab:function(b){var a=this.getPicker().getNavigationModel();if(this.selectOnTab&&a){a.selectHighlighted(b)}}});Ext.define("Ext.grid.CellEditor",{extend:Ext.Editor,y:0,constructor:function(a){a=Ext.apply({},a);if(a.field){a.field.monitorTab=false}this.callParent([a])},setGrid:function(c){var e=this,d=e.grid,a,b;if(c!==d){b={beforerefresh:e.beforeViewRefresh,refresh:e.onViewRefresh,scope:e};if(d){d.getView().un(b)}a=c.getView();e.renderTo=a.getTargetEl().dom;e.grid=e.ownerCt=c;a.on(b)}},adjustPosition:function(){return{x:0,y:0}},beforeViewRefresh:function(){var a=this,b=a.el&&a.el.dom;if(b){if(a.editing&&!(a.field.column&&a.field.column.sorting)){a.grid.containsFocus=false;a.wasAllowBlur=a.allowBlur;a.allowBlur=false}if(b.parentNode){b.parentNode.removeChild(b)}}},onViewRefresh:function(){var a=this,c=a.el&&a.el.dom,b;if(c){b=a.field.column&&a.field.column.sorting;if(a.editing&&!b){a.allowBlur=a.wasAllowBlur;a.renderTo.appendChild(c);a.grid.containsFocus=true;a.field.focus()}else{if(!b){Ext.getDetachedBody().dom.appendChild(c)}}if(a.editing&&b){a.completeEdit()}}},onShow:function(){var a=this,b=a.boundEl.first();if(a.el.dom.parentNode!==a.renderTo){a.renderTo.appendChild(a.el.dom)}if(b){if(a.isForTree){b=b.child(a.treeNodeSelector)}b.hide()}a.callParent(arguments)},onEditComplete:function(a){if(a){this.restoreCell()}this.callParent(arguments)},onHide:function(){this.restoreCell();this.callParent(arguments)},restoreCell:function(){var a=this,b=a.boundEl.first();if(b){if(a.isForTree){b=b.child(a.treeNodeSelector)}b.show()}},afterRender:function(){var a=this,b=a.field;a.callParent(arguments);if(b.isCheckbox){b.mon(b.inputEl,{mousedown:a.onCheckBoxMouseDown,click:a.onCheckBoxClick,scope:a})}Ext.on("mousedown",a.onDocMouseDown,a)},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onDocMouseDown:function(b){var a=this.field;if(a&&a.hasFocus&&!a.owns(b.target)){a.blur()}},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(false,10)},realign:function(d){var i=this,f=i.boundEl,g=f.first(),k=g.dom.firstChild,b=f.getWidth(),c=Ext.Array.clone(i.offsets),a=i.grid,h,j="",e=!k||(k.nodeType===3&&!(Ext.String.trim(j=k.data).length));if(i.isForTree){h=i.getTreeNodeOffset(g);b-=Math.abs(h);c[0]+=h}if(a.columnLines){b-=f.getBorderWidth("rl")}if(d===true){i.field.setWidth(b)}if(e){g.dom.innerHTML="X"}i.alignTo(g,i.alignment,c);if(e){g.dom.firstChild.data=j}},getTreeNodeOffset:function(a){return a.child(this.treeNodeSelector).getOffsetsTo(a)[0]},onEditorTab:function(b){var a=this.field;if(a.onEditorTab){a.onEditorTab(b)}},onFieldBlur:function(){this.callParent(arguments);this.selectSameEditor=false},alignment:"l-l",hideEl:false,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-cell-editor",treeNodeSelector:"."+Ext.baseCSSPrefix+"tree-node-text",shim:false,shadow:false});Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(b,c,a){if(!c.isRootHeader&&!c.isGroupHeader){Ext.Error.raise("ColumnManager must be passed an instantiated HeaderContainer or group header")}this.headerCt=c;if(a){if(!c.isRootHeader&&!c.isGroupHeader){Ext.Error.raise("ColumnManager must be passed an instantiated HeaderContainer or group header")}this.secondHeaderCt=a}this.visibleOnly=!!b},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},hasVariableRowHeight:function(){var d=this,c=d.getColumns(),a=c.length,b;if(d.variableRowHeight==null){d.variableRowHeight=false;for(b=0;!d.variableRowHeight&&b<a;b++){d.variableRowHeight=!!c[b].variableRowHeight}}return d.variableRowHeight},getHeaderIndex:function(a){if(a.isGroupHeader){a=this.getHeaderColumns(a)[0]}return Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){var c=this.getColumns(),a=c[b];return a||null},getPreviousSibling:function(c){var b=this.getHeaderIndex(c),a=null;if(b>0){a=this.getColumns()[b-1]}return a},getNextSibling:function(c){var b=this.getHeaderIndex(c),a;if(b!==-1){a=this.getColumns()[b+1]}return a||null},getFirst:function(){var a=this.getColumns();return a.length>0?a[0]:null},getLast:function(){var b=this.getColumns(),a=b.length;return a>0?b[a-1]:null},getHeaderByDataIndex:function(d){var c=this.getColumns(),a=c.length,b,e;for(b=0;b<a;++b){e=c[b];if(e.dataIndex===d){return e}}return null},getHeaderById:function(e){var c=this.getColumns(),a=c.length,b,d;for(b=0;b<a;++b){d=c[b];if(d.getItemId()===e){return d}}return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);if(a&&a.hidden){a=a.next(":not([hidden])")||a.prev(":not([hidden])")}return a},cacheColumns:function(){var b=this.getHeaderColumns(this.headerCt),a=this.secondHeaderCt;if(a){b=b.concat(this.getHeaderColumns(a))}this.columns=b},getHeaderColumns:function(b){var a=this.visibleOnly?b.getVisibleGridColumns():b.getGridColumns();return Ext.Array.clone(a)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null;if(a){a.invalidate()}},destroy:function(){this.columns=this.rootColumns=null}},function(){this.createAlias("indexOf","getHeaderIndex")});Ext.define("Ext.grid.column.Action",{extend:Ext.grid.column.Column,alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",stopSelection:true,actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",sortable:false,innerCls:Ext.baseCSSPrefix+"grid-cell-inner-action-col",actionIconCls:Ext.baseCSSPrefix+"action-col-icon",constructor:function(d){var f=this,b=Ext.apply({},d),c=b.items||f.items||[f],g,e,a;f.origRenderer=b.renderer||f.renderer;f.origScope=b.scope||f.scope;f.renderer=f.scope=b.renderer=b.scope=null;b.items=null;f.callParent([b]);f.items=c;for(e=0,a=c.length;e<a;++e){if(c[e].getClass){g=true;break}}if(f.origRenderer||g){f.hasCustomRenderer=true}},initComponent:function(){var a=this;a.callParent();if(a.sortable&&!a.dataIndex){a.sortable=false}},defaultRenderer:function(o,k,e,a,d,n,m){var l=this,f=Ext.baseCSSPrefix,q=l.origScope||l,j=l.items,g=j.length,c=0,p,h,b,r;h=Ext.isFunction(l.origRenderer)?l.origRenderer.apply(q,arguments)||"":"";k.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(;c<g;c++){p=j[c];b=p.disabled||(p.isDisabled?p.isDisabled.call(p.scope||q,m,a,d,p,e):false);r=b?null:(p.tooltip||(p.getTip?p.getTip.apply(p.scope||q,arguments):null));if(!p.hasActionConfiguration){p.stopSelection=l.stopSelection;p.disable=Ext.Function.bind(l.disableAction,l,[c],0);p.enable=Ext.Function.bind(l.enableAction,l,[c],0);p.hasActionConfiguration=true}h+='<img role="button" alt="'+(p.altText||l.altText)+'" src="'+(p.icon||Ext.BLANK_IMAGE_URL)+'" class="'+l.actionIconCls+" "+f+"action-col-"+String(c)+" "+(b?f+"item-disabled":" ")+(Ext.isFunction(p.getClass)?p.getClass.apply(p.scope||q,arguments):(p.iconCls||l.iconCls||""))+'"'+(r?' data-qtip="'+r+'"':"")+" />"}return h},updater:function(a,e,c,b,f){var d={};a.firstChild.innerHTML=this.defaultRenderer(e,d,c,null,null,f,b);Ext.fly(a).addCls(d.tdCls)},enableAction:function(b,a){var c=this;if(!b){b=0}else{if(!Ext.isNumber(b)){b=Ext.Array.indexOf(c.items,b)}}c.items[b].disabled=false;c.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+b).removeCls(c.disabledCls);if(!a){c.fireEvent("enable",c)}},disableAction:function(b,a){var c=this;if(!b){b=0}else{if(!Ext.isNumber(b)){b=Ext.Array.indexOf(c.items,b)}}c.items[b].disabled=true;c.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+b).addCls(c.disabledCls);if(!a){c.fireEvent("disable",c)}},destroy:function(){delete this.items;delete this.renderer;return this.callParent(arguments)},processEvent:function(i,k,m,b,j,g,d,o){var h=this,f=g.getTarget(),l=i==="keydown"&&g.getKey(),c,n,a;if(i==="mousedown"){return false}if(l&&!Ext.fly(f).findParent(k.getCellSelector())){f=Ext.fly(m).down("."+Ext.baseCSSPrefix+"action-col-icon",true)}if(f&&(c=f.className.match(h.actionIdRe))){n=h.items[parseInt(c[1],10)];a=n.disabled||(n.isDisabled?n.isDisabled.call(n.scope||h.origScope||h,k,b,j,n,d):false);if(n&&!a){if(i==="click"||(l===g.ENTER||l===g.SPACE)){Ext.callback(n.handler||h.handler,n.scope||h.origScope,[k,b,j,n,g,d,o],undefined,h);if(n.stopSelection!==false){return false}}}}return h.callParent(arguments)},cascade:function(b,a){b.call(a||this,this)},getRefItems:function(){return[]}});Ext.define("Ext.grid.locking.HeaderContainer",{extend:Ext.grid.header.Container,headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(b){var a=this,d=b.lockedGrid,c=b.normalGrid;a.lockable=b;a.callParent();d.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=b.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(true,d.headerCt,c.headerCt);d.columnManager.rootColumns=c.columnManager.rootColumns=b.columnManager=a.columnManager=new Ext.grid.ColumnManager(false,d.headerCt,c.headerCt);a.relayEvents(d.headerCt,a.headerCtRelayEvents);a.relayEvents(c.headerCt,a.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var b=this,a=b.lockable.lockedGrid.headerCt.getColumnsState(),c=b.lockable.normalGrid.headerCt.getColumnsState();return a.concat(c)},applyColumnsState:function(g){var o=this,e=o.lockable.lockedGrid,f=e.headerCt,m=o.lockable.normalGrid.headerCt,p=Ext.Array.toValueMap(f.items.items,"headerId"),h=Ext.Array.toValueMap(m.items.items,"headerId"),l=[],n=[],k=1,b=g.length,j,a,d,c;for(j=0;j<b;j++){c=g[j];d=p[c.id];a=d||h[c.id];if(a){if(a.applyColumnState){a.applyColumnState(c)}if(a.locked===undefined){a.locked=!!d}if(a.locked){l.push(a);if(!a.hidden&&typeof a.width=="number"){k+=a.width}}else{n.push(a)}}}if(l.length+n.length==f.items.getCount()+m.items.getCount()){f.removeAll(false);m.removeAll(false);f.add(l);m.add(n);e.setWidth(k)}}});Ext.define("Ext.grid.locking.View",{alternateClassName:"Ext.grid.LockingView",mixins:[Ext.util.Observable,Ext.util.StoreHolder,Ext.util.Focusable],isLockingView:true,loadMask:true,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(a){var d=this,c,b;d.ownerGrid=a.ownerGrid;d.navigationModel=new Ext.grid.NavigationModel(d);a.locked.viewConfig.bindStore=a.normal.viewConfig.bindStore=Ext.emptyFn;a.locked.viewConfig.beforeLayout=a.normal.viewConfig.beforeLayout=d.beforeLayout;a.locked.viewConfig.navigationModel=a.normal.viewConfig.navigationModel=d.navigationModel;d.lockedGrid=d.ownerGrid.lockedGrid=Ext.ComponentManager.create(a.locked);d.lockedView=c=d.lockedGrid.getView();if(d.lockedGrid.isTree){d.lockedView.animate=false;a.normal.store=c.store;a.normal.viewConfig.stripeRows=d.lockedView.stripeRows;a.normal.rowLines=d.lockedGrid.rowLines}d.normalGrid=d.ownerGrid.normalGrid=Ext.ComponentManager.create(a.normal);c.lockingPartner=b=d.normalView=d.normalGrid.getView();b.lockingPartner=c;c.isLockedView=b.isNormalView=true;d.loadMask=(a.loadMask!==undefined)?a.loadMask:d.loadMask;d.mixins.observable.constructor.call(d);d.relayEvents(c,Ext.view.Table.events);d.relayEvents(b,Ext.view.Table.events);b.on({scope:d,itemmouseleave:d.onItemMouseLeave,itemmouseenter:d.onItemMouseEnter});c.on({scope:d,itemmouseleave:d.onItemMouseLeave,itemmouseenter:d.onItemMouseEnter});d.ownerGrid.on({render:d.onPanelRender,scope:d});d.loadingText=b.loadingText;d.loadingCls=b.loadingCls;d.loadingUseMsg=b.loadingUseMsg;d.bindStore(b.dataSource,true,"dataSource");d.getSelectionModel().bindStore(d.ownerGrid.store)},beforeLayout:function(){var c=this.ownerCt.ownerLockable.view,b=c.lockedGrid.view,a=c.normalGrid.view;if(!c.relayingOperation){if(c.lockedGrid.isVisible()){if(b.refreshNeeded){b.doFirstRefresh(b.dataSource)}}if(a.refreshNeeded){a.doFirstRefresh(a.dataSource)}}},onPanelRender:function(){var c=this,b=c.loadMask,a={target:c.ownerGrid,msg:c.loadingText,msgCls:c.loadingCls,useMsg:c.loadingUseMsg,store:c.ownerGrid.store};c.el=c.ownerGrid.getTargetEl();c.rendered=true;c.initFocusableEvents();c.fireEvent("render",c);if(b){if(Ext.isObject(b)){a=Ext.apply(a,b)}c.loadMask=new Ext.LoadMask(a)}},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return this.getViewForColumn(a).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getViewForColumn:function(b){var a=this.lockedView,c;a.headerCt.cascade(function(d){if(d===b){c=true;return false}});return c?a:this.normalView},onItemMouseEnter:function(c,b){var f=this,d=f.lockedView,a=f.normalView,e;if(c.trackOver){if(c!==d){a=d}e=a.getNode(b);a.highlightItem(e)}},onItemMouseLeave:function(c,b){var e=this,d=e.lockedView,a=e.normalView;if(c.trackOver){if(c!==d){a=d}a.clearHighlight()}},relayFn:function(c,b){b=b||[];var a=this.lockedView;this.relayingOperation=true;a[c].apply(a,b);a=this.normalView;a[c].apply(a,b);this.relayingOperation=false},getSelectionModel:function(){return this.ownerGrid.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(a,b,d){var c=this;if(!b&&d!=="dataSource"){c.getSelectionModel().bindStore(a)}if(c.normalView.componentLayoutCounter){Ext.suspendLayouts();c.normalView.doFirstRefresh(a);c.lockedView.doFirstRefresh(a);Ext.resumeLayouts(true)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.refresh}},onDataRefresh:function(){this.relayFn("onDataRefresh",arguments)},onReplace:function(){this.relayFn("onReplace",arguments)},onAdd:function(){this.relayFn("onAdd",arguments)},onRemove:function(){this.relayFn("onRemove",arguments)},onUpdate:function(){this.relayFn("onUpdate",arguments)},refresh:function(){this.relayFn("refresh",arguments)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(b,c){var a=this.getViewForColumn(c),d=a.getRow(b);return Ext.fly(d).down(c.getCellSelector())},indexOf:function(b){var a=this.lockedView.indexOf(b);if(!a){a=this.normalView.indexOf(b)}return a},focus:function(){this.getFocusEl().focus()},focusRow:function(c){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;a.focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(a){return this.ownerGrid.isVisible(a)},getFocusEl:function(){var a,b=this.getNavigationModel().lastFocused;a=b?b.view:this.normalView;return a.getFocusEl()},getCellInclusive:function(d,b){var a=d.column,c=this.lockedGrid.getColumnManager().getColumns().length;if(a>=c){d=Ext.apply({},d);d.column-=c;return this.normalView.getCellInclusive(d,b)}else{return this.lockedView.getCellInclusive(d,b)}},getCellByPosition:function(e,c){var d=this,a=e.view,b=e.column;if(a===d){a=b.getView()}return a.getCellByPosition(e,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);if(!a){a=this.normalView.getRecord(b)}return a},scrollBy:function(){var a=this.normalView;a.scrollBy.apply(a,arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var a=this;a.bindStore(null,false,"dataSource");a.isDestroyed=true;a.clearListeners();Ext.destroy(a.loadMask,a.navigationModel,a.selModel)}},function(){this.borrow(Ext.Component,["up"]);this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"])});Ext.define("Ext.grid.locking.Lockable",{alternateClassName:"Ext.grid.Lockable",supportsOverflowX:"overflow-x" in document.documentElement.style,syncRowHeight:true,headerCounter:0,scrollDelta:40,lockedGridCls:Ext.baseCSSPrefix+"grid-inner-locked",normalGridCls:Ext.baseCSSPrefix+"grid-inner-normal",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(e){var c=this,g,d,b,f,a;if(c.subGridXType){g=c.subGridXType}else{if(!e){return"gridpanel"}d=this.getXTypes().split("/");b=d.length;f=d[b-1];a=d[b-2];if(a!=="tablepanel"){g=a}else{g=f}}return g},injectLockable:function(){this.focusable=false;this.lockable=true;this.hasView=true;var s=this,e=Ext.getScrollbarSize().height,c=s.store=Ext.StoreManager.lookup(s.store),h=s.getSelectionModel(),k,l,q,g,m,b,d,p,f,t,j,r=s.viewConfig,a=r&&r.loadMask,n=(a!==undefined)?a:s.loadMask,o=s.findPlugin("bufferedrenderer");k=s.constructLockableFeatures();s.features=null;l=s.constructLockablePlugins();s.plugins=l.topPlugins;q=Ext.apply({id:s.id+"-locked",isLocked:true,ownerGrid:s,ownerLockable:s,xtype:s.determineXTypeToCreate(true),store:c,bufferedRenderer:s.bufferedRenderer,scrollerOwner:false,animate:false,scroll:e?false:"vertical",selModel:h,border:false,cls:s.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||s.normalGrid.floatedFromCollapse},features:k.lockedFeatures,plugins:l.lockedPlugins},s.lockedGridConfig);g=Ext.apply({id:s.id+"-normal",isLocked:false,ownerGrid:s,ownerLockable:s,xtype:s.determineXTypeToCreate(),store:c,bufferedRenderer:s.bufferedRenderer,scrollerOwner:false,selModel:h,border:false,cls:s.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||s.lockedGrid.floatedFromCollapse},features:k.normalFeatures,plugins:l.normalPlugins},s.normalGridConfig);s.addCls(Ext.baseCSSPrefix+"grid-locked");Ext.copyTo(g,s,s.bothCfgCopy,true);Ext.copyTo(q,s,s.bothCfgCopy,true);Ext.copyTo(g,s,s.normalCfgCopy,true);Ext.copyTo(q,s,s.lockedCfgCopy,true);for(m=0;m<s.normalCfgCopy.length;m++){delete s[s.normalCfgCopy[m]]}for(m=0;m<s.lockedCfgCopy.length;m++){delete s[s.lockedCfgCopy[m]]}s.addStateEvents(["lockcolumn","unlockcolumn"]);b=s.processColumns(s.columns,q);q.columns=b.locked;if(!q.columns.items.length){q.hidden=true}g.columns=b.normal;if(!g.columns.items.length){g.hidden=true}g.flex=1;q.viewConfig=s.lockedViewConfig||{};g.viewConfig=s.normalViewConfig||{};q.viewConfig.loadingUseMsg=false;q.viewConfig.loadMask=false;if(e&&!s.supportsOverflowX){q.viewConfig.style="border-bottom:"+e+"px solid #f6f6f6;"+(q.viewConfig.style||"");g.viewConfig.style="border-bottom:"+e+"px solid #f6f6f6;"+(q.viewConfig.style||"")}g.viewConfig.loadMask=false;if(r&&r.id){Ext.log.warn('id specified on Lockable viewConfig, it will be shared between both views: "'+r.id+'"')}Ext.applyIf(q.viewConfig,r);Ext.applyIf(g.viewConfig,r);if(!s.initialConfig.layout){s.layout={type:"hbox",align:"stretch"}}s.getLayout();if(s.layout.type==="border"){if(s.split){q.split=true}if(!g.title){q.header=false}if(!q.region){q.region="west"}if(!g.region){g.region="center"}s.addCls(Ext.baseCSSPrefix+"grid-locked-split")}if(!(s.layout instanceof Ext.layout.container.Box)){s.split=false}s.view=new Ext.grid.locking.View({loadMask:n,locked:q,normal:g,ownerGrid:s});f=s.lockedGrid.getView();t=s.normalGrid.getView();j=o?{}:{scroll:s.onLockedViewScroll,scope:s};if(e){s.lockedGrid.on({afterlayout:s.afterLockedViewLayout,scope:s});f.getOverflowStyle();if(!f.scrollFlags.y){j.mousewheel={fn:s.onLockedViewMouseWheel,element:"el",scope:s}}}f.on(j);j=o?{}:{scroll:s.onNormalViewScroll,scope:s};t.on(j);d=s.lockedGrid.headerCt;p=s.normalGrid.headerCt;s.headerCt=s.view.headerCt=new Ext.grid.locking.HeaderContainer(s);d.lockedCt=true;d.lockableInjected=true;p.lockableInjected=true;d.on({add:s.delaySyncLockedWidth,remove:s.delaySyncLockedWidth,columnshow:s.delaySyncLockedWidth,columnhide:s.delaySyncLockedWidth,sortchange:s.onLockedHeaderSortChange,columnresize:s.delaySyncLockedWidth,scope:s});p.on({add:s.delaySyncLockedWidth,remove:s.delaySyncLockedWidth,columnshow:s.delaySyncLockedWidth,columnhide:s.delaySyncLockedWidth,sortchange:s.onNormalHeaderSortChange,scope:s});s.modifyHeaderCt();s.items=[s.lockedGrid];if(s.split){s.addCls(Ext.baseCSSPrefix+"grid-locked-split");s.items[1]={xtype:"splitter"}}s.items.push(s.normalGrid);s.relayHeaderCtEvents(d);s.relayHeaderCtEvents(p);s.storeRelayers=s.relayEvents(c,["filterchange","groupchange"]);s.gridRelayers=s.relayEvents(s.normalGrid,["viewready"])},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(f,d){var m=this,g,j,e,l=new Ext.grid.header.Container(),k=[],c=[],b={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:k},h={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:c},o={lockedWidth:d.width||0,locked:b,normal:h},n=!(d.width||d.flex),a;if(!m.hasOwnProperty("shrinkWrapLocked")){m.shrinkWrapLocked=n}if(Ext.isObject(f)){Ext.applyIf(b,f);Ext.applyIf(h,f);a=Ext.apply({},f);delete a.items;Ext.apply(l,a);f=f.items}for(g=0,j=f.length;g<j;++g){e=f[g];if(!e.isComponent){e=l.lookupComponent(l.applyDefaults(e))}e.processed=true;if(e.locked||e.autoLock){if(n&&!e.hidden){o.lockedWidth+=m.getColumnWidth(e)||l.defaultWidth}k.push(e)}else{c.push(e)}if(!e.headerId){e.headerId=(e.initialConfig||e).id||("h"+(++m.headerCounter))}}m.fireEvent("processcolumns",m,k,c);l.destroy();if(n){d.width=(o.lockedWidth+=Ext.num(m.getSelectionModel().headerWidth,0)+(k.length?1:0))}return o},getColumnWidth:function(e){var b=e.width||0,d,a,c;if(e.flex){Ext.Error.raise("Locked columns in an unsized locked side do NOT support a flex width. You must set a width on the "+e.text+"column.")}if(!b&&e.isGroupHeader){d=e.items.items;a=d.length;for(c=0;c<a;c++){b+=this.getColumnWidth(d[c])}}return b},afterLockedViewLayout:function(){var f=this,e=f.lockedGrid.getView(),d=f.normalGrid.getView(),a=e.el,b=d.el,g=Ext.getScrollbarSize().height,c=(e.scrollFlags.x&&f.lockedGrid.headerCt.tooNarrow?g:0),h=(d.scrollFlags.x&&f.normalGrid.headerCt.tooNarrow?g:0);if(c!==h){if(c){if(f.supportsOverflowX){b.dom.style.overflowX="scroll";e.getOverflowEl().setStyle(e.getOverflowStyle())}else{b.dom.style.borderBottomWidth=c+"px";a.dom.style.borderBottomWidth="0px"}}else{if(f.supportsOverflowX){a.dom.style.overflowX="scroll";d.getOverflowEl().setStyle(d.getOverflowStyle())}else{a.dom.style.borderBottomWidth=h+"px";b.dom.style.borderBottomWidth="0px"}}}else{if(f.supportsOverflowX){e.getOverflowEl().dom.style.overflowX=h?"scroll":"";d.getOverflowEl().setStyle(d.getOverflowStyle())}else{b.dom.style.borderBottomWidth=a.dom.style.borderBottomWidth="0px"}}},onLockedViewMouseWheel:function(i){var d=this,a=-d.scrollDelta*i.getWheelDeltas().y,c=d.lockedGrid.getView(),f=c.el.dom,h,b,g;if(!d.ignoreMousewheel){if(f){h=c.getScrollY();b=h!==f.scrollHeight-f.clientHeight;g=h!==0}if((a<0&&g)||(a>0&&b)){i.stopEvent();h+=a;c.setScrollY(h);d.normalGrid.getView().setScrollY(h);d.onNormalViewScroll()}}},onLockedViewScroll:function(){var f=this,e=f.lockedGrid.getView(),d=f.normalGrid.getView(),c=e.getScrollY(),g=d.getScrollY(),a,b;if(g!==c){d.setScrollY(c);if(d.bufferedRenderer){b=e.body.dom;a=d.body.dom;a.style.position="absolute";a.style.top=b.style.top}}},onNormalViewScroll:function(){var d=this,c=d.lockedGrid.getView(),b=d.normalGrid.getView(),a=c.getScrollY(),f=b.getScrollY(),e;if(f!==a){c.setScrollY(f);if(b.bufferedRenderer){e=c.body;if(e.dom){e.dom.style.position="absolute";e.translate(null,b.bufferedRenderer.bodyTop)}}}},syncRowHeights:function(){if(!this.isDestroyed){var f=this,a,e=f.lockedGrid.getView(),b=f.normalGrid.getView(),g=e.all.slice(),d=b.all.slice(),c=g.length,h;if(d.length===c){for(a=0;a<c;a++){b.syncRowHeights(g[a],d[a])}h=b.getScrollY();b.setScrollY(h);e.setScrollY(h)}}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,true);a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,false);a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy);a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(b,f){var e=this.getMenu(),c=e.down("#unlockItem"),d=e.down("#lockItem"),a=c.prev();if(f.lockable===false){a.hide();c.hide();d.hide()}else{a.show();c.show();d.show();if(!c.initialConfig.disabled){c.setDisabled(f.lockable===false)}if(!d.initialConfig.disabled){d.setDisabled(!f.isLockable())}}},getMenuItems:function(f,c){var g=this,h=g.unlockText,a=g.lockText,i=Ext.baseCSSPrefix+"hmenu-unlock",b=Ext.baseCSSPrefix+"hmenu-lock",e=g.onUnlockMenuClick.bind(g),d=g.onLockMenuClick.bind(g);return function(){var j=f.call(this);j.push("-",{itemId:"unlockItem",iconCls:i,text:h,handler:e,disabled:!c});j.push({itemId:"lockItem",iconCls:b,text:a,handler:d,disabled:c});return j}},syncTaskDelay:1,delaySyncLockedWidth:function(){var b=this,a=b.syncLockedWidthTask;if(!a){a=b.syncLockedWidthTask=new Ext.util.DelayedTask(b.syncLockedWidth,b)}if(b.syncTaskDelay===0){b.syncLockedWidth()}else{a.delay(1)}},syncLockedWidth:function(){var f=this,c=f.lockedGrid,e=c.view,d=e.el.dom,h=f.normalGrid,g=c.headerCt.getVisibleGridColumns().length,a=h.headerCt.getVisibleGridColumns().length,b=f.syncLockedWidthTask;if(b){b.cancel()}Ext.suspendLayouts();if(a){h.show();if(g){if(f.shrinkWrapLocked&&!c.headerCt.forceFit){delete c.flex;c.setWidth(c.headerCt.getTableWidth()+c.el.getBorderWidth("lr"))}c.addCls(f.lockedGridCls);c.show();if(f.split){f.child("splitter").show()}}else{c.getView().clearViewEl(true);c.hide();if(f.split){f.child("splitter").hide()}}e.el.setStyle(e.getOverflowStyle());f.ignoreMousewheel=e.scrollFlags.y}else{h.hide();d.style.borderBottomWidth="0";c.flex=1;delete c.width;c.removeCls(f.lockedGridCls);c.show();e.el.setStyle(h.view.getOverflowStyle());f.ignoreMousewheel=true}Ext.resumeLayouts(true);return[g,a]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(e,j,d){var g=this,f=g.normalGrid,b=g.lockedGrid,c=f.view,k=b.view,i=f.headerCt,h,a;e=e||i.getMenu().activeHeader;d=d||b.headerCt;a=e.ownerCt;if(!e.isLockable()){return}if(e.flex){e.width=e.getWidth();e.flex=null}Ext.suspendLayouts();c.blockRefresh=k.blockRefresh=true;a.remove(e,false);e.locked=true;g.ignoreAddLockedColumn=true;if(Ext.isDefined(j)){d.insert(j,e)}else{d.add(e)}g.ignoreAddLockedColumn=false;c.blockRefresh=k.blockRefresh=false;h=g.syncLockedWidth();if(h[0]){b.getView().refreshView()}if(h[1]){f.getView().refreshView()}Ext.resumeLayouts(true);g.fireEvent("lockcolumn",g,e)},unlock:function(d,i,c){var f=this,e=f.normalGrid,a=f.lockedGrid,b=e.view,j=a.view,h=a.headerCt,g;if(!Ext.isDefined(i)){i=0}d=d||h.getMenu().activeHeader;c=c||e.headerCt;Ext.suspendLayouts();b.blockRefresh=j.blockRefresh=true;d.ownerCt.remove(d,false);d.locked=false;c.insert(i,d);b.blockRefresh=j.blockRefresh=false;g=f.syncLockedWidth();if(g[0]){a.getView().refreshView()}if(g[1]){e.getView().refreshView()}Ext.resumeLayouts(true);f.fireEvent("unlockcolumn",f,d)},reconfigureLockable:function(b,c){var d=this,g=d.store,f=d.lockedGrid,e=d.normalGrid,a;Ext.suspendLayouts();if(c){f.reconfiguring=e.reconfiguring=true;f.headerCt.removeAll();e.headerCt.removeAll();c=d.processColumns(c,f);d.ignoreAddLockedColumn=true;f.headerCt.add(c.locked.items);d.ignoreAddLockedColumn=false;e.headerCt.add(c.normal.items);f.reconfiguring=e.reconfiguring=false;d.syncLockedWidth()}if(b&&b!==g){b=Ext.data.StoreManager.lookup(b);d.store=b;f.bindStore(b);a=f.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}e.bindStore(b);a=e.view;a.store=b;if(!a.dataSource.isFeatureStore){a.dataSource=b}d.view.store=b;d.view.bindStore(b,false,"dataSource")}else{f.getView().refreshView();e.getView().refreshView()}Ext.resumeLayouts(true)},constructLockableFeatures:function(){var e=this.features,c,d,f,g,b=0,a;if(e){if(!Ext.isArray(e)){e=[e]}f=[];g=[];a=e.length;for(;b<a;b++){c=e[b];if(!c.isFeature){c=Ext.create("feature."+c.ftype,c)}switch(c.lockableScope){case"locked":f.push(c);break;case"normal":g.push(c);break;default:c.lockableScope="both";f.push(c);g.push(d=c.clone());d.lockingPartner=c;c.lockingPartner=d}}}return{normalFeatures:g,lockedFeatures:f}},constructLockablePlugins:function(){var c=this.plugins,g,b,a,j,k,e,f=0,h,l,d;if(c){if(!Ext.isArray(c)){c=[c]}j=[];k=[];e=[];h=c.length;for(;f<h;f++){g=c[f];if(g.init){l=g.lockableScope}else{d=g.ptype?Ext.ClassManager.getByAlias(("plugin."+g.ptype)):Ext.ClassManager.get(g.xclass);l=d.prototype.lockableScope}switch(l){case"both":k.push(a=g.clonePlugin());e.push(b=g.clonePlugin());a.lockingPartner=b;b.lockingPartner=a;Ext.destroy(g);break;case"locked":k.push(g);break;case"normal":e.push(g);break;default:j.push(g)}}}return{topPlugins:j,normalPlugins:e,lockedPlugins:k}},destroyLockable:function(){var b=this,a=b.syncLockedWidthTask;if(a){a.cancel();b.syncLockedWidthTask=null}Ext.destroy(b.view,b.headerCt)}},function(){this.borrow(Ext.Component,["constructPlugin"])});Ext.define("Ext.grid.plugin.BufferedRenderer",{extend:Ext.AbstractPlugin,alias:"plugin.bufferedrenderer",isBufferedRenderer:true,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:true,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,init:function(c){var d=this,a=c.view,b={scroll:d.onViewScroll,resize:d.onViewResize,refresh:d.onViewRefresh,columnschanged:d.checkVariableRowHeight,scope:d,destroyable:true},e=a.initialConfig;if(c.isTree||(c.ownerLockable&&c.ownerLockable.isTree)){a.blockRefresh=false;if(e&&e.loadMask===undefined){a.loadMask=true}}if(a.positionBody){b.refresh=d.onViewRefresh}d.grid=c;d.view=a;d.isRTL=a.getInherited().rtl;a.bufferedRenderer=d;a.preserveScrollOnRefresh=true;a.animate=false;d.bindStore(a.dataSource);if(a.hasOwnProperty("rowHeight")){d.rowHeight=a.rowHeight}d.position=0;d.gridListeners=c.on("reconfigure",d.onReconfigure,d);d.viewListeners=a.on(b)},checkVariableRowHeight:function(){var b=this,a=b.grid;b.variableRowHeight=b.view.hasVariableRowHeight();if(a.ownerLockable){a.ownerLockable.syncRowHeight=b.variableRowHeight}},bindStore:function(c){var d=this,b=d.view,e=b.dataSource,a=e&&e.isFeatureStore;if(a===c.isFeatureStore){if(d.store){d.unbindStore()}d.storeListeners=c.on({scope:d,groupchange:d.onStoreGroupChange,clear:d.onStoreClear,destroyable:true});d.store=c}if(d.view.componentLayout.layoutCount){delete d.viewSize;if(c.isBufferedStore){c.setViewSize(d.viewSize)}d.onViewResize(d.view,0,d.view.getHeight())}},onReconfigure:function(b,a){if(a&&a!==this.store){this.bindStore(a)}},unbindStore:function(){this.storeListeners.destroy();this.store=null},onStoreClear:function(){var b=this,a=b.view;if(a.rendered&&!b.store.isDestroyed){if(b.scrollTop!==0){b.bodyTop=b.scrollTop=b.position=b.scrollHeight=0;b.view.setScrollY(0)}b.lastScrollDirection=b.scrollOffset=null;if(!a.hasOwnProperty("rowHeight")){delete b.rowHeight}}},onStoreGroupChange:function(a){var b=this;delete b.rowHeight;b.stretchView(b.view,b.getScrollHeight())},onViewRefresh:function(b,c){var e=this,f=b.all,g=e.scrollHeight,a,d;e.checkVariableRowHeight();if(e.variableRowHeight&&!b.componentLayoutCounter){b.on({boxready:e.onViewRefresh,scope:e,single:true});return}if(!b.hasOwnProperty("rowHeight")&&f.getCount()){delete e.rowHeight}d=e.getScrollHeight();if(d!=g){e.stretchView(b,d)}if(e.refreshing){return}if(e.scrollTop!==b.getScrollY()){e.onViewScroll()}else{if(!e.hasOwnProperty("bodyTop")){e.bodyTop=f.startIndex*e.rowHeight;b.setScrollY(e.bodyTop)}e.setBodyTop(e.bodyTop);a=b.getHeight();if(f.getCount()&&a>0){e.onViewResize(b,null,a);if(c&&(f.getCount()!==c.length)){c.length=0;c.push.apply(c,e.store.getRange(f.startIndex,f.endIndex))}}}},onViewResize:function(c,e,a,b,g){var f=this,d;f.tableTopBorderWidth=c.body.getBorderWidth("t");if(!g||a!==g){d=Math.ceil(a/f.rowHeight)+f.trailingBufferZone+f.leadingBufferZone;f.viewSize=f.setViewSize(d);f.viewClientHeight=c.el.dom.clientHeight}},onWrappedColumnWidthChange:function(b,d){var c=this,a=c.view;if(c.store.getCount()&&c.bodyTop){delete c.rowHeight;c.stretchView(a,c.getScrollHeight(true));c.setViewSize(Math.ceil(a.getHeight()/c.rowHeight)+c.trailingBufferZone+c.leadingBufferZone);if(c.viewSize>=c.store.getCount()){c.setBodyTop(0)}else{if(d>b&&c.bodyTop+a.body.dom.offsetHeight-1>c.scrollHeight){c.setBodyTop(Math.max(0,c.scrollHeight-a.body.dom.offsetHeight))}else{if(c.bodyTop>c.scrollTop||c.bodyTop+a.body.dom.offsetHeight<c.scrollTop+a.getHeight(true)){c.setBodyTop(c.scrollTop-c.trailingBufferZone*c.rowHeight)}}}}},stretchView:function(b,a){var e=this,d=e.store.getCount(),c=b.getTargetEl(),f;if(e.scrollTop>a){e.position=e.scrollTop=a-b.body.dom.offsetHeight;e.view.setScrollY(e.scrollTop)}if(e.bodyTop>a){b.body.translate(null,e.bodyTop=e.position)}if(b.touchScroll){if(b.scrollManager){e.refreshScroller(b,a)}else{if(!e.pendingScrollerRefresh){b.on({boxready:function(){e.refreshScroller(b,a);e.pendingScrollerRefresh=false},single:true});e.pendingScrollerRefresh=true}}}if(!Ext.supports.touchScroll||Ext.supports.touchScroll===1){if(!e.stretcher){c=b.getTargetEl();if(b.refreshCounter){b.fixedNodes++}f={style:{width:"1px",height:"1px",marginTop:(a-1)+"px",position:"absolute"}};f.style[e.isRTL?"right":"left"]=0;e.stretcher=c.createChild(f,c.dom.firstChild)}if(e.hasOwnProperty("viewSize")&&d<=e.viewSize){e.stretcher.dom.style.display="none"}else{e.stretcher.dom.style.marginTop=(a-1)+"px";e.stretcher.dom.style.display=""}}},refreshScroller:function(b,a){b.scrollManager.scroller.setSize({x:b.headerCt.getTableWidth(),y:a});b.scrollManager.refresh()},setViewSize:function(m){var l=this,p=l.store,n=l.view,q=n.all,c=q.getCount(),a,d,h=l.view.lockingPartner&&l.view.lockingPartner.bufferedRenderer,o=c-m,f,e,b,g,k;if(o){l.scrollTop=l.view.getScrollY();l.viewSize=m;if(p.isBufferedStore){p.setViewSize(m)}if(c){k=p.getCount();a=q.startIndex;d=Math.min(a+m-1,k-1);if(!(a===q.startIndex&&d===q.endIndex)){if(h){h.disable()}if(o<0){if(k>c){p.getRange(q.endIndex+1,d,{callback:function(i,j){g=n.doAdd(i,j);n.fireEvent("itemadd",i,j,g)}})}}else{a=q.endIndex-(o-1);d=q.endIndex;q.removeRange(a,d,true);if(n.hasListeners.itemremove){b=p.getRange(a,d);for(f=d,e=b.length-1;e>=0;--f,--e){n.fireEvent("itemremove",b[e],f,l)}}}if(h){h.enable()}}}}return m},getViewRange:function(){var b=this,c=b.view.all,a=b.store,d=0;if(c.getCount()){d=c.startIndex}else{if(a.isBufferedStore){if(!a.currentPage){a.currentPage=1}d=c.startIndex=(a.currentPage-1)*(a.pageSize||1);a.currentPage=1}}if(a.data.getCount()){return a.getRange(d,d+b.viewSize-1)}else{return[]}},onReplace:function(h,i,b,d){var f=this,g=f.view,j=g.all,a=j.getCount(),e=h.getCount(),c=j.first(true);if(!a||i<=f.getLastVisibleRowIndex()+f.leadingBufferZone||(a<f.viewSize&&d.length>b.length)||e<a){f.refreshView();a=j.getCount();if(d.length<b.length){if(j.endIndex===e-1&&a<f.viewSize&&a<e){j.scroll(h.getRange(Math.max(0,e-f.viewSize),j.startIndex-1),-1,0);if(e>f.viewSize){f.setBodyTop(f.bodyTop-c.offsetTop)}}if(e<=f.viewSize){if(f.stretcher){f.setBodyTop(0);f.stretcher.dom.style.display="none"}}else{if(f.bodyTop+g.body.dom.offsetHeight-1>f.scrollHeight){f.setBodyTop(f.scrollHeight-(g.body.dom.offsetHeight-1))}}}}else{f.refreshing=true;f.onViewRefresh(g);f.refreshing=false}},scrollTo:function(k,d,o,q){var h=this,j=h.view,p=j.el.dom,l=h.store,i=l.getCount(),g,b,f,a,n,c,m,e;if((c=j.dataSource.groupingFeature)&&(c.collapsible!==false)){k=Math.min(Math.max(k,0),j.store.getCount()-1);e=j.store.getAt(k);m=c.getGroup(e);if(m.isCollapsed){c.expand(m.getGroupKey());i=l.getCount()}k=c.indexOf(e)}else{k=Math.min(Math.max(k,0),i-1)}g=Math.max(Math.min(k-(Math.floor((h.leadingBufferZone+h.trailingBufferZone)/2)),i-h.viewSize+1),0);n=Math.max(g*h.rowHeight-h.tableTopBorderWidth,0);b=Math.min(g+h.viewSize-1,i-1);l.getRange(g,b,{callback:function(s,t,r){h.renderRange(t,r,true);f=l.data.getRange(k,k+1)[0];a=j.getNode(f);j.body.translate(null,h.bodyTop=n);h.position=h.scrollTop=n=Math.min(Math.max(0,n-j.body.getOffsetsTo(a)[1]),p.scrollHeight-p.clientHeight);j.setScrollY(n);if(Ext.isIE){j.setScrollY(n)}if(d){j.selModel.select(f)}if(o){o.call(q||h,k,f)}}})},onViewScroll:function(){var f=this,c=f.store,a=(c.getCount()),e,h,g=f.scrollTop=f.view.getScrollY(),b=false,d=f.view.lockingPartner&&f.view.lockingPartner.bufferedRenderer;if(!(f.disabled||a<f.viewSize)){e=g-f.position;h=e>0?1:-1;if(Math.abs(e)>=20||(h!==f.lastScrollDirection)){f.lastScrollDirection=h;b=f.handleViewScroll(f.lastScrollDirection)}}if(!b){if(d&&d.scrollTop!==g){d.view.setScrollY(d.position=g)}}},handleViewScroll:function(g){var e=this,f=e.view.all,a=e.store,h=e.viewSize,c=(a.getCount())-1,d,b;if(g===-1){if(f.startIndex){if(e.topOfViewCloseToEdge()){d=Math.max(0,e.getLastVisibleRowIndex()+e.trailingBufferZone-h)}}}else{if(f.endIndex<c){if(e.bottomOfViewCloseToEdge()){d=Math.max(0,e.getFirstVisibleRowIndex()-e.trailingBufferZone)}}}if(d!=null){b=Math.min(d+h-1,c);if(e.variableRowHeight&&b===f.endIndex&&b<c){b++;e.viewSize=h++;if(a.isBufferedStore){a.setViewSize(e.viewSize)}}if(d!==f.startIndex||b!==f.endIndex){e.renderRange(d,b);return true}}},bottomOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop+a.view.body.dom.offsetHeight<a.scrollTop+a.view.lastBox.height+(a.numFromEdge*a.rowHeight)}else{return(a.view.all.endIndex-a.getLastVisibleRowIndex())<a.numFromEdge}},topOfViewCloseToEdge:function(){var a=this;if(a.variableRowHeight){return a.bodyTop>a.scrollTop-(a.numFromEdge*a.rowHeight)}else{return(a.getFirstVisibleRowIndex()-a.view.all.startIndex)<a.numFromEdge}},refreshView:function(g){var d=this,f=d.view.all,a=d.store,b=(a.getCount())-1,e,c=d.view.grid.containsFocus;g=Math.max(0,Math.min(g==null?f.startIndex:g,b-(d.viewSize-d.leadingBufferZone)+1));e=Math.min(Math.max(f.startIndex+d.viewSize-1,d.getLastVisibleRowIndex()+d.leadingBufferZone),b);if(e-g+1>d.viewSize){g=e-d.viewSize+1}a.getRange(g,e,{callback:d.doRefreshView,scope:d,containedFocus:c})},doRefreshView:function(g,j,f,l){var h=this,i=h.view,c=i.getNavigationModel(),k=i.all,b=k.getCount(),e,a=j!==k.startIndex,d;if(i.refreshCounter){i.refreshing=h.refreshing=true;i.clearViewEl(true);if(g.length){e=i.doAdd(g,j);i.refreshSize(k.getCount()!==b);if(a){if(j>k.startIndex){d+=k.item(j,true).offsetTop}else{if(h.variableRowHeight){d=h.scrollTop-h.rowHeight*(h.scrollTop<h.position?h.leadingBufferZone:h.trailingBufferZone)}else{d=j*h.rowHeight-h.tableTopBorderWidth}}h.setBodyTop(d)}i.fireEvent("refresh",i,g)}if(l.containedFocus){c.setPosition(c.getLastFocused(),null,null,null,true)}i.headerCt.setSortState();i.refreshNeeded=i.refreshing=h.refreshing=false}else{i.refresh()}},renderRange:function(f,a,e){var c=this,d=c.view.all,b=c.store;if(!(f===d.startIndex&&a===d.endIndex)){if(b.rangeCached(f,a)){c.cancelLoad();if(c.synchronousRender||e){c.onRangeFetched(null,f,a)}else{if(!c.renderTask){c.renderTask=new Ext.util.DelayedTask(c.onRangeFetched,c,null,false)}c.renderTask.delay(1,null,null,[null,f,a])}}else{c.attemptLoad(f,a)}}},onRangeFetched:function(k,d,c,b,l){var s=this,j=s.view,a,h=j.all,e,r=0,o,f,g=s.view.lockingPartner&&s.view.lockingPartner.bufferedRenderer,p,q,n,m=s.variableRowHeight;if(j.isDestroyed){return}if(k){s.scrollTop=s.view.getScrollY()}else{k=s.store.getRange(d,c);if(!k){return}}if(m){o=s.scrollTop-s.rowHeight*(s.scrollTop<s.position?s.leadingBufferZone:s.trailingBufferZone)}else{o=d*s.rowHeight-s.tableTopBorderWidth}if(d<h.startIndex&&c>h.endIndex){q=h.startIndex-d;j.clearViewEl(true);p=j.doAdd(k,d);j.fireEvent("itemadd",k,d,p);for(n=0;n<q;n++){r-=p[n].offsetHeight}s.setBodyTop(s.bodyTop+r);return}if(s.teleported||d>h.endIndex||c<h.startIndex){j.clearViewEl(true);f=o;s.teleported=false}if(!h.getCount()){p=j.doAdd(k,d);j.fireEvent("itemadd",k,d,p)}else{if(c>h.endIndex){e=Math.max(d-h.startIndex,0);if(m){r=h.item(h.startIndex+e,true).offsetTop}h.scroll(Ext.Array.slice(k,h.endIndex+1-d),1,e,d,c);if(m){f=s.bodyTop+r}else{f=o}}else{e=Math.max(h.endIndex-c,0);a=h.startIndex;h.scroll(Ext.Array.slice(k,0,h.startIndex-d),-1,e,d,c);if(m){f=s.bodyTop-h.item(a,true).offsetTop;if(!h.startIndex){if(f){j.setScrollY(s.position=(s.scrollTop-=f));f=0}}else{if(f<0){r=h.startIndex*s.rowHeight;j.setScrollY(s.position=(s.scrollTop+=r));f=s.bodyTop+r}}}else{f=o}}}s.position=s.scrollTop;f=Math.max(Math.floor(f),0);if(j.positionBody){s.setBodyTop(f)}if(g&&!g.disabled&&!l){g.onRangeFetched(null,d,c,b,true);if(g.bodyTop!==f){g.setBodyTop(f)}if(g.scrollTop!==s.scrollTop){g.view.setScrollY(g.scrollTop=g.position=s.scrollTop)}}},setBodyTop:function(d){var e=this,b=e.view,c=e.store,a=b.body;a.translate((e.isRTL&&Ext.supports.xOriginBug&&b.scrollFlags.y)?Ext.getScrollbarSize().width:null,e.bodyTop=d);if(e.variableRowHeight){if(b.all.endIndex===(c.getCount())-1){e.stretchView(b,e.bodyTop+a.dom.offsetHeight-1)}else{if(e.bodyTop+a.dom.offsetHeight-1>e.scrollHeight){e.stretchView(b,e.scrollHeight+=((c.getCount())-b.all.endIndex)*e.rowHeight)}}}},getFirstVisibleRowIndex:function(j,c,b,f){var g=this,h=g.view,l=h.all,a=l.elements,d=g.viewClientHeight,e,k,i=g.bodyTop;if(l.getCount()&&g.variableRowHeight){if(!arguments.length){j=l.startIndex;c=l.endIndex;b=g.scrollTop;f=b+d;if(i>f||i+h.body.dom.offsetHeight<b){g.teleported=true;return Math.floor(g.scrollTop/g.rowHeight)}e=j+Math.min(g.numFromEdge+((g.lastScrollDirection===-1)?g.leadingBufferZone:g.trailingBufferZone),Math.floor((c-j)/2))}else{e=j+Math.floor((c-j)/2)}k=i+a[e].offsetTop;if(k+a[e].offsetHeight<b){return g.getFirstVisibleRowIndex(e+1,c,b,f)}if(k<=b){return e}else{if(e!==j){return g.getFirstVisibleRowIndex(j,e-1,b,f)}}}return Math.floor(g.scrollTop/g.rowHeight)},getLastVisibleRowIndex:function(k,c,b,f){var h=this,i=h.view,m=i.all,a=m.elements,d=h.viewClientHeight,e,l,g,j=h.bodyTop;if(m.getCount()&&h.variableRowHeight){if(!arguments.length){k=m.startIndex;c=m.endIndex;b=h.scrollTop;f=b+d;if(j>f||j+i.body.dom.offsetHeight<b){h.teleported=true;return Math.floor(h.scrollTop/h.rowHeight)+Math.ceil(d/h.rowHeight)}e=c-Math.min(h.numFromEdge+((h.lastScrollDirection===1)?h.leadingBufferZone:h.trailingBufferZone),Math.floor((c-k)/2))}else{e=k+Math.floor((c-k)/2)}l=j+a[e].offsetTop;if(l>f){return h.getLastVisibleRowIndex(k,e-1,b,f)}g=l+a[e].offsetHeight;if(g>=f){return e}else{if(e!==c){return h.getLastVisibleRowIndex(e+1,c,b,f)}}}return h.getFirstVisibleRowIndex()+Math.ceil(d/h.rowHeight)},getScrollHeight:function(f){var g=this,a=g.view,h=a.all,c=g.store,d=c.getCount(),b,e;if(!d){return 0}if(!g.hasOwnProperty("rowHeight")){if(b=h.getCount()){g.rowHeight=g.variableRowHeight?Math.floor(a.body.dom.clientHeight/b):h.first(true).offsetHeight}}e=Math.floor(d*g.rowHeight);if(!f){if(e&&(h.endIndex===d-1)){e=Math.max(e,g.bodyTop+a.body.dom.offsetHeight-1)}}return g.scrollHeight=e},attemptLoad:function(c,a){var b=this;if(b.scrollToLoadBuffer){if(!b.loadTask){b.loadTask=new Ext.util.DelayedTask(b.doAttemptLoad,b,[])}b.loadTask.delay(b.scrollToLoadBuffer,b.doAttemptLoad,b,[c,a])}else{b.store.getRange(c,a,{callback:b.onRangeFetched,scope:b,fireEvent:false})}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(b,a){this.store.getRange(b,a,{callback:this.onRangeFetched,scope:this,fireEvent:false})},destroy:function(){var b=this,a=b.view;if(a&&a.el){a.un("scroll",b.onViewScroll,b)}Ext.destroy(b.viewListeners,b.storeListeners,b.gridListeners)}},function(a){if(Ext.supports.Touch){a.prototype.leadingBufferZone=a.prototype.trailingBufferZone=2;a.prototype.numFromEdge=1}});Ext.define("Ext.grid.plugin.Editing",{extend:Ext.plugin.Abstract,alias:"editing.editing",mixins:{observable:Ext.util.Observable},clicksToEdit:2,triggerEvent:undefined,relayedEvents:["beforeedit","edit","validateedit","canceledit"],defaultFieldUI:"default",defaultFieldXType:"textfield",editStyle:"",constructor:function(a){var b=this;b.callParent(arguments);b.mixins.observable.constructor.call(b);b.on("edit",function(c,d){b.fireEvent("afteredit",c,d)})},init:function(a){var b=this;b.grid=a;b.view=a.view;b.initEvents();b.mon(a,{beforereconfigure:b.onBeforeReconfigure,reconfigure:b.onReconfigure,scope:b,beforerender:{fn:b.onReconfigure,single:true,scope:b}});a.relayEvents(b,b.relayedEvents);if(b.grid.ownerLockable){b.grid.ownerLockable.relayEvents(b,b.relayedEvents)}a.isEditable=true;a.editingPlugin=a.view.editingPlugin=b},resolveListenerScope:function(a){return this.grid.resolveListenerScope(a)},onBeforeReconfigure:function(){this.reconfiguring=true},onReconfigure:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns());delete this.reconfiguring},destroy:function(){var b=this,a=b.grid;Ext.destroy(b.keyNav);b.clearListeners();if(a){a.editingPlugin=a.view.editingPlugin=b.grid=b.view=b.editor=b.keyNav=null}},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){if(a.isGroupHeader){a=a.getGridColumns()}else{if(!Ext.isArray(a)){a=[a]}}var d=this,f,e=a.length,b;for(f=0;f<e;f++){b=a[f];if(!b.getEditor){b.getEditor=function(c,g){return d.getColumnField(this,g)}}if(!b.hasEditor){b.hasEditor=function(){return d.hasColumnField(this)}}if(!b.setEditor){b.setEditor=function(c){d.setColumnField(this,c)}}}},removeFieldAccessors:function(a){if(a.isGroupHeader){a=a.getGridColumns()}else{if(!Ext.isArray(a)){a=[a]}}var e,d=a.length,b;for(e=0;e<d;e++){b=a[e];b.getEditor=b.hasEditor=b.setEditor=b.field=b.editor=null}},getColumnField:function(c,a){var b=this,d=c.field;if(!(d&&d.isFormField)){d=c.field=b.createColumnField(c,a)}if(d&&d.ui==="default"&&!d.hasOwnProperty("ui")){d.ui=b.defaultFieldUI}return d},hasColumnField:function(a){return !!(a.field&&a.field.isComponent)},setColumnField:function(a,b){a.field=b;a.field=this.createColumnField(a)},createColumnField:function(c,a){var d=c.field,b;if(!d&&c.editor){d=c.editor;c.editor=null}if(!d&&a){d=a}if(d){b=c.dataIndex;if(d.isComponent){d.column=c}else{if(Ext.isString(d)){d={name:b,xtype:d,column:c}}else{d=Ext.apply({name:b,column:c},d)}d=Ext.ComponentManager.create(d,this.defaultFieldXType)}d.dataIndex=b;d.isEditorComponent=true;c.field=d}return d},initEvents:function(){var a=this;a.initEditTriggers();a.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var b=this,a=b.view;if(b.triggerEvent=="cellfocus"){b.mon(a,"cellfocus",b.onCellFocus,b)}else{if(b.triggerEvent=="rowfocus"){b.mon(a,"rowfocus",b.onRowFocus,b)}else{if(a.getSelectionModel().isCellModel){a.onCellFocus=b.beforeViewCellFocus.bind(b)}b.mon(a,b.triggerEvent||("cell"+(b.clicksToEdit===1?"click":"dblclick")),b.onCellClick,b)}}b.initAddRemoveHeaderEvents();b.view.getNavigationModel().addKeyBindings({enter:b.onEnterKey,esc:b.onEscKey,scope:b})},beforeViewCellFocus:function(a){if(this.view.selModel.keyNavigation||!this.editing||!this.isCellEditable||!this.isCellEditable(a.row,a.columnHeader)){this.view.focusCell.apply(this.view,arguments)}},onRowFocus:function(a,c,b){this.startEdit(c,0)},onCellFocus:function(c,b,a){this.startEdit(a.row,a.column)},onCellClick:function(i,j,c,f,k,a,h){var d=i.expanderSelector,b=i.ownerCt.getColumnManager().getHeaderAtIndex(c),g=b.getEditor(f);if(this.shouldStartEdit(g)&&(!d||!h.getTarget(d))){this.startEdit(f,b)}},initAddRemoveHeaderEvents:function(){var a=this,b=a.grid.headerCt;a.mon(b,{scope:a,add:a.onColumnAdd,columnmove:a.onColumnMove,beforedestroy:a.beforeGridHeaderDestroy})},onColumnAdd:function(a,b){this.initFieldAccessors(b)},onColumnMove:Ext.emptyFn,onEnterKey:function(g){if(g.view===this.view){var f=this,c=f.grid,b=c.getView().getNavigationModel(),a,h,d;h=b.getPosition();if(h){a=h.record;d=h.column}if(a&&d){f.startEdit(a,d)}}},onEscKey:function(a){return this.cancelEdit()},beforeEdit:Ext.emptyFn,shouldStartEdit:function(a){return !!a},startEdit:function(b,e){var d=this,c,a=d.grid.lockable?d.grid:d.view;if(!a.componentLayoutCounter){a.on({boxready:Ext.Function.bind(d.startEdit,d,[b,e]),single:true});return false}if(d.disabled||d.grid.collapsed||!d.grid.view.isVisible(true)){return false}c=d.getEditingContext(b,e);if(c==null){return false}if(!d.preventBeforeCheck){if(d.beforeEdit(c)===false||d.fireEvent("beforeedit",d,c)===false||c.cancel){return false}}return c},getEditingContext:function(e,c){var g=this,a=g.grid,f=a.visibleColumnManager,h,i,b,d,j;if(Ext.isNumber(c)){c=f.getHeaderAtIndex(c)}if(!c){return}if(c.hidden){c=c.next(":not([hidden])")||c.prev(":not([hidden])")}h=c.getOwnerHeaderCt().view;i=h.getRow(e);if(!i){return}d=f.getHeaderIndex(c);if(Ext.isNumber(e)){b=e;e=h.getRecord(i)}else{b=h.indexOf(i)}if(!e){return}j=new Ext.grid.CellContext(h).setAll(h,b,d,e,c);j.grid=a;j.store=h.dataSource;j.field=c.dataIndex;j.value=e.get(c.dataIndex);j.row=i;return j},cancelEdit:function(){var a=this;a.editing=false;a.fireEvent("canceledit",a,a.context)},completeEdit:function(){var a=this;if(a.editing&&a.validateEdit()){a.fireEvent("edit",a,a.context)}a.context=null;a.editing=false},validateEdit:function(){var b=this,a=b.context;return b.fireEvent("validateedit",b,a)!==false&&!a.cancel}});Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:Ext.grid.plugin.Editing,lockableScope:"both",init:function(a){var c=this,b=c.lockingPartner;c.callParent(arguments);if(b){if(b.editors){c.editors=b.editors}else{c.editors=b.editors=new Ext.util.MixedCollection(false,function(d){return d.editorId})}}else{c.editors=new Ext.util.MixedCollection(false,function(d){return d.editorId})}},beforeGridHeaderDestroy:function(g){var f=this,c=f.grid.getColumnManager().getColumns(),a=c.length,b,e,d;for(b=0;b<a;b++){e=c[b];d=f.editors.getByKey(e.getItemId());if(!d){d=e.editor||e.field}Ext.destroy(d);f.removeFieldAccessors(e)}},onReconfigure:function(c,a,b){if(b){this.editors.clear()}this.callParent()},destroy:function(){var a=this;if(a.editors){a.editors.each(Ext.destroy,Ext);a.editors.clear()}a.callParent(arguments)},initCancelTriggers:function(){var b=this,a=b.grid;b.mon(a,{columnresize:b.cancelEdit,columnmove:b.cancelEdit,scope:b})},isCellEditable:function(a,d){var c=this,b=c.getEditingContext(a,d);if(c.grid.view.isVisible(true)&&b){d=b.column;a=b.record;if(d&&c.getEditor(a,d)){return true}}},startEdit:function(b,f,c){var e=this,a,g,h,d;if(!c){e.preventBeforeCheck=true;c=e.callParent(arguments);delete e.preventBeforeCheck;if(c===false){return false}}if(c&&c.view.isVisible(true)){b=c.record;f=c.column;c.originalValue=c.value=b.get(f.dataIndex);g=(f&&f.getEditor(b))&&!(e.beforeEdit(c)===false||e.fireEvent("beforeedit",e,c)===false||c.cancel);if(g){h=e.getActiveEditor();d=e.getEditor(b,f);if(h){a=d===h;e.completeEdit(!!d)}}else{return false}e.context=c;c.view.scrollCellIntoView(c.view.getCell(b,f));if(d){if(a){d.editing=false;if(Ext.isIE){d.selectSameEditor=true}}e.showEditor(d,c,c.value);if(h&&!a){h.hide()}return true}return false}},showEditor:function(e,a,j){var h=this,d=a.record,i=a.view,c=a.column,b=i.getSelectionModel(),f,g=b.preventFocus;if(!c.up(h.view.ownerCt)){return h.lockingPartner.showEditor(e,h.lockingPartner.getEditingContext(d,c),j)}h.setEditingContext(a);h.setActiveEditor(e);h.setActiveRecord(d);h.setActiveColumn(c);if(!b.isCellSelected(i,d,c)){f=b.getSelectionMode();if(f!=="MULTI"||!b.getSelection().length||(b.getSelection().length===1&&b.isSelected(d))){b.preventFocus=false;b.selectByPosition({row:d,column:c,view:i},f==="MULTI");b.preventFocus=g}else{if(!a.grid.containsFocus){i.getNavigationModel().setPosition(100,a,null,null,null,true)}}}i.getNavigationModel().setPosition();e.startEdit(i.getCell(d,c),j,a);h.editing=true;h.scroll=i.el.getScroll()},completeEdit:function(a){var b=this.getActiveEditor();if(b){b.completeEdit(a);this.editing=false}},setEditingContext:function(a){this.context=a;if(this.lockingPartner){this.lockingPartner.context=a}},setActiveEditor:function(a){this.activeEditor=a;if(this.lockingPartner){this.lockingPartner.activeEditor=a}},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a;if(this.lockingPartner){this.lockingPartner.activeColumn=a}},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a;if(this.lockingPartner){this.lockingPartner.activeRecord=a}},getActiveRecord:function(){return this.activeRecord},getEditor:function(a,e){var g=this,f=g.editors,d=e.getItemId(),c=f.getByKey(d),b=g.grid.ownerLockable||g.grid;if(!c){c=e.getEditor(a);if(!c){return false}if(c instanceof Ext.grid.CellEditor){c.floating=true}else{c=new Ext.grid.CellEditor({floating:true,editorId:d,field:c})}c.field.excludeForm=true;if(c.ownerCt!==b){b.add(c);c.on({scope:g,specialkey:g.onSpecialKey,complete:g.onEditComplete,canceledit:g.cancelEdit});e.on("removed",g.onColumnRemoved,g)}f.add(c)}if(e.isTreeColumn){c.isForTree=e.isTreeColumn;c.addCls(Ext.baseCSSPrefix+"tree-cell-editor")}c.setGrid(g.grid);c.editingPlugin=g;return c},onColumnRemoved:function(d){var e=this,b=e.context,c,a=e.grid.ownerLockable||e.grid;if(b&&b.column===d){e.cancelEdit()}d.un("removed",e.onColumnRemoved,e);if(d.getEditor&&(c=d.getEditor())&&c.ownerCt===a){a.remove(c);c.un({scope:e,specialkey:e.onSpecialKey,complete:e.onEditComplete,canceledit:e.cancelEdit})}},setColumnField:function(b,c){var a=this.editors.getByKey(b.getItemId());Ext.destroy(a,b.field);this.editors.removeAtKey(b.getItemId());this.callParent(arguments)},getCell:function(a,b){return this.grid.getView().getCell(a,b)},onSpecialKey:function(a,c,b){var d;if(b.getKey()===b.TAB){b.stopEvent();if(a){a.onEditorTab(b)}d=a.up("tablepanel").getSelectionModel();if(d.onEditorTab){return d.onEditorTab(a.editingPlugin,b)}}},onEditComplete:function(g,j,c){var h=this,a=h.getActiveColumn(),b=h.context,i,d,f,e;if(a){i=b.view;d=i.getSelectionModel();e=d.getSelectionMode()==="MULTI"&&(d.getSelection().length>1||!d.isSelected(f));f=b.record;h.setActiveEditor(null);h.setActiveColumn(null);h.setActiveRecord(null);b.value=j;if(!h.validateEdit()){h.editing=false;return}if(!f.isEqual(j,c)){f.set(a.dataIndex,j);b.rowIdx=i.indexOf(f)}i.getNavigationModel().deferSetPosition(100,b,null,null,null,e);h.fireEvent("edit",h,b);h.editing=false}},cancelEdit:function(){var e=this,c=e.context,b,g,a,f,d=e.getActiveEditor();if(d){e.setActiveEditor(null);e.setActiveColumn(null);e.setActiveRecord(null);b=c.view;g=b.getSelectionModel();f=g.getSelectionMode()==="MULTI"&&(g.getSelection().length>1||!g.isSelected(a));if(d.field){e.context.value=("editedValue" in d)?d.editedValue:d.getValue();d.cancelEdit()}c.view.getNavigationModel().deferSetPosition(100,c,null,null,null,f);e.callParent(arguments);return}return true},startEditByPosition:function(b){var d=this,a=d.grid.getColumnManager(),c;if(!b.isCellContext){b.column=d.grid.getColumnManager().getColumns()[b.column];b.record=d.view.dataSource.getAt(b.row)}c=a.getHeaderIndex(b.column);b.column=a.getVisibleHeaderClosestToIndex(c);return d.startEdit(b.record,b.column)}});Ext.define("Ext.layout.component.FieldSet",{extend:Ext.layout.component.Body,alias:["layout.fieldset"],type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(a){if(a.target.collapsed){a.heightModel=this.sizeModels.shrinkWrap}},beginLayoutCycle:function(b){var c=b.target,a;this.callParent(arguments);if(c.collapsed){b.setContentHeight(0);b.restoreMinHeight=c.minHeight;delete c.minHeight;if(b.widthModel.shrinkWrap){a=c.lastComponentSize;b.setContentWidth((a&&a.contentWidth)||this.defaultCollapsedWidth)}}},finishedLayout:function(c){var a=this.owner,b=c.restoreMinHeight;this.callParent(arguments);if(b){a.minHeight=b}},calculateOwnerHeightFromContentHeight:function(d,c){var a=d.getBorderInfo(),b=d.target.legend;return d.getProp("contentHeight")+d.getPaddingInfo().height+(Ext.isIE8?d.bodyContext.getPaddingInfo().top:0)+(b?b.getHeight():a.top)+a.bottom},publishInnerHeight:function(c,a){var b=c.target.legend;if(b){a-=b.getHeight()}this.callParent([c,a])},getLayoutItems:function(){var a=this.owner.legend;return a?[a]:[]}});Ext.define("Ext.resizer.BorderSplitterTracker",{extend:Ext.resizer.SplitterTracker,getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var y=this,a=y.splitter,n=a.collapseTarget,d=a.defaultSplitMin,g=a.vertical?"Width":"Height",c="min"+g,u="max"+g,h="get"+g,t=a.neighbors,e=t.length,m=n.el.getBox(),f=m.x,o=m.y,x=m.right,j=m.bottom,q=a.vertical?(x-f):(j-o),w,k,r,l,v,s,p,b;l=(n[c]||Math.min(q,d))-q;v=n[u];if(!v){v=1000000000}else{v-=q}b=q;for(w=0;w<e;++w){k=t[w];q=k[h]();r=k[u];if(r===null){r=undefined}s=q-r;p=q-(k[c]||Math.min(q,d));if(!isNaN(s)){if(l<s){l=s}}if(v>p){v=p}}if(v-l<2){return null}m=new Ext.util.Region(o,x,j,f);y.constraintAdjusters[y.getCollapseDirection()](m,l,v,a);y.dragInfo={minRange:l,maxRange:v,targetSize:b};return m},constraintAdjusters:{left:function(c,a,b,d){c[0]=c.x=c.left=c.right+a;c.right+=b+d.getWidth()},top:function(c,a,b,d){c[1]=c.y=c.top=c.bottom+a;c.bottom+=b+d.getHeight()},bottom:function(c,a,b,d){c.bottom=c.top-a;c.top-=b+d.getHeight()},right:function(c,a,b,d){c.right=c.left-a;c[0]=c.x=c.left=c.x-b+d.getWidth()}},onBeforeStart:function(j){var f=this,g=f.splitter,d=g.collapseTarget,b=g.neighbors,c=b.length,a,h;if(d.collapsed){return false}for(a=0;a<c;++a){h=b[a];if(h.collapsed&&h.isHorz===d.isHorz){return false}}if(!(f.constrainTo=f.calculateConstrainRegion())){return false}return true},performResize:function(i,h){var j=this,b=j.splitter,g=b.getCollapseDirection(),a=b.collapseTarget,f=j.splitAdjusters[b.vertical?"horz":"vert"],k=h[f.index],d=j.dragInfo,c;if(g=="right"||g=="bottom"){k=-k}k=Math.min(Math.max(d.minRange,k),d.maxRange);if(k){(c=b.ownerCt).suspendLayouts();f.adjustTarget(a,d.targetSize,k);c.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(b,a,c){b.flex=null;b.setSize(a+c)}},vert:{index:1,adjustTarget:function(b,a,c){b.flex=null;b.setSize(undefined,a+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}});Ext.define("Ext.selection.CellModel",{extend:Ext.selection.DataViewModel,alias:"selection.cellmodel",isCellModel:true,enableKeyNav:true,preventWrap:false,bindComponent:function(a){var c=this,b=a.grid||a.ownerCt;c.callParent([a]);if(b.optimizedColumnMove!==false){b.on("columnmove",c.onColumnMove,c)}},getViewListeners:function(){var a=this;return{refresh:a.onViewRefresh,scope:a}},getHeaderCt:function(){var b=this.navigationModel.getPosition(),a=b?b.view:this.primaryView;return a.headerCt},onNavigate:function(a){if(!a.record){return}this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(g,e,b){var d=this,f,c=d.getPosition(),a=d.view.store;if(g||g===0){if(g.isModel){f=a.indexOf(g);if(f!==-1){g={row:f,column:c?c.column:0}}else{g=null}}else{if(typeof g==="number"){g={row:g,column:0}}}}if(g){d.selectByPosition(g,b)}else{d.deselect()}},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return this.selecting?this.nextSelection:this.selection},setCurrentPosition:function(c,a,b){if(c&&!c.isCellContext){c=new Ext.grid.CellContext(this.view).setPosition({row:c.row,column:typeof c.column==="number"?this.view.getColumnManager().getColumns()[c.column]:c.column})}return this.setPosition(c,a,b)},setPosition:function(e,a,d){var c=this,b=c.selection;if(e){e=e.isCellContext?e.clone():new Ext.grid.CellContext(c.view).setPosition(e)}if(!d&&b){if(e&&(e.record===b.record&&e.column===b.column&&e.view===b.view)){e=null}else{c.onCellDeselect(c.selection,a)}}if(e){c.nextSelection=e;c.selecting=true;c.onCellSelect(c.nextSelection,a);c.selecting=false;return(c.selection=e)}return null},isCellSelected:function(a,e,c){var d=this,b,f=d.getPosition();if(f&&f.view===a){b=new Ext.grid.CellContext(a).setPosition({row:e,column:typeof c==="number"?a.getColumnManager().getColumns()[c]:c});return(b.record===f.record)&&(b.column===f.column)}},onStoreRemove:function(b,a,d){var c=this,e=c.getPosition();c.callParent(arguments);if(e&&b.getCount()&&b.indexOf(e.record)!==-1){e.setRow(e.record)}else{c.selection=null}},onStoreClear:function(){this.callParent(arguments);this.selection=null},onStoreAdd:function(){var a=this,b=a.getPosition();a.callParent(arguments);if(b){b.setRow(b.record)}else{a.selection=null}},onCellClick:function(c,a,f,b,h,d,g){if(d!==-1){this.setPosition(g.position)}},onCellSelect:function(a,b){if(a&&a.rowIdx!==undefined&&a.rowIdx>-1){this.doSelect(a.record,false,b)}},onCellDeselect:function(a,b){if(a&&a.rowIdx!==undefined){this.doDeselect(a.record,b)}},onSelectChange:function(c,b,h,a){var e=this,f,d,g,i;if(b){f=e.nextSelection;d="select"}else{f=e.selection;d="deselect"}g=f.view||e.primaryView;if((h||e.fireEvent("before"+d,e,c,f.rowIdx,f.colIdx))!==false&&a()!==false){if(b){if(!e.preventFocus){i=g.getNavigationModel();if(!f.isEqual(i.getPosition())){i.setPosition(f,null,null,null,true)}}g.onCellSelect(f)}else{g.onCellDeselect(f);delete e.selection}if(!h){e.fireEvent(d,e,c,f.rowIdx,f.colIdx)}}},onEditorTab:function(b,f){var c=this,d=f.shiftKey?"left":"right",g=b.context,a=g.view.walkCells(g,d,f,c.preventWrap);if(a){if(b.startEdit(a.record,a.column)){c.wasEditing=false}else{a.view.getNavigationModel().setPosition(a,null,f);c.wasEditing=true}}},refresh:function(){var b=this.getPosition(),a;if(b&&(a=this.store.indexOf(this.selected.last()))!==-1){b.rowIdx=a}},onColumnMove:function(d,e,b,c){var a=d.up("tablepanel");if(a){this.onViewRefresh(a.view)}},onUpdate:function(a){var b=this,c;if(b.isSelected(a)){c=b.selecting?b.nextSelection:b.selection;b.view.onCellSelect(c)}},onViewRefresh:function(b){var e=this,g=e.getPosition(),c,f=b.headerCt,a,d;if(g&&g.view===b){a=g.record;d=g.column;if(!d.isDescendantOf(f)){d=f.queryById(d.id)||f.down('[text="'+d.text+'"]')||f.down('[dataIndex="'+d.dataIndex+'"]')}if(g.record){if(d&&(b.store.indexOfId(a.getId())!==-1)){c=new Ext.grid.CellContext(b).setPosition({row:a,column:d});e.setPosition(c)}}else{e.selection=null}}},selectByPosition:function(a,b){this.setPosition(a,b)}});Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:Ext.selection.RowModel,mode:"MULTI",injectCheckbox:0,checkOnly:false,showHeaderCheckbox:undefined,checkSelector:"."+Ext.baseCSSPrefix+"grid-row-checker",headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",tdCls:Ext.baseCSSPrefix+"grid-cell-special "+Ext.baseCSSPrefix+"grid-cell-row-checker",constructor:function(){var a=this;a.callParent(arguments);if(a.mode==="SINGLE"&&a.showHeaderCheckbox!==true){a.showHeaderCheckbox=false}},beforeViewRender:function(b){var c=this,a;c.callParent(arguments);if(!c.hasLockedHeader()||b.headerCt.lockedCt){if(c.showHeaderCheckbox!==false){b.headerCt.on("headerclick",c.onHeaderClick,c)}c.addCheckbox(b,true);a=b.ownerCt;if(b.headerCt.lockedCt){a=a.ownerCt}c.mon(a,"reconfigure",c.onReconfigure,c)}},bindComponent:function(a){var b=this;b.sortable=false;b.callParent(arguments)},hasLockedHeader:function(){var a=this.views,c=a.length,b;for(b=0;b<c;b++){if(a[b].headerCt.lockedCt){return true}}return false},addCheckbox:function(a,b){var c=this,d=c.injectCheckbox,e=a.headerCt;if(d!==false){if(d==="first"){d=0}else{if(d==="last"){d=e.getColumnCount()}}Ext.suspendLayouts();if(a.getStore().isBufferedStore){c.showHeaderCheckbox=false}e.add(d,c.getHeaderConfig());Ext.resumeLayouts()}if(b!==true){a.refresh()}},onReconfigure:function(c,a,b){if(b){this.addCheckbox(this.views[0])}},toggleUiHeader:function(e){var b=this.views[0],d=b.headerCt,c=d.child("gridcolumn[isCheckerHd]"),a=this.checkerOnCls;if(c){if(e){c.addCls(a)}else{c.removeCls(a)}}},onHeaderClick:function(c,f,b){if(f.isCheckerHd){b.stopEvent();var a=this,d=f.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");a.preventFocus=true;if(d){a.deselectAll()}else{a.selectAll()}delete a.preventFocus}},getHeaderConfig:function(){var a=this,b=a.showHeaderCheckbox!==false;return{isCheckerHd:b,text:"&#160;",clickTargetName:"el",width:a.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",tdCls:a.tdCls,cls:b?Ext.baseCSSPrefix+"column-header-checkbox ":"",defaultRenderer:a.renderer.bind(a),editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader()}},renderEmpty:function(){return"&#160;"},refresh:function(){this.callParent(arguments);this.updateHeaderState()},renderer:function(f,c,b,g,e,d,a){return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker" role="presentation">&#160;</div>'},onSelectChange:function(){this.callParent(arguments);if(!this.suspendChange){this.updateHeaderState()}},onStoreLoad:function(){this.callParent(arguments);this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments);this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments);this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments);this.updateHeaderState()},maybeFireSelectionChange:function(a){if(a&&!this.suspendChange){this.updateHeaderState()}this.callParent(arguments)},resumeChanges:function(){this.callParent();if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var f=this,g=f.store,e=g.getCount(),h=f.views,j=false,a=0,b,d,c;if(!g.isBufferedStore&&e>0){b=f.selected;j=true;for(c=0,d=b.getCount();c<d;++c){if(g.indexOfId(b.getAt(c).id)===-1){break}++a}j=e===a}if(h&&h.length){f.toggleUiHeader(j)}}});Ext.define("Jarvus.util.AbstractAPI",{extend:Ext.data.Connection,qualifiedUrlRe:/^(https?:)?\/\//,jsonMimeTypeRe:/^application\/([^;\s]+\+)?json(;.+)?$/,config:{host:null,useSSL:false,pathPrefix:null,withCredentials:true,useDefaultXhrHeader:false,disableCaching:false},buildUrl:function(d){var c=this,b=c.getHost(),a=c.getPathPrefix();if(c.qualifiedUrlRe.test(d)){return d}if(a){d=a+d}if(b){d=(c.getUseSSL()?"https://":"http://")+b+d}return d},buildHeaders:function(a){return a},buildParams:function(a){return a||null},request:function(a){var b=this,c=b.jsonMimeTypeRe;return b.callParent([Ext.applyIf({url:b.buildUrl(a.url),params:b.buildParams(a.params),headers:b.buildHeaders(a.headers),timeout:a.timeout||30000,success:function(d){if(a.autoDecode!==false&&c.test(d.getResponseHeader("Content-Type"))){d.data=Ext.decode(d.responseText,true)}Ext.callback(a.success,a.scope,[d])},failure:function(d){if(a.autoDecode!==false&&c.test(d.getResponseHeader("Content-Type"))){d.data=Ext.decode(d.responseText,true)}if(d.aborted===true){Ext.callback(a.abort,a.scope,[d])}else{if(d.status==401||d.statusText.indexOf("Unauthorized")!==-1){Ext.override(Ext.Msg,{hide:function(){var g=this,f=g.cfg?g.cfg.hideManually:false;if(!f){g.callParent(arguments)}}});var e=Ext.Msg.show({hideManually:true,title:"Login Required",msg:"You've either logged out or your has session expired. Please login and try again.",buttonText:{yes:"Login",no:"Try Again",cancel:"Cancel"},scope:e,fn:function(f){if(f==="yes"){var g=window.open(b.buildUrl("/login"),"emergence-login");g.focus();return}else{if(f==="no"){b.request(a)}}e.cfg.hideManually=false;e.hide()}})}else{if(d.status==0){Ext.Msg.confirm("An error occurred","There was an error trying to reach the server. Do you want to try again?",function(f){if(f==="yes"){b.request(a)}})}else{Ext.callback(a.failure,a.scope,[d])}}}},scope:a.scope},a)])},setHostname:function(a){Ext.Logger.deprecate("hostname config is deprecated, use host instead");this.setHost(a)},getHostname:function(){Ext.Logger.deprecate("hostname config is deprecated, use host instead");return this.getHost()}});Ext.define("Emergence.util.AbstractAPI",{extend:Jarvus.util.AbstractAPI,alternateClassName:"Emergence.ext.util.AbstractAPI",config:{sessionData:null},buildHeaders:function(a){a=a||{};if(!("Accept" in a)){a.Accept="application/json"}return a},loadSessionData:function(c,a){var b=this;b.request({url:"/login",method:"GET",success:function(d){if(d.data&&d.data.success){b.setSessionData(d.data.data);Ext.callback(c,a,[true,d]);b.fireEvent("login",d.data.data)}else{Ext.callback(c,a,[false,d])}},exception:function(d){Ext.callback(c,a,[false,d])}})},login:function(e,a,d,b){var c=this;c.request({url:"/login",params:{"_LOGIN[username]":e,"_LOGIN[password]":a,"_LOGIN[returnMethod]":"POST"},success:function(f){if(f.data&&f.data.success){c.setSessionData(f.data.data);Ext.callback(d,b,[true,f]);c.fireEvent("login",f.data.data)}else{Ext.callback(d,b,[false,f])}},exception:function(f){Ext.callback(d,b,[false,f])}})},logout:function(b,a){this.request({url:"/login/logout",success:function(c){Ext.callback(b,a,[true,c]);this.fireEvent("logout",c.data)},exception:function(c){Ext.callback(b,a,[false,c])}})},uploadMedia:function(a,e,b){var c=this;var d=new FormData();d.append("mediaFile",a);c.request({method:"POST",url:"/media/upload",headers:{"Content-Type":null},rawData:d,success:function(f){var h=f.data&&f.data.success,g=h&&f.data.data;Ext.callback(e,b,[h,f,g])}})}});Ext.define("Slate.API",{extend:Emergence.util.AbstractAPI,singleton:true,getMySections:function(b,a){this.request({url:"/sections",method:"GET",params:{AllCourses:"false"},success:b,scope:a})}},function(a){var b=Ext.Object.fromQueryString(location.search);if(b.apiHost){a.setHost(b.apiHost.replace(/(^[a-zA-Z]+:\/\/)?([^/]+).*/,"$2"));a.setUseSSL(!!b.apiSSL)}});Ext.define("Jarvus.util.API",{extend:Jarvus.util.AbstractAPI,singleton:true});Ext.define("Jarvus.writer.API",{extend:Ext.data.writer.Json,alias:"writer.api",config:{writePhantomId:false,allowSingle:false},getRecordData:function(a){var c=this,b=false,d;if(a.phantom&&c.getWriteRecordId()&&!c.getWritePhantomId()){c.setWriteRecordId(false);b=true}d=this.callParent(arguments);if(b){c.setWriteRecordId(true)}return d}});Ext.define("Jarvus.proxy.API",{extend:Ext.data.proxy.Server,alias:"proxy.api",config:{connection:"Jarvus.util.API",writeFilterParams:true,headers:null,withCredentials:true,noCache:false,directionParam:false,filterParam:false,groupDirectionParam:false,groupParam:false,idParam:false,limitParam:false,pageParam:false,sortParam:false,startParam:false,writer:"api"},onClassExtended:function(b,d,a){var c=d.connection||d.config&&d.config.connection,e;if(typeof c==="string"){e=a.onBeforeCreated;a.onBeforeCreated=function(){var g=this,f=arguments;Ext.require(c,function(){e.apply(g,f)})}}},applyConnection:function(a){if(typeof a=="string"){Ext.syncRequire(a);a=Ext.ClassManager.get(a)}return a},getMethod:function(a){switch(a.getAction()){case"create":return"POST";case"read":return"GET";case"update":return"PATCH";case"destroy":return"DELETE"}},getParams:function(a){var b=this,c=b.callParent(arguments);if(b.getWriteFilterParams()){Ext.apply(c,b.getFilterParams(a))}return c},getFilterParams:function(a){var e=a.getAction(),g=e=="read",d=g&&a.getFilters(),f=(d&&d.length)||0,c=0,b,h={};for(;c<f;c++){b=d[c];if(b.getOperator()){Ext.Error.raise("Filter operators are not currently supported on the sparkpoints proxy")}h[b.getProperty()]=b.getValue()}return h},buildRequest:function(a){var d=this,c=d.callParent(arguments),e=c.getParams(),b=d.getIdParam();if(!b&&b in e){delete e[b]}c.setMethod(d.getMethod(c));c.setHeaders(d.getHeaders(c));c.setTimeout(d.getTimeout(c));c.setWithCredentials(d.getWithCredentials());return c},doRequest:function(a){var c=this,d=c.getWriter(),b=c.buildRequest(a);if(d&&a.allowWrite()){b=d.write(b)}b.setCallback(function(f,g,e){if(b===c.lastRequest){c.lastRequest=null}c.processResponse(g,a,b,e)});return c.sendRequest(b)},sendRequest:function(b){var a=this;b.setRawRequest(a.getConnection().request(Ext.applyIf({failureStatusCodes:[404]},b.getCurrentConfig())));a.lastRequest=b;return b},abortLastRequest:function(b){var a=this.lastRequest;if(a){a.options.silenceException=!!b;Ext.Ajax.abort(a)}},destroy:function(){this.lastRequest=null;this.callParent()}});Ext.define("Emergence.util.API",{extend:Emergence.util.AbstractAPI,alternateClassName:"Emergence.ext.util.API",singleton:true});Ext.define("Emergence.proxy.Records",{extend:Jarvus.proxy.API,alias:"proxy.records",alternateClassName:"Emergence.ext.proxy.Records",config:{connection:"Emergence.util.API",include:null,relatedTable:null,summary:false},url:null,idParam:"ID",pageParam:false,startParam:"offset",limitParam:"limit",sortParam:"sort",directionParam:"dir",filterParam:"q",simpleSortMode:true,reader:{type:"json",rootProperty:"data",totalProperty:"total",messageProperty:"message",keepRawData:true},writer:{type:"json",rootProperty:"data",writeAllFields:false,allowSingle:false},buildRequest:function(a){var d=this,b=Ext.apply({},(Ext.isFunction(a.getParams)?a.getParams():a.params)),e=Ext.applyIf(b,(Ext.isFunction(d.getExtraParams)?d.getExtraParams():d.extraParams)||{}),c=new Ext.data.Request({action:(Ext.isFunction(a.getAction)?a.getAction():a.action),records:a.getRecords(),operation:a,params:Ext.applyIf(e,d.getParams(a)),headers:d.headers,withCredentials:true});if(Ext.isFunction(c.setMethod)){c.setMethod(d.getMethod(c))}else{c.method=d.getMethod(c)}if(Ext.isFunction(c.setUrl)){c.setUrl(a.config.url||d.buildUrl(c))}else{c.url=(a.config.url||d.buildUrl(c))}if(Ext.isFunction(d.clearParamsDirty)){d.clearParamsDirty()}if(Ext.isFunction(a.setRequest)){a.setRequest(c)}else{a.request=c}return c},buildUrl:function(e){var d=this,a=Ext.isFunction(e.getOperation)?e.getOperation().getId():e.operation.id,b=Ext.isFunction(d.getIdParam)?d.getIdParam():d.idParam,c=d.getUrl(e),f=Ext.isFunction(e.getAction)?e.getAction():e.action;switch(f){case"read":if(a&&(b=="ID"||b=="Handle")){c+="/"+encodeURIComponent(a)}break;case"create":case"update":c+="/save";break;case"destroy":c+="/destroy";break}return c},getParams:function(b){var f=this,a=f.getInclude(),e=f.getRelatedTable(),c=f.getSummary(),d=f.idParam,h=(typeof b.getId=="function"?b.getId():b.id),g=f.callParent(arguments);if(h&&d!="ID"){g[d]=h}if(a){g.include=Ext.isArray(a)?a.join(","):a}if(e){g.relatedTable=Ext.isArray(e)?e.join(","):e}if(c){g.summary="true"}return g},encodeFilters:function(d){var a=[],c=d.length,b=0,e,f;for(;b<c;b++){e=d[b].serialize();f=e.value.toString();a[b]=e.property+":"+(f.match(/\s/)?'"'+f+'"':f)}return a.join(" ")},getMethod:function(a){switch(a.getAction()){case"read":return"GET";case"create":case"update":case"destroy":return"POST"}}});Ext.define("Slate.proxy.Records",{extend:Emergence.proxy.Records,alias:"proxy.slate-records",connection:"Slate.API"});Ext.define("Slate.model.CourseSection",{extend:Ext.data.Model,idProperty:"ID",identifier:"negative",fields:[{name:"ID",type:"int",allowNull:true},{name:"Class",type:"string",defaultValue:"Slate\\Courses\\Section"},{name:"Created",type:"date",dateFormat:"timestamp",allowNull:true},{name:"CreatorID",type:"int",allowNull:true},{name:"CourseID",type:"int"},{name:"Title",type:"string"},{name:"Code",type:"string"},{name:"Status",type:"string",defaultValue:"Live"},{name:"Notes",type:"string",allowNull:true},{name:"StudentsCapacity",type:"int",allowNull:true},{name:"TermID",type:"int",allowNull:true},{name:"ScheduleID",type:"int",allowNull:true},{name:"LocationID",type:"int",allowNull:true}],proxy:{type:"slate-records",url:"/sections"}});Ext.define("Slate.model.Term",{extend:Ext.data.Model,idProperty:"ID",identifier:"negative",fields:[{name:"ID",type:"int",useNull:true},{name:"Class",type:"string",defaultValue:"Slate\\Term"},{name:"Created",type:"date",dateFormat:"timestamp",useNull:true},{name:"CreatorID",type:"int",useNull:true},{name:"Title",type:"string",useNull:true},{name:"Handle",type:"string",useNull:true},{name:"Status",type:"string",defaultValue:"Live"},{name:"StartDate",type:"date",dateFormat:"Y-m-d",useNull:true},{name:"EndDate",type:"date",dateFormat:"Y-m-d",useNull:true},{name:"ParentID",type:"int",useNull:true},{name:"Left",type:"int",useNull:true},{name:"Right",type:"int",useNull:true}],proxy:{type:"slate-records",url:"/terms"}});Ext.define("Slate.model.progress.SectionTermReport",{extend:Ext.data.Model,idProperty:"ID",identifier:"negative",fields:[{name:"ID",type:"int",allowNull:true},{name:"Class",type:"string",defaultValue:"Slate\\Progress\\SectionTermReport"},{name:"Created",type:"date",dateFormat:"timestamp",allowNull:true,persist:false},{name:"CreatorID",type:"int",allowNull:true,persist:false},{name:"Modified",type:"date",dateFormat:"timestamp",allowNull:true,persist:false},{name:"ModifierID",type:"int",allowNull:true,persist:false},{name:"StudentID",type:"int"},{name:"SectionID",type:"int"},{name:"TermID",type:"int"},{name:"Status",type:"string",defaultValue:"draft"},{name:"Notes",type:"string",allowNull:true},{name:"NotesFormat",type:"string",defaultValue:"markdown"},{name:"StudentFirstName",type:"string",allowNull:true,mapping:"Student.FirstName"},{name:"StudentLastName",type:"string",allowNull:true,mapping:"Student.LastName"},{name:"student",persist:false},{name:"section",persist:false},{name:"term",persist:false}],proxy:{type:"slate-records",url:"/progress/section-term-reports",limitParam:null,startParam:null}});Ext.define("Slate.sbg.overrides.SectionTermReport",{override:"Slate.model.progress.SectionTermReport"},function(a){a.addFields([{name:"SbgWorksheet",convert:function(b){return typeof b=="string"?Ext.decode(b,true)||null:b}}])});Ext.define("Slate.sbg.overrides.SectionTermReport",{override:"Slate.model.progress.SectionTermReport"},function(b){b.addFields([{name:"SbgWorksheet",convert:function(a){return typeof a=="string"?Ext.decode(a,true)||null:a}}])});Ext.define("Slate.sbg.store.StandardsWorksheetPromptOptions",{extend:Ext.data.Store,config:{fields:["id","text"],data:[{id:0,text:"N/A"},{id:1,text:"1"},{id:2,text:"2"},{id:3,text:"3"},{id:4,text:"4"}]}});Ext.define("Slate.sbg.widget.WorksheetPrompt",{extend:Ext.container.Container,xtype:"sbg-worksheets-prompt",config:{prompt:null,grade:null},layout:"hbox",items:[{xtype:"combobox",width:60,submitValue:false,store:{xclass:"Slate.sbg.store.StandardsWorksheetPromptOptions"},valueField:"id",displayField:"text",queryMode:"local",forceSelection:true,autoSelect:true,matchFieldWidth:false},{itemId:"promptCmp",flex:1,xtype:"component",tpl:"{Prompt}"}],initComponent:function(){var j=this,h,f,g,i;j.callParent(arguments);h=j.combo=j.down("combobox");f=j.promptCmp=j.down("#promptCmp");if(g=j.getPrompt()){f.update(g.getData())}h.setValue(i||null)},getGrade:function(){return this.combo?this.combo.getValue():this.callParent()},setGrade:function(c){var d=this.combo;if(d){d.setValue(c);d.resetOriginalValue()}}});Ext.define("Slate.sbg.overrides.SectionTermReportEditorForm",{override:"SlateAdmin.view.progress.terms.EditorForm",initComponent:function(){var b=this;b.items=Ext.Array.insert(Ext.Array.clone(b.items),1,[{itemId:"sbgPromptsFieldset",xtype:"fieldset",title:"Standards-based grading worksheet",defaultType:"sbg-worksheets-prompt",hidden:true}]);b.callParent(arguments);b.sbgPromptsFieldset=b.down("#sbgPromptsFieldset")},getSbgGrades:function(){var h=this.sbgPromptsFieldset.items.getRange(),f=h.length,i=0,g,j={};for(;i<f;i++){g=h[i];if(g.isXType("sbg-worksheets-prompt")){j[g.getPrompt().getId()]=g.getGrade()}}return j},setSbgGrades:function(j){var h=this.sbgPromptsFieldset.items.getRange(),f=h.length,i=0,g;j=j||{};for(;i<f;i++){g=h[i];if(g.isXType("sbg-worksheets-prompt")){g.setGrade(j[g.getPrompt().getId()])}}}});Ext.define("Slate.sbg.model.StandardsWorksheet",{extend:Ext.data.Model,idProperty:"ID",identifier:"negative",fields:[{name:"ID",type:"int",allowNull:true},{name:"Class",type:"string",defaultValue:"Slate\\SBG\\Worksheet"},{name:"Created",type:"date",dateFormat:"timestamp",allowNull:true},{name:"CreatorID",type:"int",allowNull:true},{name:"Title",type:"string"},{name:"Handle",type:"string"},{name:"Status",type:"string",defaultValue:"published"},{name:"Description",type:"string"}],validators:{Title:"presence"},proxy:{type:"slate-records",url:"/sbg/worksheets",limitParam:null,startParam:null}});Ext.define("Slate.sbg.store.StandardsWorksheets",{extend:Ext.data.Store,model:"Slate.sbg.model.StandardsWorksheet",config:{pageSize:false,autoSync:false}});Ext.define("Slate.sbg.model.StandardsWorksheetPrompt",{extend:Ext.data.Model,idProperty:"ID",identifier:"negative",fields:[{name:"ID",type:"int",allowNull:true},{name:"Class",type:"string",defaultValue:"Slate\\SBG\\WorksheetPrompt"},{name:"Created",type:"date",dateFormat:"timestamp",allowNull:true},{name:"CreatorID",type:"int",allowNull:true},{name:"WorksheetID",type:"int"},{name:"Position",type:"int",defaultValue:1},{name:"Prompt",type:"string"},{name:"Status",type:"string",defaultValue:"published"}],validators:{Prompt:"presence"},proxy:{type:"slate-records",url:"/sbg/worksheet-prompts",limitParam:null,startParam:null}});Ext.define("Slate.sbg.store.StandardsWorksheetPrompts",{extend:Ext.data.Store,model:"Slate.sbg.model.StandardsWorksheetPrompt",config:{pageSize:false,autoSync:false,sorters:[{property:"Position"}]}});Ext.define("Slate.sbg.view.worksheets.Grid",{extend:Ext.grid.Panel,xtype:"sbg-worksheets-grid",title:"Available Worksheets",componentCls:"sbg-worksheets-grid",bbar:[{flex:1,itemId:"createWorksheetBtn",xtype:"button",text:"Create Worksheet",glyph:61525}],hideHeaders:true,store:"StandardsWorksheets",columns:[{flex:1,text:"Title",dataIndex:"Title",emptyCellText:"Untitled worksheet"},{xtype:"actioncolumn",width:20,items:[{action:"delete",iconCls:"prompt-delete glyph-danger",glyph:61526,tooltip:"Delete prompt"}]}]});Ext.define("Slate.sbg.view.worksheets.PromptsGrid",{extend:Ext.grid.Panel,xtype:"sbg-worksheets-promptsgrid",title:"Prompts",componentCls:"sbg-worksheets-promptsgrid",plugins:[{ptype:"cellediting",pluginId:"cellediting",clicksToEdit:1}],hideHeaders:true,store:"StandardsWorksheetPrompts",columns:[{text:"Position",width:40,dataIndex:"Position"},{flex:1,text:"Prompt",dataIndex:"Prompt",editor:{xtype:"textarea",allowBlank:false,maxLength:500,enforceMaxLength:true,enterIsSpecial:true}},{xtype:"actioncolumn",width:50,items:[{action:"up",glyph:61538,tooltip:"Move prompt up"},{action:"down",glyph:61539,tooltip:"Move prompt down"},{action:"delete",iconCls:"prompt-delete glyph-danger",glyph:61526,tooltip:"Delete prompt"}]}]});Ext.define("Slate.sbg.view.worksheets.Form",{extend:Ext.form.Panel,xtype:"sbg-worksheets-form",disabled:true,title:"Selected Worksheet",componentCls:"sbg-standards-worksheets-editor",bodyPadding:10,scrollable:"vertical",trackResetOnLoad:true,defaults:{labelWidth:70,labelAlign:"right",anchor:"100%"},items:[{xtype:"textfield",name:"Title",fieldLabel:"Title",allowBlank:false},{xtype:"textareafield",name:"Description",fieldLabel:"Description",emptyText:"Optional explanation of worksheet for parents and students",grow:true},{xtype:"sbg-worksheets-promptsgrid"}],buttons:[{itemId:"revertBtn",text:"Revert Changes",cls:"glyph-danger",glyph:61527},{xtype:"tbfill"},{itemId:"addPromptBtn",text:"Add Prompt",glyph:61525},{itemId:"saveBtn",text:"Save Changes",cls:"glyph-success",glyph:61528}]});Ext.define("Slate.sbg.view.worksheets.Manager",{extend:Ext.Container,xtype:"sbg-worksheets-manager",componentCls:"sbg-worksheets-manager",layout:"border",items:[{region:"west",split:true,xtype:"sbg-worksheets-grid",autoScroll:true,width:500},{region:"center",xtype:"sbg-worksheets-form",flex:1}]});Ext.define("Slate.sbg.controller.Worksheets",{extend:Ext.app.Controller,routes:{"settings/standards-worksheets":"showWorksheetSettings"},views:["worksheets.Manager@Slate.sbg.view"],stores:["StandardsWorksheets@Slate.sbg.store","StandardsWorksheetPrompts@Slate.sbg.store"],refs:{settingsNavPanel:"settings-navpanel",managerCt:{selector:"sbg-worksheets-manager",autoCreate:true,xtype:"sbg-worksheets-manager"},grid:"sbg-worksheets-grid",form:"sbg-worksheets-form",titleField:"sbg-worksheets-form field[name=Title]",promptsGrid:"sbg-worksheets-promptsgrid",revertBtn:"sbg-worksheets-form button#revertBtn",saveBtn:"sbg-worksheets-form button#saveBtn"},control:{managerCt:{activate:"onManagerCtActivate"},"sbg-worksheets-manager button#createWorksheetBtn":{click:"onCreateWorksheetBtnClick"},grid:{beforeselect:"onGridBeforeSelect",select:"onGridSelect",deleteclick:"onWorksheetDeleteClick"},"sbg-worksheets-form field":{dirtychange:"onFieldDirtyChange"},promptsGrid:{upclick:"onPromptGridUpClick",downclick:"onPromptGridDownClick",deleteclick:"onPromptDeleteClick"},revertBtn:{click:"onRevertBtnClick"},saveBtn:{click:"onSaveBtnClick"},"sbg-worksheets-manager button#addPromptBtn":{click:"onAddPromptBtnClick"}},listen:{store:{"#StandardsWorksheets":{update:"onWorksheetUpdate"},"#StandardsWorksheetPrompts":{add:"onWorksheetPromptAdd",update:"onWorksheetPromptUpdate",remove:"onWorksheetPromptRemove",write:"onWorksheetPromptsStoreWrite"}}},init:function(){SlateAdmin.view.settings.NavPanel.prototype.config.data.push({href:"#settings/standards-worksheets",text:"Standards Worksheets"})},onLaunch:function(){console.warn("SBG controller launched")},showWorksheetSettings:function(){var c=this,d=c.getSettingsNavPanel();Ext.suspendLayouts();Ext.util.History.suspendState();d.setActiveLink("settings/standards-worksheets");d.expand(false);Ext.util.History.resumeState(false);c.application.getController("Viewport").loadCard(c.getManagerCt());Ext.resumeLayouts(true)},onManagerCtActivate:function(){this.getStandardsWorksheetsStore().load()},onCreateWorksheetBtnClick:function(){var d=this.getGrid(),c=d.getStore().add({})[0];d.setSelection(c);this.getTitleField().focus()},onGridBeforeSelect:function(g,h){var j=this,f=j.getForm(),i=f.getRecord();if(i&&(f.isDirty()||j.isPromptsStoreDirty())){Ext.Msg.confirm("Unsaved Changes","You have unsaved changes to this worksheet.<br/><br/>Do you want to continue without saving them?",function(a){if(a!="yes"){return}j.revertChanges();g.select([h])});return false}},onGridSelect:function(g,h){var i=this,j=i.getForm(),f=i.getStandardsWorksheetPromptsStore();j.enable();j.loadRecord(h);if(h.phantom){f.loadRecords([])}else{f.load({params:{worksheet:h.getId()}})}i.syncFormButtons()},onWorksheetDeleteClick:function(d,c){Ext.Msg.confirm("Delete Worksheet",Ext.String.format('Are you sure you want to delete the worksheet <strong>"{0}"</strong> and all of its prompts?',c.get("Title")),function(a){if(a!="yes"){return}c.erase()})},onFieldDirtyChange:function(c,d){this.syncFormButtons()},onPromptGridUpClick:function(i,h,l,j){var g=i.getStore(),k=g.getAt(j-1);if(!k){return}g.beginUpdate();k.set("Position",j+1);h.set("Position",j);g.endUpdate()},onPromptGridDownClick:function(i,h,k,j){var g=i.getStore(),l=g.getAt(j+1);if(!l){return}g.beginUpdate();h.set("Position",j+2);l.set("Position",j+1);g.endUpdate()},onPromptDeleteClick:function(h,g,j,i){var f=h.getStore();f.remove(g);f.each(function(a,b){if(b>=i){a.set("Position",b+1)}})},onWorksheetUpdate:function(f,g,e){var h=this.getForm();if(e=="commit"&&h.getRecord()===g){h.loadRecord(g)}},onWorksheetPromptAdd:function(){this.syncFormButtons()},onWorksheetPromptUpdate:function(){this.syncFormButtons()},onWorksheetPromptRemove:function(){this.syncFormButtons()},onWorksheetPromptsStoreWrite:function(){this.syncFormButtons()},onRevertBtnClick:function(){var h=this,f=h.getGrid(),e=h.getForm(),g=e.getRecord();Ext.Msg.confirm("Discard Changes","Are you sure you want to discard all changes to this worksheet?",function(a){if(a!="yes"){return}h.revertChanges();if(g.phantom){e.disable();f.getStore().remove(g)}})},onSaveBtnClick:function(){var l=this,p=l.getManagerCt(),m=l.getForm(),k=m.getRecord(),j=k.phantom,o=l.getStandardsWorksheetPromptsStore(),n=l.isPromptsStoreDirty(),i=function(){var a=k.getId();if(j){o.each(function(b){b.set("WorksheetID",a)})}if(n){o.sync({callback:function(b,c){p.setLoading(false)}})}else{p.setLoading(false)}};m.updateRecord(k);if(!k.dirty&&!n){return}p.setLoading("Saving worksheet&hellip;");if(k.dirty){k.save({callback:function(c,b,a){if(a){i()}else{p.setLoading(false);Ext.Msg.alert("Failed to save worksheet","This worksheet failed to save to the server:<br><br>"+(b.getError()||"Unknown reason, try again or contact support"))}}})}else{i()}},onAddPromptBtnClick:function(){var f=this.getPromptsGrid(),d=f.getStore(),e=d.add({WorksheetID:this.getForm().getRecord().getId(),Position:d.getCount()+1})[0];f.getPlugin("cellediting").startEdit(e,1)},syncFormButtons:function(){var g=this,h=g.getForm(),f=h.isDirty(),e=g.isPromptsStoreDirty();g.getRevertBtn().setDisabled(!f&&!h.getRecord().phantom&&!e);g.getSaveBtn().setDisabled((!f&&!e)||!h.isValid()||!g.isPromptsStoreValid())},revertChanges:function(){this.getForm().reset();this.getStandardsWorksheetPromptsStore().rejectChanges()},isPromptsStoreValid:function(){var b=true;this.getStandardsWorksheetPromptsStore().each(function(a){if(!a.isValid()){b=false;return false}});return b},isPromptsStoreDirty:function(){var b=this.getStandardsWorksheetPromptsStore();return(b.getNewRecords().length||b.getUpdatedRecords().length||b.getRemovedRecords().length)}});Ext.define("Slate.sbg.model.StandardsWorksheetAssignment",{extend:Ext.data.Model,idProperty:"ID",identifier:"negative",fields:[{name:"ID",type:"int",allowNull:true},{name:"Class",type:"string",defaultValue:"Slate\\SBG\\WorksheetAssignment"},{name:"Created",type:"date",dateFormat:"timestamp",allowNull:true},{name:"CreatorID",type:"int",allowNull:true},{name:"TermID",type:"int"},{name:"CourseSectionID",type:"int"},{name:"WorksheetID",type:"int",allowNull:true}],proxy:{type:"slate-records",url:"/sbg/worksheet-assignments",limitParam:null,startParam:null}});Ext.define("Slate.sbg.store.StandardsWorksheetAssignments",{extend:Ext.data.Store,model:"Slate.sbg.model.StandardsWorksheetAssignment",config:{pageSize:false,autoSync:false}});Ext.define("Slate.sbg.controller.SectionTermReports",{extend:Ext.app.Controller,config:{worksheet:null},stores:["StandardsWorksheets@Slate.sbg.store","StandardsWorksheetAssignments@Slate.sbg.store","StandardsWorksheetPrompts@Slate.sbg.store","StandardsWorksheetPromptOptions@Slate.sbg.store"],views:["WorksheetPrompt@Slate.sbg.widget"],refs:{sectionsGrid:"progress-terms-sectionsgrid",termSelector:"progress-terms-sectionsgrid #termSelector",editorForm:"progress-terms-editorform",promptsFieldset:"progress-terms-editorform #sbgPromptsFieldset"},control:{sectionsGrid:{boxready:"onSectionsGridBoxReady",select:"onSectionsGridSelect"}},listen:{store:{"#progress.terms.Sections":{load:"onSectionsLoad",update:"onSectionUpdate"}},controller:{"#progress.terms.Report":{reportload:"onReportLoad",beforereportsave:"onBeforeReportSave",reportsave:"onReportSave"}}},updateWorksheet:function(e){var h=this,g=h.getPromptsFieldset(),f=h.getStandardsWorksheetPromptsStore();g.hide();if(e){f.getProxy().setExtraParam("worksheet",e);f.load({callback:function(c){var d=c.length,b=0,i,a=[];for(;b<d;b++){i=c[b];a.push({prompt:i})}if(!a.length){a.push({xtype:"component",html:"Selected worksheet contains no prompts"})}Ext.suspendLayouts();g.removeAll();g.add(a);g.show();Ext.resumeLayouts(true)}})}else{f.loadRecords([])}},onSectionsGridBoxReady:function(c){var d=this.getStandardsWorksheetsStore();this.setWorksheet(null);if(!d.isLoaded()){d.load()}},onSectionsGridSelect:function(c,d){this.setWorksheet(d.get("WorksheetID"))},onSectionsLoad:function(g){var k=this,l=k.getSectionsGrid().getView(),h=k.getStandardsWorksheetsStore(),i=k.getStandardsWorksheetAssignmentsStore(),j=function(){var e=i.getRange(),f=e.length,c=0,a,d,b;g.beginUpdate();for(;c<f;c++){a=e[c];d=a.get("WorksheetID");if(b=g.getById(a.get("CourseSectionID"))){b.set({WorksheetID:d,worksheet:h.getById(d),worksheetAssignment:a},{dirty:false})}}g.endUpdate();l.setLoading(false);l.loadMask.msg=l.loadingText};i.getProxy().setExtraParams(g.getProxy().getExtraParams());l.setLoading("Loading SBG assignments&hellip;");i.load({callback:function(){if(h.isLoading()){h.on("load",j,k,{single:true})}else{j()}}})},onSectionUpdate:function(i,k,h,l){if(h!="edit"||l.indexOf("WorksheetID")==-1){return}var m=this,j=k.get("worksheetAssignment"),n=k.get("WorksheetID");if(j){j.set("WorksheetID",n)}else{j=m.getStandardsWorksheetAssignmentsStore().add({TermID:m.getTermSelector().getSelection().getId(),CourseSectionID:k.getId(),WorksheetID:n})[0]}if(!j.dirty&&!j.phantom){return}j.save({success:function(){k.set({WorksheetID:n,worksheet:m.getStandardsWorksheetsStore().getById(n),worksheetAssignment:j},{dirty:false});k.commit();m.setWorksheet(n)}})},onReportLoad:function(d){var c=d.get("SbgWorksheet");this.getEditorForm().setSbgGrades(c&&c.worksheet_id==this.getWorksheet()&&c.grades)},onBeforeReportSave:function(b){b.set("SbgWorksheet",{worksheet_id:this.getWorksheet(),grades:this.getEditorForm().getSbgGrades()})},onReportSave:function(d){var c=d.get("SbgWorksheet");this.getEditorForm().setSbgGrades(c&&c.worksheet_id==this.getWorksheet()&&c.grades)}});Ext.define("Slate.sbg.overrides.SlateAdmin",{override:"SlateAdmin.Application",initControllers:function(){this.callParent();this.getController("Slate.sbg.controller.Worksheets");this.getController("Slate.sbg.controller.SectionTermReports")}});Ext.define("Slate.sbg.overrides.TermReportSectionsGrid",{override:"SlateAdmin.view.progress.terms.SectionsGrid",width:300,worksheetColumnTitle:"Worksheet",emptyWorksheetText:"<em>Double-click to select</em>",initComponent:function(){var b=this;b.columns=b.columns.concat({text:b.worksheetColumnTitle,dataIndex:"WorksheetID",emptyCellText:b.emptyWorksheetText,width:200,editor:{xtype:"combo",allowBlank:true,emptyText:"Select worksheet",store:"StandardsWorksheets",displayField:"Title",valueField:"ID",queryMode:"local",triggerAction:"all",typeAhead:true,forceSelection:true,selectOnFocus:true},renderer:function(h,a,g){if(!h){return null}var f=g.get("worksheet");if(!f){return"[Deleted Worksheet]"}return f.get("Title")}});b.plugins=(b.plugins||[]).concat({ptype:"cellediting",clicksToEdit:2});b.callParent(arguments)}});Ext.define("Slate.store.CourseSections",{extend:Ext.data.Store,model:"Slate.model.CourseSection",config:{pageSize:0}});Ext.define("Slate.store.Terms",{extend:Ext.data.Store,model:"Slate.model.Term",config:{pageSize:0,sorters:[{property:"Left",direction:"ASC"}]}});Ext.define("Slate.store.progress.SectionTermReports",{extend:Ext.data.Store,model:"Slate.model.progress.SectionTermReport",config:{pageSize:0}});Ext.define("Slate.sbg.overrides.SectionTermReportEditorForm",{override:"SlateAdmin.view.progress.terms.EditorForm",initComponent:function(){var a=this;a.items=Ext.Array.insert(Ext.Array.clone(a.items),1,[{itemId:"sbgPromptsFieldset",xtype:"fieldset",title:"Standards-based grading worksheet",defaultType:"sbg-worksheets-prompt",hidden:true}]);a.callParent(arguments);a.sbgPromptsFieldset=a.down("#sbgPromptsFieldset")},getSbgGrades:function(){var e=this.sbgPromptsFieldset.items.getRange(),b=e.length,d=0,a,c={};for(;d<b;d++){a=e[d];if(a.isXType("sbg-worksheets-prompt")){c[a.getPrompt().getId()]=a.getGrade()}}return c},setSbgGrades:function(c){var e=this.sbgPromptsFieldset.items.getRange(),b=e.length,d=0,a;c=c||{};for(;d<b;d++){a=e[d];if(a.isXType("sbg-worksheets-prompt")){a.setGrade(c[a.getPrompt().getId()])}}}});Ext.define("Slate.sbg.overrides.SlateAdmin",{override:"SlateAdmin.Application",initControllers:function(){this.callParent();this.getController("Slate.sbg.controller.Worksheets");this.getController("Slate.sbg.controller.SectionTermReports")}});Ext.define("Slate.sbg.overrides.TermReportSectionsGrid",{override:"SlateAdmin.view.progress.terms.SectionsGrid",width:300,worksheetColumnTitle:"Worksheet",emptyWorksheetText:"<em>Double-click to select</em>",initComponent:function(){var a=this;a.columns=a.columns.concat({text:a.worksheetColumnTitle,dataIndex:"WorksheetID",emptyCellText:a.emptyWorksheetText,width:200,editor:{xtype:"combo",allowBlank:true,emptyText:"Select worksheet",store:"StandardsWorksheets",displayField:"Title",valueField:"ID",queryMode:"local",triggerAction:"all",typeAhead:true,forceSelection:true,selectOnFocus:true},renderer:function(c,b,d){if(!c){return null}var e=d.get("worksheet");if(!e){return"[Deleted Worksheet]"}return e.get("Title")}});a.plugins=(a.plugins||[]).concat({ptype:"cellediting",clicksToEdit:2});a.callParent(arguments)}});Ext.define("Site.page.StandardsTeacher",{singleton:true,baseCls:"standards-grid",tableTpl:["{% var baseCls = values.baseCls %}","{% var totalColumns = 6 + values.terms.getCount() * 4 %}","{% this.terms = values.terms %}","{% this.changeUnit = values.changeUnit %}","{% this.termFirst = values.termFirst %}","{% this.termLast = values.termLast %}","{% this.reports = values.reports %}",'<div class="table-ct">','<table class="{[baseCls]}">','<colgroup class="{[baseCls]}-standard-column">','<colgroup class="{[baseCls]}-growth-column">','<colgroup class="{[baseCls]}-delta-columns">','<col class="{[baseCls]}-nm-column">','<col class="{[baseCls]}-a-column">','<col class="{[baseCls]}-m-column">','<col class="{[baseCls]}-e-column">',"</colgroup>",'<tpl for="terms">','<colgroup class="{[baseCls]}-q{[xindex]}-columns">','<col class="{[baseCls]}-nm-column">','<col class="{[baseCls]}-a-column">','<col class="{[baseCls]}-m-column">','<col class="{[baseCls]}-e-column">',"</colgroup>","</tpl>",'<thead class="{[baseCls]}-header">','<tr class="{[baseCls]}-group-header-row">','<th class="{[baseCls]}-grid-blank-header">&nbsp;</th>','<th class="{[baseCls]}-grid-group-header" colspan="5">',"Compare (",'<select name="change-unit">','<option value="percent" {[this.changeUnit == "percent" ? "selected" : ""]}>%</option>','<option value="count" {[this.changeUnit == "count" ? "selected" : ""]}>&Delta;</option>',"</select>","):",'<div class="{[baseCls]}-comparison-controls">','<select name="term-first" class="field-control">','<tpl for="this.terms">',"<option",' value="{[values.getId()]}"','{[values === this.termFirst ? " selected" : ""]}','{[values.get("Left") >= this.termLast.get("Left") ? " disabled" : ""]}',">",'{[values.get("Title")]}',"</option>","</tpl>","</select>",'<select name="term-last" class="field-control">','<tpl for="this.terms">',"<option",' value="{[values.getId()]}"','{[values === this.termLast ? " selected" : ""]}','{[values.get("Left") <= this.termFirst.get("Left") ? " disabled" : ""]}',">",'{[values.get("Title")]}',"</option>","</tpl>","</select>","</div>","</th>",'<tpl for="terms">','<th class="{[baseCls]}-grid-group-header has-divider" colspan="4" data-term="{[values.getId()]}">{[values.get("Title")]}</th>',"</tpl>","</tr>",'<tr class="{[baseCls]}-rating-header-row">','<th class="{[baseCls]}-grid-blank-header">&nbsp;</th>','<th class="{[baseCls]}-grid-rating-header">Growth</th>','<th class="{[baseCls]}-grid-rating-header has-divider">','<abbr title="Not Meeting">NM</abbr>',"</th>",'<th class="{[baseCls]}-grid-rating-header">','<abbr title="Approaching">A</abbr>',"</th>",'<th class="{[baseCls]}-grid-rating-header">','<abbr title="Meeting">M</abbr>',"</th>",'<th class="{[baseCls]}-grid-rating-header">','<abbr title="Exceeding">E</abbr>',"</th>",'<tpl for="this.terms">','<th class="{[baseCls]}-grid-rating-header has-divider">','<abbr title="Not Meeting">NM</abbr>',"</th>",'<th class="{[baseCls]}-grid-rating-header">','<abbr title="Approaching">A</abbr>',"</th>",'<th class="{[baseCls]}-grid-rating-header">','<abbr title="Meeting">M</abbr>',"</th>",'<th class="{[baseCls]}-grid-rating-header">','<abbr title="Exceeding">E</abbr>',"</th>","</tpl>","</tr>","</thead>",'<tpl for="worksheets.getRange()">','<tbody class="{[baseCls]}-worksheet-body">','{% this.currentSectionIds = values.get("CourseSections").collect("ID", "data") %}','<tr class="{[baseCls]}-worksheet-row">','<th class="{[baseCls]}-worksheet-header" colspan="{[totalColumns]}">{[values.get("Title")]}</th>',"</tr>","<tpl for=\"values.get('Prompts')\">",'<tr class="{[baseCls]}-standard-row" data-prompt="{ID}">','<th class="{[baseCls]}-standard-header">{Prompt}</th>','<td class="{[baseCls]}-percent-cell">',"{% v = this.calculateGrowth(values.ID) %}",'{[v === null ? "&mdash;" : fm.number(v, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(1, values.ID, this.currentSectionIds) %}",'<td class="{[baseCls]}-percent-cell has-divider <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(2, values.ID) %}",'<td class="{[baseCls]}-percent-cell <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(3, values.ID) %}",'<td class="{[baseCls]}-percent-cell <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(4, values.ID) %}",'<td class="{[baseCls]}-percent-cell <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>",'<tpl for="this.terms">','<td class="{[baseCls]}-percent-cell has-divider">',"{[this.countGrades(1, values.getId(), parent.ID, this.currentSectionIds)]}","</td>",'<td class="{[baseCls]}-percent-cell">',"{[this.countGrades(2, values.getId(), parent.ID, this.currentSectionIds)]}","</td>",'<td class="{[baseCls]}-percent-cell">',"{[this.countGrades(3, values.getId(), parent.ID, this.currentSectionIds)]}","</td>",'<td class="{[baseCls]}-percent-cell">',"{[this.countGrades(4, values.getId(), parent.ID, this.currentSectionIds)]}","</td>","</tpl>","</tr>",'<tr class="{[baseCls]}-standard-row" data-prompt="{ID}">','<td class="{[baseCls]}-standard-row" colspan="{[totalColumns]}">','<div class="{[baseCls]}-sections-ct">','<table class="{[baseCls]}-sections-table">','<colgroup class="{[baseCls]}-section-column">','<colgroup class="{[baseCls]}-growth-column">','<colgroup class="{[baseCls]}-delta-columns">','<col class="{[baseCls]}-nm-column">','<col class="{[baseCls]}-a-column">','<col class="{[baseCls]}-m-column">','<col class="{[baseCls]}-e-column">',"</colgroup>",'<tpl for="this.terms">','<colgroup class="{[baseCls]}-q{[xindex]}-columns">','<col class="{[baseCls]}-nm-column">','<col class="{[baseCls]}-a-column">','<col class="{[baseCls]}-m-column">','<col class="{[baseCls]}-e-column">',"</colgroup>","</tpl>","<tpl for=\"parent.get('CourseSections').getRange()\">",'<tr class="{[baseCls]}-section-row" data-section="{[values.getId()]}">','<th class="{[baseCls]}-section-header">{[values.get("Code")]}</th>','<td class="{[baseCls]}-percent-cell">',"{% v = this.calculateGrowth(parent.ID, values.getId()) %}",'{[v === null ? "&mdash;" : fm.number(v, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(1, parent.ID, values.getId()) %}",'<td class="{[baseCls]}-percent-cell has-divider <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(2, parent.ID, values.getId()) %}",'<td class="{[baseCls]}-percent-cell <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(3, parent.ID, values.getId()) %}",'<td class="{[baseCls]}-percent-cell <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% this.currentDelta = this.calculateDelta(4, parent.ID, values.getId()) %}",'<td class="{[baseCls]}-percent-cell <tpl if="this.currentDelta &lt; 0">standards-grid-negative</tpl>">','{[this.currentDelta === null ? "&mdash;" : (this.currentDelta > 0 ? "+" : "") + fm.number(this.currentDelta, "0.#")]}',"</td>","{% values.currentPromptId = parent.ID %}",'<tpl for="this.terms">','<td class="{[baseCls]}-percent-cell has-divider">',"{[this.countGrades(1, values.getId(), parent.currentPromptId, parent.getId())]}","</td>",'<td class="{[baseCls]}-percent-cell">',"{[this.countGrades(2, values.getId(), parent.currentPromptId, parent.getId())]}","</td>",'<td class="{[baseCls]}-percent-cell">',"{[this.countGrades(3, values.getId(), parent.currentPromptId, parent.getId())]}","</td>",'<td class="{[baseCls]}-percent-cell">',"{[this.countGrades(4, values.getId(), parent.currentPromptId, parent.getId())]}","</td>","</tpl>","</tr>","</tpl>","</table>","</div>","</td>","</tr>","</tpl>","</tbody>","</tpl>","</table>","<div>",{countGrades:function(b,c,a,j){var h=this.reports,g=h.getCount(),e=0,f=0,d,k;if(!Ext.isArray(j)){j=[j]}for(;e<g;e++){d=h.getAt(e);k=(d.get("SbgWorksheet")||{}).grades;if(k&&(a in k)&&(!b||k[a]==b)&&d.get("TermID")==c&&Ext.Array.contains(j,d.get("SectionID"))){f++}}return f},calculateDelta:function(c,a,j){var i=this,e=i.terms,f=i.termFirst.getId(),d=i.countGrades(c,f,a,j),k=i.countGrades(null,f,a,j),h=i.termLast.getId(),b=i.countGrades(c,h,a,j),g=i.countGrades(null,h,a,j);if(!k||!g){return null}if(i.changeUnit=="percent"){return((b/g)-(d/k))*100}return b-d},calculateGrowth:function(l,e){var u=this,s=u.termFirst,d=u.termLast,f=u.terms,b=u.reports,g=b.getCount(),q,p,a,r,w,v={},o,n,j=0,m=0,c,h,t,k;for(q=0;q<g;q++){p=b.getAt(q);if(e&&p.get("SectionID")!=e){continue}a=(p.get("SbgWorksheet")||{}).grades;if(!a||!(r=a[l])){continue}w=p.get("StudentID");o=v[w]||(v[w]={});n=f.getById(p.get("TermID"));if(n===s){o.first={grade:r}}else{if(n===d){o.last={grade:r}}}}for(w in v){o=v[w];c=o.first;h=o.last;if(!c||!h){continue}t=c.grade;k=h.grade;j++;if(k==3||k==4||(t&&k&&k>t)){m++}}if(!j){return null}return(m/j)*100}}],constructor:function(){Ext.onReady(this.onDocReady,this)},onDocReady:function(){var b=this,a=b.standardsCt=Ext.getBody().down("#standardsCt"),e=window.SiteEnvironment||{},d,c;a.addCls(b.baseCls+"-ct").empty();b.term=Ext.create("Slate.model.Term",e.standardsTerm);b.worksheetsStore=Ext.create("Slate.sbg.store.StandardsWorksheets",{storeId:"standards-worksheets",data:e.standardsWorksheets});b.termsStore=Ext.create("Slate.store.Terms",{storeId:"standards-worksheet-terms",data:e.standardsWorksheetTerms});b.courseSectionsStore=c=Ext.create("Slate.store.CourseSections",{storeId:"standards-worksheet-course-sections",data:e.standardsWorksheetCourseSections});b.assignmentsStore=d=Ext.create("Slate.sbg.store.StandardsWorksheetAssignments",{storeId:"standards-worksheet-assignments",data:e.standardsWorksheetAssignments});b.reportsStore=Ext.create("Slate.store.progress.SectionTermReports",{storeId:"standards-reports",data:e.standardsReports});b.worksheetsStore.each(function(h){var f=d.query("WorksheetID",h.getId()),g=f.collect("CourseSectionID","data");h.set("Assignments",f);h.set("CourseSections",c.queryBy(function(i){return Ext.Array.contains(g,i.getId())}))});b.renderTable()},renderTable:function(){var b=this,e=b.termsStore,a=b.standardsCt.down("select[name=change-unit]"),d=b.standardsCt.down("select[name=term-first]"),c=b.standardsCt.down("select[name=term-last]");b.standardsCt.select("select",true).un("change","onTermChange",b);Ext.XTemplate.getTpl(b,"tableTpl").overwrite(b.standardsCt,{baseCls:b.baseCls,terms:b.termsStore,courseSections:b.courseSectionsStore,worksheets:b.worksheetsStore,reports:b.reportsStore,changeUnit:a?a.getValue():"percent",termFirst:d?e.getById(d.getValue()):e.first(),termLast:c?e.getById(c.getValue()):e.last()});b.standardsCt.select("select",true).on("change","onTermChange",b)},onTermChange:function(b,a){this.renderTable()}});